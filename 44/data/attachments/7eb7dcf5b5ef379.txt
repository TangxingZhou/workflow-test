DEBUG    src.tests.upgrade.test_mo_upgrade:test_mo_upgrade.py:509 Create secret for restoring data job if not exists.
DEBUG    kubernetes.client.rest:rest.py:235 response body: {"kind":"SecretList","apiVersion":"v1","metadata":{"resourceVersion":"96212134"},"items":[{"metadata":{"name":"acr-credential-0cd66774c2e1635329078c8ad94a7d92","namespace":"moc-upgrade-test","uid":"a63879ce-9e87-4d96-ac58-cc9137f62fb7","resourceVersion":"95374468","creationTimestamp":"2024-03-12T09:04:40Z","managedFields":[{"manager":"aliyun-acr-credential-helper","operation":"Update","apiVersion":"v1","time":"2024-03-14T07:35:27Z","fieldsType":"FieldsV1","fieldsV1":{"f:data":{".":{},"f:.dockerconfigjson":{}},"f:type":{}}}]},"data":{".dockerconfigjson":"eyJhdXRocyI6eyJyZWdpc3RyeS5jbi1oYW5nemhvdS5hbGl5dW5jcy5jb20iOnsiVXNlcm5hbWUiOiJjcl90ZW1wX3VzZXIiLCJQYXNzd29yZCI6ImV5SmhkWFJvVkc5clpXNUpaR1Z1ZEdsbWFXVnlJam9pWkdJek16SmtNelUyWVRVeE5HTXpaamswWmpZNVlURmtNbUV6TW1Jd1kyUWlMQ0owYVcxbElqb2lNVGN4TURVeE5qTTNNekF3TUNJc0luUjVjR1VpT2lKemRITWlMQ0oxYzJWeVNXUWlPaUl4T0RrMU5qazRNekF6TXpZeU5UVXdJbjA6NTk0NGUzYzMwMDg3ZTgwMTc5OWRmZjdjMmY0ZWIxMTRhZTRmYTQ1OCIsIkVtYWlsIjoiY3NAYWxpeXVuY3MuY29tIiwiUHJvdmlkZXIiOm51bGx9fX0="},"type":"kubernetes.io/dockerconfigjson"},{"metadata":{"name":"acr-credential-518dfd1883737c2a6bde99ed6fee583c","namespace":"moc-upgrade-test","uid":"0b5712a6-1f5c-48f9-bae0-57d59848d27a","resourceVersion":"95374471","creationTimestamp":"2024-03-12T09:04:40Z","managedFields":[{"manager":"aliyun-acr-credential-helper","operation":"Update","apiVersion":"v1","time":"2024-03-14T07:35:27Z","fieldsType":"FieldsV1","fieldsV1":{"f:data":{".":{},"f:.dockerconfigjson":{}},"f:type":{}}}]},"data":{".dockerconfigjson":"eyJhdXRocyI6eyJyZWdpc3RyeS1pbnRlcm5hbC5jbi1oYW5nemhvdS5hbGl5dW5jcy5jb20iOnsiVXNlcm5hbWUiOiJjcl90ZW1wX3VzZXIiLCJQYXNzd29yZCI6ImV5SmhkWFJvVkc5clpXNUpaR1Z1ZEdsbWFXVnlJam9pWkdJek16SmtNelUyWVRVeE5HTXpaamswWmpZNVlURmtNbUV6TW1Jd1kyUWlMQ0owYVcxbElqb2lNVGN4TURVeE5qTTNNekF3TUNJc0luUjVjR1VpT2lKemRITWlMQ0oxYzJWeVNXUWlPaUl4T0RrMU5qazRNekF6TXpZeU5UVXdJbjA6NTk0NGUzYzMwMDg3ZTgwMTc5OWRmZjdjMmY0ZWIxMTRhZTRmYTQ1OCIsIkVtYWlsIjoiY3NAYWxpeXVuY3MuY29tIiwiUHJvdmlkZXIiOm51bGx9fX0="},"type":"kubernetes.io/dockerconfigjson"},{"metadata":{"name":"acr-credential-90a511cb8249950d96ce0336cae093f0","namespace":"moc-upgrade-test","uid":"0f8920ae-b5ac-49d2-a7fe-fa57f712c781","resourceVersion":"95374469","creationTimestamp":"2024-03-12T09:04:40Z","managedFields":[{"manager":"aliyun-acr-credential-helper","operation":"Update","apiVersion":"v1","time":"2024-03-14T07:35:27Z","fieldsType":"FieldsV1","fieldsV1":{"f:data":{".":{},"f:.dockerconfigjson":{}},"f:type":{}}}]},"data":{".dockerconfigjson":"eyJhdXRocyI6eyJyZWdpc3RyeS12cGMuY24taGFuZ3pob3UuYWxpeXVuY3MuY29tIjp7IlVzZXJuYW1lIjoiY3JfdGVtcF91c2VyIiwiUGFzc3dvcmQiOiJleUpoZFhSb1ZHOXJaVzVKWkdWdWRHbG1hV1Z5SWpvaVpHSXpNekprTXpVMllUVXhOR016WmprMFpqWTVZVEZrTW1Fek1tSXdZMlFpTENKMGFXMWxJam9pTVRjeE1EVXhOak0zTXpBd01DSXNJblI1Y0dVaU9pSnpkSE1pTENKMWMyVnlTV1FpT2lJeE9EazFOams0TXpBek16WXlOVFV3SW4wOjU5NDRlM2MzMDA4N2U4MDE3OTlkZmY3YzJmNGViMTE0YWU0ZmE0NTgiLCJFbWFpbCI6ImNzQGFsaXl1bmNzLmNvbSIsIlByb3ZpZGVyIjpudWxsfX19"},"type":"kubernetes.io/dockerconfigjson"},{"metadata":{"name":"acr-credential-91029a2c549212d737cbd7e40e1a6ebb","namespace":"moc-upgrade-test","uid":"b40e1971-4de5-475b-90cd-59c3f8afb972","resourceVersion":"95374472","creationTimestamp":"2024-03-12T09:04:40Z","managedFields":[{"manager":"aliyun-acr-credential-helper","operation":"Update","apiVersion":"v1","time":"2024-03-14T07:35:27Z","fieldsType":"FieldsV1","fieldsV1":{"f:data":{".":{},"f:.dockerconfigjson":{}},"f:type":{}}}]},"data":{".dockerconfigjson":"eyJhdXRocyI6eyJyZWdpc3RyeS1pbnRsLmNuLWhhbmd6aG91LmFsaXl1bmNzLmNvbSI6eyJVc2VybmFtZSI6ImNyX3RlbXBfdXNlciIsIlBhc3N3b3JkIjoiZXlKaGRYUm9WRzlyWlc1SlpHVnVkR2xtYVdWeUlqb2laR0l6TXpKa016VTJZVFV4TkdNelpqazBaalk1WVRGa01tRXpNbUl3WTJRaUxDSjBhVzFsSWpvaU1UY3hNRFV4TmpNM016QXdNQ0lzSW5SNWNHVWlPaUp6ZEhNaUxDSjFjMlZ5U1dRaU9pSXhPRGsxTmprNE16QXpNell5TlRVd0luMDo1OTQ0ZTNjMzAwODdlODAxNzk5ZGZmN2MyZjRlYjExNGFlNGZhNDU4IiwiRW1haWwiOiJjc0BhbGl5dW5jcy5jb20iLCJQcm92aWRlciI6bnVsbH19fQ=="},"type":"kubernetes.io/dockerconfigjson"},{"metadata":{"name":"acr-credential-bbec27b1dbdc90bb0f27dbd225b24e17","namespace":"moc-upgrade-test","uid":"25c912a7-f853-41cc-b7d1-4452cd4cabad","resourceVersion":"95374473","creationTimestamp":"2024-03-12T09:04:40Z","managedFields":[{"manager":"aliyun-acr-credential-helper","operation":"Update","apiVersion":"v1","time":"2024-03-14T07:35:27Z","fieldsType":"FieldsV1","fieldsV1":{"f:data":{".":{},"f:.dockerconfigjson":{}},"f:type":{}}}]},"data":{".dockerconfigjson":"eyJhdXRocyI6eyJyZWdpc3RyeS1pbnRsLXZwYy5jbi1oYW5nemhvdS5hbGl5dW5jcy5jb20iOnsiVXNlcm5hbWUiOiJjcl90ZW1wX3VzZXIiLCJQYXNzd29yZCI6ImV5SmhkWFJvVkc5clpXNUpaR1Z1ZEdsbWFXVnlJam9pWkdJek16SmtNelUyWVRVeE5HTXpaamswWmpZNVlURmtNbUV6TW1Jd1kyUWlMQ0owYVcxbElqb2lNVGN4TURVeE5qTTNNekF3TUNJc0luUjVjR1VpT2lKemRITWlMQ0oxYzJWeVNXUWlPaUl4T0RrMU5qazRNekF6TXpZeU5UVXdJbjA6NTk0NGUzYzMwMDg3ZTgwMTc5OWRmZjdjMmY0ZWIxMTRhZTRmYTQ1OCIsIkVtYWlsIjoiY3NAYWxpeXVuY3MuY29tIiwiUHJvdmlkZXIiOm51bGx9fX0="},"type":"kubernetes.io/dockerconfigjson"},{"metadata":{"name":"aliyun-moc-backup-test","namespace":"moc-upgrade-test","uid":"45bedd8e-b045-4f2e-be39-5fcba9bc1fbe","resourceVersion":"93463863","creationTimestamp":"2024-03-12T09:04:41Z","managedFields":[{"manager":"OpenAPI-Generator","operation":"Update","apiVersion":"v1","time":"2024-03-12T09:04:41Z","fieldsType":"FieldsV1","fieldsV1":{"f:data":{".":{},"f:AWS_ACCESS_KEY_ID":{},"f:AWS_SECRET_ACCESS_KEY":{}},"f:type":{}}}]},"data":{"AWS_ACCESS_KEY_ID":"TFRBSTV0THBOelpCRk1kdUE5QllUdE5x","AWS_SECRET_ACCESS_KEY":"UzFNR3NHQWpXOW1BVzBJMUZBb21zd0hDelBvMjFs"},"type":"Opaque"}]}

DEBUG    src.tests.upgrade.test_mo_upgrade:test_mo_upgrade.py:164 Secret aliyun-moc-backup-test already exists. Skip to create it.
DEBUG    kubernetes.client.rest:rest.py:235 response body: {"kind":"SecretList","apiVersion":"v1","metadata":{"resourceVersion":"96212136"},"items":[{"metadata":{"name":"acr-credential-0cd66774c2e1635329078c8ad94a7d92","namespace":"moc-upgrade-test","uid":"a63879ce-9e87-4d96-ac58-cc9137f62fb7","resourceVersion":"95374468","creationTimestamp":"2024-03-12T09:04:40Z","managedFields":[{"manager":"aliyun-acr-credential-helper","operation":"Update","apiVersion":"v1","time":"2024-03-14T07:35:27Z","fieldsType":"FieldsV1","fieldsV1":{"f:data":{".":{},"f:.dockerconfigjson":{}},"f:type":{}}}]},"data":{".dockerconfigjson":"eyJhdXRocyI6eyJyZWdpc3RyeS5jbi1oYW5nemhvdS5hbGl5dW5jcy5jb20iOnsiVXNlcm5hbWUiOiJjcl90ZW1wX3VzZXIiLCJQYXNzd29yZCI6ImV5SmhkWFJvVkc5clpXNUpaR1Z1ZEdsbWFXVnlJam9pWkdJek16SmtNelUyWVRVeE5HTXpaamswWmpZNVlURmtNbUV6TW1Jd1kyUWlMQ0owYVcxbElqb2lNVGN4TURVeE5qTTNNekF3TUNJc0luUjVjR1VpT2lKemRITWlMQ0oxYzJWeVNXUWlPaUl4T0RrMU5qazRNekF6TXpZeU5UVXdJbjA6NTk0NGUzYzMwMDg3ZTgwMTc5OWRmZjdjMmY0ZWIxMTRhZTRmYTQ1OCIsIkVtYWlsIjoiY3NAYWxpeXVuY3MuY29tIiwiUHJvdmlkZXIiOm51bGx9fX0="},"type":"kubernetes.io/dockerconfigjson"},{"metadata":{"name":"acr-credential-518dfd1883737c2a6bde99ed6fee583c","namespace":"moc-upgrade-test","uid":"0b5712a6-1f5c-48f9-bae0-57d59848d27a","resourceVersion":"95374471","creationTimestamp":"2024-03-12T09:04:40Z","managedFields":[{"manager":"aliyun-acr-credential-helper","operation":"Update","apiVersion":"v1","time":"2024-03-14T07:35:27Z","fieldsType":"FieldsV1","fieldsV1":{"f:data":{".":{},"f:.dockerconfigjson":{}},"f:type":{}}}]},"data":{".dockerconfigjson":"eyJhdXRocyI6eyJyZWdpc3RyeS1pbnRlcm5hbC5jbi1oYW5nemhvdS5hbGl5dW5jcy5jb20iOnsiVXNlcm5hbWUiOiJjcl90ZW1wX3VzZXIiLCJQYXNzd29yZCI6ImV5SmhkWFJvVkc5clpXNUpaR1Z1ZEdsbWFXVnlJam9pWkdJek16SmtNelUyWVRVeE5HTXpaamswWmpZNVlURmtNbUV6TW1Jd1kyUWlMQ0owYVcxbElqb2lNVGN4TURVeE5qTTNNekF3TUNJc0luUjVjR1VpT2lKemRITWlMQ0oxYzJWeVNXUWlPaUl4T0RrMU5qazRNekF6TXpZeU5UVXdJbjA6NTk0NGUzYzMwMDg3ZTgwMTc5OWRmZjdjMmY0ZWIxMTRhZTRmYTQ1OCIsIkVtYWlsIjoiY3NAYWxpeXVuY3MuY29tIiwiUHJvdmlkZXIiOm51bGx9fX0="},"type":"kubernetes.io/dockerconfigjson"},{"metadata":{"name":"acr-credential-90a511cb8249950d96ce0336cae093f0","namespace":"moc-upgrade-test","uid":"0f8920ae-b5ac-49d2-a7fe-fa57f712c781","resourceVersion":"95374469","creationTimestamp":"2024-03-12T09:04:40Z","managedFields":[{"manager":"aliyun-acr-credential-helper","operation":"Update","apiVersion":"v1","time":"2024-03-14T07:35:27Z","fieldsType":"FieldsV1","fieldsV1":{"f:data":{".":{},"f:.dockerconfigjson":{}},"f:type":{}}}]},"data":{".dockerconfigjson":"eyJhdXRocyI6eyJyZWdpc3RyeS12cGMuY24taGFuZ3pob3UuYWxpeXVuY3MuY29tIjp7IlVzZXJuYW1lIjoiY3JfdGVtcF91c2VyIiwiUGFzc3dvcmQiOiJleUpoZFhSb1ZHOXJaVzVKWkdWdWRHbG1hV1Z5SWpvaVpHSXpNekprTXpVMllUVXhOR016WmprMFpqWTVZVEZrTW1Fek1tSXdZMlFpTENKMGFXMWxJam9pTVRjeE1EVXhOak0zTXpBd01DSXNJblI1Y0dVaU9pSnpkSE1pTENKMWMyVnlTV1FpT2lJeE9EazFOams0TXpBek16WXlOVFV3SW4wOjU5NDRlM2MzMDA4N2U4MDE3OTlkZmY3YzJmNGViMTE0YWU0ZmE0NTgiLCJFbWFpbCI6ImNzQGFsaXl1bmNzLmNvbSIsIlByb3ZpZGVyIjpudWxsfX19"},"type":"kubernetes.io/dockerconfigjson"},{"metadata":{"name":"acr-credential-91029a2c549212d737cbd7e40e1a6ebb","namespace":"moc-upgrade-test","uid":"b40e1971-4de5-475b-90cd-59c3f8afb972","resourceVersion":"95374472","creationTimestamp":"2024-03-12T09:04:40Z","managedFields":[{"manager":"aliyun-acr-credential-helper","operation":"Update","apiVersion":"v1","time":"2024-03-14T07:35:27Z","fieldsType":"FieldsV1","fieldsV1":{"f:data":{".":{},"f:.dockerconfigjson":{}},"f:type":{}}}]},"data":{".dockerconfigjson":"eyJhdXRocyI6eyJyZWdpc3RyeS1pbnRsLmNuLWhhbmd6aG91LmFsaXl1bmNzLmNvbSI6eyJVc2VybmFtZSI6ImNyX3RlbXBfdXNlciIsIlBhc3N3b3JkIjoiZXlKaGRYUm9WRzlyWlc1SlpHVnVkR2xtYVdWeUlqb2laR0l6TXpKa016VTJZVFV4TkdNelpqazBaalk1WVRGa01tRXpNbUl3WTJRaUxDSjBhVzFsSWpvaU1UY3hNRFV4TmpNM016QXdNQ0lzSW5SNWNHVWlPaUp6ZEhNaUxDSjFjMlZ5U1dRaU9pSXhPRGsxTmprNE16QXpNell5TlRVd0luMDo1OTQ0ZTNjMzAwODdlODAxNzk5ZGZmN2MyZjRlYjExNGFlNGZhNDU4IiwiRW1haWwiOiJjc0BhbGl5dW5jcy5jb20iLCJQcm92aWRlciI6bnVsbH19fQ=="},"type":"kubernetes.io/dockerconfigjson"},{"metadata":{"name":"acr-credential-bbec27b1dbdc90bb0f27dbd225b24e17","namespace":"moc-upgrade-test","uid":"25c912a7-f853-41cc-b7d1-4452cd4cabad","resourceVersion":"95374473","creationTimestamp":"2024-03-12T09:04:40Z","managedFields":[{"manager":"aliyun-acr-credential-helper","operation":"Update","apiVersion":"v1","time":"2024-03-14T07:35:27Z","fieldsType":"FieldsV1","fieldsV1":{"f:data":{".":{},"f:.dockerconfigjson":{}},"f:type":{}}}]},"data":{".dockerconfigjson":"eyJhdXRocyI6eyJyZWdpc3RyeS1pbnRsLXZwYy5jbi1oYW5nemhvdS5hbGl5dW5jcy5jb20iOnsiVXNlcm5hbWUiOiJjcl90ZW1wX3VzZXIiLCJQYXNzd29yZCI6ImV5SmhkWFJvVkc5clpXNUpaR1Z1ZEdsbWFXVnlJam9pWkdJek16SmtNelUyWVRVeE5HTXpaamswWmpZNVlURmtNbUV6TW1Jd1kyUWlMQ0owYVcxbElqb2lNVGN4TURVeE5qTTNNekF3TUNJc0luUjVjR1VpT2lKemRITWlMQ0oxYzJWeVNXUWlPaUl4T0RrMU5qazRNekF6TXpZeU5UVXdJbjA6NTk0NGUzYzMwMDg3ZTgwMTc5OWRmZjdjMmY0ZWIxMTRhZTRmYTQ1OCIsIkVtYWlsIjoiY3NAYWxpeXVuY3MuY29tIiwiUHJvdmlkZXIiOm51bGx9fX0="},"type":"kubernetes.io/dockerconfigjson"},{"metadata":{"name":"aliyun-moc-backup-test","namespace":"moc-upgrade-test","uid":"45bedd8e-b045-4f2e-be39-5fcba9bc1fbe","resourceVersion":"93463863","creationTimestamp":"2024-03-12T09:04:41Z","managedFields":[{"manager":"OpenAPI-Generator","operation":"Update","apiVersion":"v1","time":"2024-03-12T09:04:41Z","fieldsType":"FieldsV1","fieldsV1":{"f:data":{".":{},"f:AWS_ACCESS_KEY_ID":{},"f:AWS_SECRET_ACCESS_KEY":{}},"f:type":{}}}]},"data":{"AWS_ACCESS_KEY_ID":"TFRBSTV0THBOelpCRk1kdUE5QllUdE5x","AWS_SECRET_ACCESS_KEY":"UzFNR3NHQWpXOW1BVzBJMUZBb21zd0hDelBvMjFs"},"type":"Opaque"}]}

DEBUG    kubernetes.client.rest:rest.py:235 response body: {"kind":"SecretList","apiVersion":"v1","metadata":{"resourceVersion":"96212139"},"items":[{"metadata":{"name":"acr-credential-0cd66774c2e1635329078c8ad94a7d92","namespace":"moc-upgrade-test","uid":"a63879ce-9e87-4d96-ac58-cc9137f62fb7","resourceVersion":"95374468","creationTimestamp":"2024-03-12T09:04:40Z","managedFields":[{"manager":"aliyun-acr-credential-helper","operation":"Update","apiVersion":"v1","time":"2024-03-14T07:35:27Z","fieldsType":"FieldsV1","fieldsV1":{"f:data":{".":{},"f:.dockerconfigjson":{}},"f:type":{}}}]},"data":{".dockerconfigjson":"eyJhdXRocyI6eyJyZWdpc3RyeS5jbi1oYW5nemhvdS5hbGl5dW5jcy5jb20iOnsiVXNlcm5hbWUiOiJjcl90ZW1wX3VzZXIiLCJQYXNzd29yZCI6ImV5SmhkWFJvVkc5clpXNUpaR1Z1ZEdsbWFXVnlJam9pWkdJek16SmtNelUyWVRVeE5HTXpaamswWmpZNVlURmtNbUV6TW1Jd1kyUWlMQ0owYVcxbElqb2lNVGN4TURVeE5qTTNNekF3TUNJc0luUjVjR1VpT2lKemRITWlMQ0oxYzJWeVNXUWlPaUl4T0RrMU5qazRNekF6TXpZeU5UVXdJbjA6NTk0NGUzYzMwMDg3ZTgwMTc5OWRmZjdjMmY0ZWIxMTRhZTRmYTQ1OCIsIkVtYWlsIjoiY3NAYWxpeXVuY3MuY29tIiwiUHJvdmlkZXIiOm51bGx9fX0="},"type":"kubernetes.io/dockerconfigjson"},{"metadata":{"name":"acr-credential-518dfd1883737c2a6bde99ed6fee583c","namespace":"moc-upgrade-test","uid":"0b5712a6-1f5c-48f9-bae0-57d59848d27a","resourceVersion":"95374471","creationTimestamp":"2024-03-12T09:04:40Z","managedFields":[{"manager":"aliyun-acr-credential-helper","operation":"Update","apiVersion":"v1","time":"2024-03-14T07:35:27Z","fieldsType":"FieldsV1","fieldsV1":{"f:data":{".":{},"f:.dockerconfigjson":{}},"f:type":{}}}]},"data":{".dockerconfigjson":"eyJhdXRocyI6eyJyZWdpc3RyeS1pbnRlcm5hbC5jbi1oYW5nemhvdS5hbGl5dW5jcy5jb20iOnsiVXNlcm5hbWUiOiJjcl90ZW1wX3VzZXIiLCJQYXNzd29yZCI6ImV5SmhkWFJvVkc5clpXNUpaR1Z1ZEdsbWFXVnlJam9pWkdJek16SmtNelUyWVRVeE5HTXpaamswWmpZNVlURmtNbUV6TW1Jd1kyUWlMQ0owYVcxbElqb2lNVGN4TURVeE5qTTNNekF3TUNJc0luUjVjR1VpT2lKemRITWlMQ0oxYzJWeVNXUWlPaUl4T0RrMU5qazRNekF6TXpZeU5UVXdJbjA6NTk0NGUzYzMwMDg3ZTgwMTc5OWRmZjdjMmY0ZWIxMTRhZTRmYTQ1OCIsIkVtYWlsIjoiY3NAYWxpeXVuY3MuY29tIiwiUHJvdmlkZXIiOm51bGx9fX0="},"type":"kubernetes.io/dockerconfigjson"},{"metadata":{"name":"acr-credential-90a511cb8249950d96ce0336cae093f0","namespace":"moc-upgrade-test","uid":"0f8920ae-b5ac-49d2-a7fe-fa57f712c781","resourceVersion":"95374469","creationTimestamp":"2024-03-12T09:04:40Z","managedFields":[{"manager":"aliyun-acr-credential-helper","operation":"Update","apiVersion":"v1","time":"2024-03-14T07:35:27Z","fieldsType":"FieldsV1","fieldsV1":{"f:data":{".":{},"f:.dockerconfigjson":{}},"f:type":{}}}]},"data":{".dockerconfigjson":"eyJhdXRocyI6eyJyZWdpc3RyeS12cGMuY24taGFuZ3pob3UuYWxpeXVuY3MuY29tIjp7IlVzZXJuYW1lIjoiY3JfdGVtcF91c2VyIiwiUGFzc3dvcmQiOiJleUpoZFhSb1ZHOXJaVzVKWkdWdWRHbG1hV1Z5SWpvaVpHSXpNekprTXpVMllUVXhOR016WmprMFpqWTVZVEZrTW1Fek1tSXdZMlFpTENKMGFXMWxJam9pTVRjeE1EVXhOak0zTXpBd01DSXNJblI1Y0dVaU9pSnpkSE1pTENKMWMyVnlTV1FpT2lJeE9EazFOams0TXpBek16WXlOVFV3SW4wOjU5NDRlM2MzMDA4N2U4MDE3OTlkZmY3YzJmNGViMTE0YWU0ZmE0NTgiLCJFbWFpbCI6ImNzQGFsaXl1bmNzLmNvbSIsIlByb3ZpZGVyIjpudWxsfX19"},"type":"kubernetes.io/dockerconfigjson"},{"metadata":{"name":"acr-credential-91029a2c549212d737cbd7e40e1a6ebb","namespace":"moc-upgrade-test","uid":"b40e1971-4de5-475b-90cd-59c3f8afb972","resourceVersion":"95374472","creationTimestamp":"2024-03-12T09:04:40Z","managedFields":[{"manager":"aliyun-acr-credential-helper","operation":"Update","apiVersion":"v1","time":"2024-03-14T07:35:27Z","fieldsType":"FieldsV1","fieldsV1":{"f:data":{".":{},"f:.dockerconfigjson":{}},"f:type":{}}}]},"data":{".dockerconfigjson":"eyJhdXRocyI6eyJyZWdpc3RyeS1pbnRsLmNuLWhhbmd6aG91LmFsaXl1bmNzLmNvbSI6eyJVc2VybmFtZSI6ImNyX3RlbXBfdXNlciIsIlBhc3N3b3JkIjoiZXlKaGRYUm9WRzlyWlc1SlpHVnVkR2xtYVdWeUlqb2laR0l6TXpKa016VTJZVFV4TkdNelpqazBaalk1WVRGa01tRXpNbUl3WTJRaUxDSjBhVzFsSWpvaU1UY3hNRFV4TmpNM016QXdNQ0lzSW5SNWNHVWlPaUp6ZEhNaUxDSjFjMlZ5U1dRaU9pSXhPRGsxTmprNE16QXpNell5TlRVd0luMDo1OTQ0ZTNjMzAwODdlODAxNzk5ZGZmN2MyZjRlYjExNGFlNGZhNDU4IiwiRW1haWwiOiJjc0BhbGl5dW5jcy5jb20iLCJQcm92aWRlciI6bnVsbH19fQ=="},"type":"kubernetes.io/dockerconfigjson"},{"metadata":{"name":"acr-credential-bbec27b1dbdc90bb0f27dbd225b24e17","namespace":"moc-upgrade-test","uid":"25c912a7-f853-41cc-b7d1-4452cd4cabad","resourceVersion":"95374473","creationTimestamp":"2024-03-12T09:04:40Z","managedFields":[{"manager":"aliyun-acr-credential-helper","operation":"Update","apiVersion":"v1","time":"2024-03-14T07:35:27Z","fieldsType":"FieldsV1","fieldsV1":{"f:data":{".":{},"f:.dockerconfigjson":{}},"f:type":{}}}]},"data":{".dockerconfigjson":"eyJhdXRocyI6eyJyZWdpc3RyeS1pbnRsLXZwYy5jbi1oYW5nemhvdS5hbGl5dW5jcy5jb20iOnsiVXNlcm5hbWUiOiJjcl90ZW1wX3VzZXIiLCJQYXNzd29yZCI6ImV5SmhkWFJvVkc5clpXNUpaR1Z1ZEdsbWFXVnlJam9pWkdJek16SmtNelUyWVRVeE5HTXpaamswWmpZNVlURmtNbUV6TW1Jd1kyUWlMQ0owYVcxbElqb2lNVGN4TURVeE5qTTNNekF3TUNJc0luUjVjR1VpT2lKemRITWlMQ0oxYzJWeVNXUWlPaUl4T0RrMU5qazRNekF6TXpZeU5UVXdJbjA6NTk0NGUzYzMwMDg3ZTgwMTc5OWRmZjdjMmY0ZWIxMTRhZTRmYTQ1OCIsIkVtYWlsIjoiY3NAYWxpeXVuY3MuY29tIiwiUHJvdmlkZXIiOm51bGx9fX0="},"type":"kubernetes.io/dockerconfigjson"},{"metadata":{"name":"aliyun-moc-backup-test","namespace":"moc-upgrade-test","uid":"45bedd8e-b045-4f2e-be39-5fcba9bc1fbe","resourceVersion":"93463863","creationTimestamp":"2024-03-12T09:04:41Z","managedFields":[{"manager":"OpenAPI-Generator","operation":"Update","apiVersion":"v1","time":"2024-03-12T09:04:41Z","fieldsType":"FieldsV1","fieldsV1":{"f:data":{".":{},"f:AWS_ACCESS_KEY_ID":{},"f:AWS_SECRET_ACCESS_KEY":{}},"f:type":{}}}]},"data":{"AWS_ACCESS_KEY_ID":"TFRBSTV0THBOelpCRk1kdUE5QllUdE5x","AWS_SECRET_ACCESS_KEY":"UzFNR3NHQWpXOW1BVzBJMUZBb21zd0hDelBvMjFs"},"type":"Opaque"}]}

DEBUG    kubernetes.client.rest:rest.py:235 response body: {"kind":"Secret","apiVersion":"v1","metadata":{"name":"aliyun-moc-backup-test","namespace":"moc-upgrade-test","uid":"45bedd8e-b045-4f2e-be39-5fcba9bc1fbe","resourceVersion":"93463863","creationTimestamp":"2024-03-12T09:04:41Z","managedFields":[{"manager":"OpenAPI-Generator","operation":"Update","apiVersion":"v1","time":"2024-03-12T09:04:41Z","fieldsType":"FieldsV1","fieldsV1":{"f:data":{".":{},"f:AWS_ACCESS_KEY_ID":{},"f:AWS_SECRET_ACCESS_KEY":{}},"f:type":{}}}]},"data":{"AWS_ACCESS_KEY_ID":"TFRBSTV0THBOelpCRk1kdUE5QllUdE5x","AWS_SECRET_ACCESS_KEY":"UzFNR3NHQWpXOW1BVzBJMUZBb21zd0hDelBvMjFs"},"type":"Opaque"}

DEBUG    oss2.api:api.py:486 Init Bucket: moc-backup-test, endpoint: http://oss-cn-hangzhou.aliyuncs.com, isCname: False, connect_timeout: None, app_name: , enabled_crc: True, region: None, proxies: None
DEBUG    oss2.api:api.py:572 Start to List objects, bucket: moc-backup-test, prefix: restore-freetier-02-20240315021618, delimiter: , marker: , max-keys: 100
DEBUG    oss2.http:http.py:92 Init request, method: GET, url: http://moc-backup-test.oss-cn-hangzhou.aliyuncs.com/, params: {'prefix': 'restore-freetier-02-20240315021618', 'delimiter': '', 'marker': '', 'max-keys': '100', 'encoding-type': 'url'}, headers: {'Accept-Encoding': None, 'User-Agent': 'aliyun-sdk-python/2.18.4(Linux/6.5.0-1016-azure/x86_64;3.8.18)'}
DEBUG    oss2.auth:auth.py:130 Make signature: string to be signed = b'GET\n\n\nFri, 15 Mar 2024 03:44:28 GMT\n/moc-backup-test/'
DEBUG    oss2.http:http.py:45 Send request, method: GET, url: http://moc-backup-test.oss-cn-hangzhou.aliyuncs.com/, params: {'prefix': 'restore-freetier-02-20240315021618', 'delimiter': '', 'marker': '', 'max-keys': '100', 'encoding-type': 'url'}, headers: {'Accept-Encoding': None, 'User-Agent': 'aliyun-sdk-python/2.18.4(Linux/6.5.0-1016-azure/x86_64;3.8.18)', 'date': 'Fri, 15 Mar 2024 03:44:28 GMT', 'authorization': 'OSS LTAI5tLpNzZBFMduA9BYTtNq:NfjKOICuxaGRTX/yB6DIyf9xClo='}, timeout: 60, proxies: None
DEBUG    oss2.http:http.py:117 Get response headers, req-id:65F3C41C07D4B933311F0EE7, status: 200, headers: {'Server': 'AliyunOSS', 'Date': 'Fri, 15 Mar 2024 03:44:28 GMT', 'Content-Type': 'application/xml', 'Content-Length': '304', 'Connection': 'keep-alive', 'x-oss-request-id': '65F3C41C07D4B933311F0EE7', 'x-oss-server-time': '83'}
DEBUG    oss2.api:api.py:582 List objects done, req_id: 65F3C41C07D4B933311F0EE7, status_code: 200
DEBUG    src.tests.upgrade.test_mo_upgrade:test_mo_upgrade.py:551 S3 storage 'moc-backup-test/restore-freetier-02-20240315021618' is empty.
DEBUG    kubernetes.client.rest:rest.py:235 response body: {"kind":"Status","apiVersion":"v1","metadata":{},"status":"Failure","message":"clusters.core.matrixone-cloud \"restore-freetier-02\" not found","reason":"NotFound","details":{"name":"restore-freetier-02","group":"core.matrixone-cloud","kind":"clusters"},"code":404}

DEBUG    src.tests.upgrade.test_mo_upgrade:test_mo_upgrade.py:126 Root cluster restore-freetier-02 doesn't exist.
DEBUG    src.tests.upgrade.test_mo_upgrade:test_mo_upgrade.py:650 S3 storage is accessible and empty, restore data.
DEBUG    kubernetes.client.rest:rest.py:235 response body: {"kind":"Pod","apiVersion":"v1","metadata":{"name":"restore-restore-freetier-02","namespace":"moc-upgrade-test","uid":"e16f2157-ce81-46db-a035-d4ceba7cfb90","resourceVersion":"96212161","creationTimestamp":"2024-03-15T03:44:29Z","managedFields":[{"manager":"OpenAPI-Generator","operation":"Update","apiVersion":"v1","time":"2024-03-15T03:44:29Z","fieldsType":"FieldsV1","fieldsV1":{"f:spec":{"f:containers":{"k:{\"name\":\"mo-br\"}":{".":{},"f:args":{},"f:command":{},"f:env":{".":{},"k:{\"name\":\"AWS_ACCESS_KEY_ID\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"AWS_SECRET_ACCESS_KEY\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}}},"f:image":{},"f:imagePullPolicy":{},"f:name":{},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{}}},"f:dnsPolicy":{},"f:enableServiceLinks":{},"f:imagePullSecrets":{".":{},"k:{\"name\":\"acr-credential-0cd66774c2e1635329078c8ad94a7d92\"}":{},"k:{\"name\":\"acr-credential-518dfd1883737c2a6bde99ed6fee583c\"}":{},"k:{\"name\":\"acr-credential-90a511cb8249950d96ce0336cae093f0\"}":{},"k:{\"name\":\"acr-credential-91029a2c549212d737cbd7e40e1a6ebb\"}":{},"k:{\"name\":\"acr-credential-bbec27b1dbdc90bb0f27dbd225b24e17\"}":{}},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{},"f:terminationGracePeriodSeconds":{},"f:tolerations":{}}}}]},"spec":{"volumes":[{"name":"kube-api-access-kcbh4","projected":{"sources":[{"serviceAccountToken":{"expirationSeconds":3607,"path":"token"}},{"configMap":{"name":"kube-root-ca.crt","items":[{"key":"ca.crt","path":"ca.crt"}]}},{"downwardAPI":{"items":[{"path":"namespace","fieldRef":{"apiVersion":"v1","fieldPath":"metadata.namespace"}}]}}],"defaultMode":420}}],"containers":[{"name":"mo-br","image":"registry.cn-hangzhou.aliyuncs.com/mocloud/mo-backup:4fa21f1","command":["/mo_br","restore"],"args":["--backup_dir","s3","--backup_endpoint","http://oss-cn-hangzhou-internal.aliyuncs.com","--backup_bucket","moc-backup-test","--backup_filepath","backup-freetier-02-20240315021618","--backup_region","cn-hangzhou","--backup_access_key_id","$(AWS_ACCESS_KEY_ID)","--backup_secret_access_key","$(AWS_SECRET_ACCESS_KEY)","--restore_dir","s3","--restore_endpoint","http://oss-cn-hangzhou-internal.aliyuncs.com","--restore_access_key_id","$(AWS_ACCESS_KEY_ID)","--restore_secret_access_key","$(AWS_SECRET_ACCESS_KEY)","--restore_bucket","moc-backup-test","--restore_filepath","restore-freetier-02-20240315021618","--restore_region","cn-hangzhou","--log_level","debug"],"env":[{"name":"AWS_ACCESS_KEY_ID","valueFrom":{"secretKeyRef":{"name":"aliyun-moc-backup-test","key":"AWS_ACCESS_KEY_ID"}}},{"name":"AWS_SECRET_ACCESS_KEY","valueFrom":{"secretKeyRef":{"name":"aliyun-moc-backup-test","key":"AWS_SECRET_ACCESS_KEY"}}}],"resources":{"limits":{"cpu":"7","memory":"13Gi"},"requests":{"cpu":"7","memory":"13Gi"}},"volumeMounts":[{"name":"kube-api-access-kcbh4","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Never","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"default","serviceAccount":"default","securityContext":{},"imagePullSecrets":[{"name":"acr-credential-0cd66774c2e1635329078c8ad94a7d92"},{"name":"acr-credential-90a511cb8249950d96ce0336cae093f0"},{"name":"acr-credential-518dfd1883737c2a6bde99ed6fee583c"},{"name":"acr-credential-91029a2c549212d737cbd7e40e1a6ebb"},{"name":"acr-credential-bbec27b1dbdc90bb0f27dbd225b24e17"}],"schedulerName":"default-scheduler","tolerations":[{"operator":"Exists","effect":"NoSchedule"},{"key":"node.kubernetes.io/not-ready","operator":"Exists","effect":"NoExecute","tolerationSeconds":300},{"key":"node.kubernetes.io/unreachable","operator":"Exists","effect":"NoExecute","tolerationSeconds":300}],"priority":0,"enableServiceLinks":true,"preemptionPolicy":"PreemptLowerPriority"},"status":{"phase":"Pending","qosClass":"Guaranteed"}}

DEBUG    src.tests.upgrade.test_mo_upgrade:test_mo_upgrade.py:659 Start to restore data with command of mo-backup as: /mo_br restore --backup_dir s3 --backup_endpoint http://oss-cn-hangzhou-internal.aliyuncs.com --backup_bucket moc-backup-test --backup_filepath backup-freetier-02-20240315021618 --backup_region cn-hangzhou --backup_access_key_id $(AWS_ACCESS_KEY_ID) --backup_secret_access_key $(AWS_SECRET_ACCESS_KEY) --restore_dir s3 --restore_endpoint http://oss-cn-hangzhou-internal.aliyuncs.com --restore_access_key_id $(AWS_ACCESS_KEY_ID) --restore_secret_access_key $(AWS_SECRET_ACCESS_KEY) --restore_bucket moc-backup-test --restore_filepath restore-freetier-02-20240315021618 --restore_region cn-hangzhou --log_level debug
DEBUG    kubernetes.client.rest:rest.py:235 response body: {"kind":"Pod","apiVersion":"v1","metadata":{"name":"restore-restore-freetier-02","namespace":"moc-upgrade-test","uid":"e16f2157-ce81-46db-a035-d4ceba7cfb90","resourceVersion":"96212162","creationTimestamp":"2024-03-15T03:44:29Z","managedFields":[{"manager":"OpenAPI-Generator","operation":"Update","apiVersion":"v1","time":"2024-03-15T03:44:29Z","fieldsType":"FieldsV1","fieldsV1":{"f:spec":{"f:containers":{"k:{\"name\":\"mo-br\"}":{".":{},"f:args":{},"f:command":{},"f:env":{".":{},"k:{\"name\":\"AWS_ACCESS_KEY_ID\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"AWS_SECRET_ACCESS_KEY\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}}},"f:image":{},"f:imagePullPolicy":{},"f:name":{},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{}}},"f:dnsPolicy":{},"f:enableServiceLinks":{},"f:imagePullSecrets":{".":{},"k:{\"name\":\"acr-credential-0cd66774c2e1635329078c8ad94a7d92\"}":{},"k:{\"name\":\"acr-credential-518dfd1883737c2a6bde99ed6fee583c\"}":{},"k:{\"name\":\"acr-credential-90a511cb8249950d96ce0336cae093f0\"}":{},"k:{\"name\":\"acr-credential-91029a2c549212d737cbd7e40e1a6ebb\"}":{},"k:{\"name\":\"acr-credential-bbec27b1dbdc90bb0f27dbd225b24e17\"}":{}},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{},"f:terminationGracePeriodSeconds":{},"f:tolerations":{}}}},{"manager":"kube-scheduler","operation":"Update","apiVersion":"v1","time":"2024-03-15T03:44:29Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:conditions":{".":{},"k:{\"type\":\"PodScheduled\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:message":{},"f:reason":{},"f:status":{},"f:type":{}}}}},"subresource":"status"}]},"spec":{"volumes":[{"name":"kube-api-access-kcbh4","projected":{"sources":[{"serviceAccountToken":{"expirationSeconds":3607,"path":"token"}},{"configMap":{"name":"kube-root-ca.crt","items":[{"key":"ca.crt","path":"ca.crt"}]}},{"downwardAPI":{"items":[{"path":"namespace","fieldRef":{"apiVersion":"v1","fieldPath":"metadata.namespace"}}]}}],"defaultMode":420}}],"containers":[{"name":"mo-br","image":"registry.cn-hangzhou.aliyuncs.com/mocloud/mo-backup:4fa21f1","command":["/mo_br","restore"],"args":["--backup_dir","s3","--backup_endpoint","http://oss-cn-hangzhou-internal.aliyuncs.com","--backup_bucket","moc-backup-test","--backup_filepath","backup-freetier-02-20240315021618","--backup_region","cn-hangzhou","--backup_access_key_id","$(AWS_ACCESS_KEY_ID)","--backup_secret_access_key","$(AWS_SECRET_ACCESS_KEY)","--restore_dir","s3","--restore_endpoint","http://oss-cn-hangzhou-internal.aliyuncs.com","--restore_access_key_id","$(AWS_ACCESS_KEY_ID)","--restore_secret_access_key","$(AWS_SECRET_ACCESS_KEY)","--restore_bucket","moc-backup-test","--restore_filepath","restore-freetier-02-20240315021618","--restore_region","cn-hangzhou","--log_level","debug"],"env":[{"name":"AWS_ACCESS_KEY_ID","valueFrom":{"secretKeyRef":{"name":"aliyun-moc-backup-test","key":"AWS_ACCESS_KEY_ID"}}},{"name":"AWS_SECRET_ACCESS_KEY","valueFrom":{"secretKeyRef":{"name":"aliyun-moc-backup-test","key":"AWS_SECRET_ACCESS_KEY"}}}],"resources":{"limits":{"cpu":"7","memory":"13Gi"},"requests":{"cpu":"7","memory":"13Gi"}},"volumeMounts":[{"name":"kube-api-access-kcbh4","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Never","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"default","serviceAccount":"default","securityContext":{},"imagePullSecrets":[{"name":"acr-credential-0cd66774c2e1635329078c8ad94a7d92"},{"name":"acr-credential-90a511cb8249950d96ce0336cae093f0"},{"name":"acr-credential-518dfd1883737c2a6bde99ed6fee583c"},{"name":"acr-credential-91029a2c549212d737cbd7e40e1a6ebb"},{"name":"acr-credential-bbec27b1dbdc90bb0f27dbd225b24e17"}],"schedulerName":"default-scheduler","tolerations":[{"operator":"Exists","effect":"NoSchedule"},{"key":"node.kubernetes.io/not-ready","operator":"Exists","effect":"NoExecute","tolerationSeconds":300},{"key":"node.kubernetes.io/unreachable","operator":"Exists","effect":"NoExecute","tolerationSeconds":300}],"priority":0,"enableServiceLinks":true,"preemptionPolicy":"PreemptLowerPriority"},"status":{"phase":"Pending","conditions":[{"type":"PodScheduled","status":"False","lastProbeTime":null,"lastTransitionTime":"2024-03-15T03:44:29Z","reason":"Unschedulable","message":"0/35 nodes are available: 35 Insufficient cpu, 35 Insufficient memory. preemption: 0/35 nodes are available: 35 No preemption victims found for incoming pod., ."}],"qosClass":"Guaranteed"}}

DEBUG    src.tests.upgrade.test_mo_upgrade:test_mo_upgrade.py:219 wait for the conditions by '<lambda>' with args: ('restore-restore-freetier-02', 'moc-upgrade-test'), {}
DEBUG    kubernetes.client.rest:rest.py:235 response body: {"kind":"Pod","apiVersion":"v1","metadata":{"name":"restore-restore-freetier-02","namespace":"moc-upgrade-test","uid":"e16f2157-ce81-46db-a035-d4ceba7cfb90","resourceVersion":"96213815","creationTimestamp":"2024-03-15T03:44:29Z","managedFields":[{"manager":"OpenAPI-Generator","operation":"Update","apiVersion":"v1","time":"2024-03-15T03:44:29Z","fieldsType":"FieldsV1","fieldsV1":{"f:spec":{"f:containers":{"k:{\"name\":\"mo-br\"}":{".":{},"f:args":{},"f:command":{},"f:env":{".":{},"k:{\"name\":\"AWS_ACCESS_KEY_ID\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"AWS_SECRET_ACCESS_KEY\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}}},"f:image":{},"f:imagePullPolicy":{},"f:name":{},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{}}},"f:dnsPolicy":{},"f:enableServiceLinks":{},"f:imagePullSecrets":{".":{},"k:{\"name\":\"acr-credential-0cd66774c2e1635329078c8ad94a7d92\"}":{},"k:{\"name\":\"acr-credential-518dfd1883737c2a6bde99ed6fee583c\"}":{},"k:{\"name\":\"acr-credential-90a511cb8249950d96ce0336cae093f0\"}":{},"k:{\"name\":\"acr-credential-91029a2c549212d737cbd7e40e1a6ebb\"}":{},"k:{\"name\":\"acr-credential-bbec27b1dbdc90bb0f27dbd225b24e17\"}":{}},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{},"f:terminationGracePeriodSeconds":{},"f:tolerations":{}}}},{"manager":"kube-scheduler","operation":"Update","apiVersion":"v1","time":"2024-03-15T03:44:29Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:conditions":{".":{},"k:{\"type\":\"PodScheduled\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:message":{},"f:reason":{},"f:status":{},"f:type":{}}}}},"subresource":"status"},{"manager":"kubelet","operation":"Update","apiVersion":"v1","time":"2024-03-15T03:46:43Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:conditions":{"k:{\"type\":\"ContainersReady\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Initialized\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Ready\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}}},"f:containerStatuses":{},"f:hostIP":{},"f:phase":{},"f:podIP":{},"f:podIPs":{".":{},"k:{\"ip\":\"172.20.87.130\"}":{".":{},"f:ip":{}}},"f:startTime":{}}},"subresource":"status"}]},"spec":{"volumes":[{"name":"kube-api-access-kcbh4","projected":{"sources":[{"serviceAccountToken":{"expirationSeconds":3607,"path":"token"}},{"configMap":{"name":"kube-root-ca.crt","items":[{"key":"ca.crt","path":"ca.crt"}]}},{"downwardAPI":{"items":[{"path":"namespace","fieldRef":{"apiVersion":"v1","fieldPath":"metadata.namespace"}}]}}],"defaultMode":420}}],"containers":[{"name":"mo-br","image":"registry.cn-hangzhou.aliyuncs.com/mocloud/mo-backup:4fa21f1","command":["/mo_br","restore"],"args":["--backup_dir","s3","--backup_endpoint","http://oss-cn-hangzhou-internal.aliyuncs.com","--backup_bucket","moc-backup-test","--backup_filepath","backup-freetier-02-20240315021618","--backup_region","cn-hangzhou","--backup_access_key_id","$(AWS_ACCESS_KEY_ID)","--backup_secret_access_key","$(AWS_SECRET_ACCESS_KEY)","--restore_dir","s3","--restore_endpoint","http://oss-cn-hangzhou-internal.aliyuncs.com","--restore_access_key_id","$(AWS_ACCESS_KEY_ID)","--restore_secret_access_key","$(AWS_SECRET_ACCESS_KEY)","--restore_bucket","moc-backup-test","--restore_filepath","restore-freetier-02-20240315021618","--restore_region","cn-hangzhou","--log_level","debug"],"env":[{"name":"AWS_ACCESS_KEY_ID","valueFrom":{"secretKeyRef":{"name":"aliyun-moc-backup-test","key":"AWS_ACCESS_KEY_ID"}}},{"name":"AWS_SECRET_ACCESS_KEY","valueFrom":{"secretKeyRef":{"name":"aliyun-moc-backup-test","key":"AWS_SECRET_ACCESS_KEY"}}}],"resources":{"limits":{"cpu":"7","memory":"13Gi"},"requests":{"cpu":"7","memory":"13Gi"}},"volumeMounts":[{"name":"kube-api-access-kcbh4","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Never","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"default","serviceAccount":"default","nodeName":"cn-hangzhou.10.1.160.149","securityContext":{},"imagePullSecrets":[{"name":"acr-credential-0cd66774c2e1635329078c8ad94a7d92"},{"name":"acr-credential-90a511cb8249950d96ce0336cae093f0"},{"name":"acr-credential-518dfd1883737c2a6bde99ed6fee583c"},{"name":"acr-credential-91029a2c549212d737cbd7e40e1a6ebb"},{"name":"acr-credential-bbec27b1dbdc90bb0f27dbd225b24e17"}],"schedulerName":"default-scheduler","tolerations":[{"operator":"Exists","effect":"NoSchedule"},{"key":"node.kubernetes.io/not-ready","operator":"Exists","effect":"NoExecute","tolerationSeconds":300},{"key":"node.kubernetes.io/unreachable","operator":"Exists","effect":"NoExecute","tolerationSeconds":300}],"priority":0,"enableServiceLinks":true,"preemptionPolicy":"PreemptLowerPriority"},"status":{"phase":"Running","conditions":[{"type":"Initialized","status":"True","lastProbeTime":null,"lastTransitionTime":"2024-03-15T03:45:52Z"},{"type":"Ready","status":"True","lastProbeTime":null,"lastTransitionTime":"2024-03-15T03:46:43Z"},{"type":"ContainersReady","status":"True","lastProbeTime":null,"lastTransitionTime":"2024-03-15T03:46:43Z"},{"type":"PodScheduled","status":"True","lastProbeTime":null,"lastTransitionTime":"2024-03-15T03:45:53Z"}],"hostIP":"10.1.160.149","podIP":"172.20.87.130","podIPs":[{"ip":"172.20.87.130"}],"startTime":"2024-03-15T03:45:52Z","containerStatuses":[{"name":"mo-br","state":{"running":{"startedAt":"2024-03-15T03:46:42Z"}},"lastState":{},"ready":true,"restartCount":0,"image":"registry.cn-hangzhou.aliyuncs.com/mocloud/mo-backup:4fa21f1","imageID":"registry.cn-hangzhou.aliyuncs.com/mocloud/mo-backup@sha256:96b3680fe7739eb276013fba516d95a7f11f8cde92170a09d835b9f73d6f7e7b","containerID":"containerd://5e28da92e75da0968262af37e7c688c097e78a2312947729f62dfb222b66b132","started":true}],"qosClass":"Guaranteed"}}

DEBUG    src.tests.upgrade.test_mo_upgrade:test_mo_upgrade.py:219 wait for the conditions by '<lambda>' with args: ('restore-restore-freetier-02', 'moc-upgrade-test'), {}
DEBUG    kubernetes.client.rest:rest.py:235 response body: {"kind":"Pod","apiVersion":"v1","metadata":{"name":"restore-restore-freetier-02","namespace":"moc-upgrade-test","uid":"e16f2157-ce81-46db-a035-d4ceba7cfb90","resourceVersion":"96213815","creationTimestamp":"2024-03-15T03:44:29Z","managedFields":[{"manager":"OpenAPI-Generator","operation":"Update","apiVersion":"v1","time":"2024-03-15T03:44:29Z","fieldsType":"FieldsV1","fieldsV1":{"f:spec":{"f:containers":{"k:{\"name\":\"mo-br\"}":{".":{},"f:args":{},"f:command":{},"f:env":{".":{},"k:{\"name\":\"AWS_ACCESS_KEY_ID\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"AWS_SECRET_ACCESS_KEY\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}}},"f:image":{},"f:imagePullPolicy":{},"f:name":{},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{}}},"f:dnsPolicy":{},"f:enableServiceLinks":{},"f:imagePullSecrets":{".":{},"k:{\"name\":\"acr-credential-0cd66774c2e1635329078c8ad94a7d92\"}":{},"k:{\"name\":\"acr-credential-518dfd1883737c2a6bde99ed6fee583c\"}":{},"k:{\"name\":\"acr-credential-90a511cb8249950d96ce0336cae093f0\"}":{},"k:{\"name\":\"acr-credential-91029a2c549212d737cbd7e40e1a6ebb\"}":{},"k:{\"name\":\"acr-credential-bbec27b1dbdc90bb0f27dbd225b24e17\"}":{}},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{},"f:terminationGracePeriodSeconds":{},"f:tolerations":{}}}},{"manager":"kube-scheduler","operation":"Update","apiVersion":"v1","time":"2024-03-15T03:44:29Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:conditions":{".":{},"k:{\"type\":\"PodScheduled\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:message":{},"f:reason":{},"f:status":{},"f:type":{}}}}},"subresource":"status"},{"manager":"kubelet","operation":"Update","apiVersion":"v1","time":"2024-03-15T03:46:43Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:conditions":{"k:{\"type\":\"ContainersReady\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Initialized\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Ready\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}}},"f:containerStatuses":{},"f:hostIP":{},"f:phase":{},"f:podIP":{},"f:podIPs":{".":{},"k:{\"ip\":\"172.20.87.130\"}":{".":{},"f:ip":{}}},"f:startTime":{}}},"subresource":"status"}]},"spec":{"volumes":[{"name":"kube-api-access-kcbh4","projected":{"sources":[{"serviceAccountToken":{"expirationSeconds":3607,"path":"token"}},{"configMap":{"name":"kube-root-ca.crt","items":[{"key":"ca.crt","path":"ca.crt"}]}},{"downwardAPI":{"items":[{"path":"namespace","fieldRef":{"apiVersion":"v1","fieldPath":"metadata.namespace"}}]}}],"defaultMode":420}}],"containers":[{"name":"mo-br","image":"registry.cn-hangzhou.aliyuncs.com/mocloud/mo-backup:4fa21f1","command":["/mo_br","restore"],"args":["--backup_dir","s3","--backup_endpoint","http://oss-cn-hangzhou-internal.aliyuncs.com","--backup_bucket","moc-backup-test","--backup_filepath","backup-freetier-02-20240315021618","--backup_region","cn-hangzhou","--backup_access_key_id","$(AWS_ACCESS_KEY_ID)","--backup_secret_access_key","$(AWS_SECRET_ACCESS_KEY)","--restore_dir","s3","--restore_endpoint","http://oss-cn-hangzhou-internal.aliyuncs.com","--restore_access_key_id","$(AWS_ACCESS_KEY_ID)","--restore_secret_access_key","$(AWS_SECRET_ACCESS_KEY)","--restore_bucket","moc-backup-test","--restore_filepath","restore-freetier-02-20240315021618","--restore_region","cn-hangzhou","--log_level","debug"],"env":[{"name":"AWS_ACCESS_KEY_ID","valueFrom":{"secretKeyRef":{"name":"aliyun-moc-backup-test","key":"AWS_ACCESS_KEY_ID"}}},{"name":"AWS_SECRET_ACCESS_KEY","valueFrom":{"secretKeyRef":{"name":"aliyun-moc-backup-test","key":"AWS_SECRET_ACCESS_KEY"}}}],"resources":{"limits":{"cpu":"7","memory":"13Gi"},"requests":{"cpu":"7","memory":"13Gi"}},"volumeMounts":[{"name":"kube-api-access-kcbh4","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Never","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"default","serviceAccount":"default","nodeName":"cn-hangzhou.10.1.160.149","securityContext":{},"imagePullSecrets":[{"name":"acr-credential-0cd66774c2e1635329078c8ad94a7d92"},{"name":"acr-credential-90a511cb8249950d96ce0336cae093f0"},{"name":"acr-credential-518dfd1883737c2a6bde99ed6fee583c"},{"name":"acr-credential-91029a2c549212d737cbd7e40e1a6ebb"},{"name":"acr-credential-bbec27b1dbdc90bb0f27dbd225b24e17"}],"schedulerName":"default-scheduler","tolerations":[{"operator":"Exists","effect":"NoSchedule"},{"key":"node.kubernetes.io/not-ready","operator":"Exists","effect":"NoExecute","tolerationSeconds":300},{"key":"node.kubernetes.io/unreachable","operator":"Exists","effect":"NoExecute","tolerationSeconds":300}],"priority":0,"enableServiceLinks":true,"preemptionPolicy":"PreemptLowerPriority"},"status":{"phase":"Running","conditions":[{"type":"Initialized","status":"True","lastProbeTime":null,"lastTransitionTime":"2024-03-15T03:45:52Z"},{"type":"Ready","status":"True","lastProbeTime":null,"lastTransitionTime":"2024-03-15T03:46:43Z"},{"type":"ContainersReady","status":"True","lastProbeTime":null,"lastTransitionTime":"2024-03-15T03:46:43Z"},{"type":"PodScheduled","status":"True","lastProbeTime":null,"lastTransitionTime":"2024-03-15T03:45:53Z"}],"hostIP":"10.1.160.149","podIP":"172.20.87.130","podIPs":[{"ip":"172.20.87.130"}],"startTime":"2024-03-15T03:45:52Z","containerStatuses":[{"name":"mo-br","state":{"running":{"startedAt":"2024-03-15T03:46:42Z"}},"lastState":{},"ready":true,"restartCount":0,"image":"registry.cn-hangzhou.aliyuncs.com/mocloud/mo-backup:4fa21f1","imageID":"registry.cn-hangzhou.aliyuncs.com/mocloud/mo-backup@sha256:96b3680fe7739eb276013fba516d95a7f11f8cde92170a09d835b9f73d6f7e7b","containerID":"containerd://5e28da92e75da0968262af37e7c688c097e78a2312947729f62dfb222b66b132","started":true}],"qosClass":"Guaranteed"}}

DEBUG    src.tests.upgrade.test_mo_upgrade:test_mo_upgrade.py:219 wait for the conditions by '<lambda>' with args: ('restore-restore-freetier-02', 'moc-upgrade-test'), {}
DEBUG    kubernetes.client.rest:rest.py:235 response body: {"kind":"Pod","apiVersion":"v1","metadata":{"name":"restore-restore-freetier-02","namespace":"moc-upgrade-test","uid":"e16f2157-ce81-46db-a035-d4ceba7cfb90","resourceVersion":"96213815","creationTimestamp":"2024-03-15T03:44:29Z","managedFields":[{"manager":"OpenAPI-Generator","operation":"Update","apiVersion":"v1","time":"2024-03-15T03:44:29Z","fieldsType":"FieldsV1","fieldsV1":{"f:spec":{"f:containers":{"k:{\"name\":\"mo-br\"}":{".":{},"f:args":{},"f:command":{},"f:env":{".":{},"k:{\"name\":\"AWS_ACCESS_KEY_ID\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"AWS_SECRET_ACCESS_KEY\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}}},"f:image":{},"f:imagePullPolicy":{},"f:name":{},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{}}},"f:dnsPolicy":{},"f:enableServiceLinks":{},"f:imagePullSecrets":{".":{},"k:{\"name\":\"acr-credential-0cd66774c2e1635329078c8ad94a7d92\"}":{},"k:{\"name\":\"acr-credential-518dfd1883737c2a6bde99ed6fee583c\"}":{},"k:{\"name\":\"acr-credential-90a511cb8249950d96ce0336cae093f0\"}":{},"k:{\"name\":\"acr-credential-91029a2c549212d737cbd7e40e1a6ebb\"}":{},"k:{\"name\":\"acr-credential-bbec27b1dbdc90bb0f27dbd225b24e17\"}":{}},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{},"f:terminationGracePeriodSeconds":{},"f:tolerations":{}}}},{"manager":"kube-scheduler","operation":"Update","apiVersion":"v1","time":"2024-03-15T03:44:29Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:conditions":{".":{},"k:{\"type\":\"PodScheduled\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:message":{},"f:reason":{},"f:status":{},"f:type":{}}}}},"subresource":"status"},{"manager":"kubelet","operation":"Update","apiVersion":"v1","time":"2024-03-15T03:46:43Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:conditions":{"k:{\"type\":\"ContainersReady\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Initialized\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Ready\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}}},"f:containerStatuses":{},"f:hostIP":{},"f:phase":{},"f:podIP":{},"f:podIPs":{".":{},"k:{\"ip\":\"172.20.87.130\"}":{".":{},"f:ip":{}}},"f:startTime":{}}},"subresource":"status"}]},"spec":{"volumes":[{"name":"kube-api-access-kcbh4","projected":{"sources":[{"serviceAccountToken":{"expirationSeconds":3607,"path":"token"}},{"configMap":{"name":"kube-root-ca.crt","items":[{"key":"ca.crt","path":"ca.crt"}]}},{"downwardAPI":{"items":[{"path":"namespace","fieldRef":{"apiVersion":"v1","fieldPath":"metadata.namespace"}}]}}],"defaultMode":420}}],"containers":[{"name":"mo-br","image":"registry.cn-hangzhou.aliyuncs.com/mocloud/mo-backup:4fa21f1","command":["/mo_br","restore"],"args":["--backup_dir","s3","--backup_endpoint","http://oss-cn-hangzhou-internal.aliyuncs.com","--backup_bucket","moc-backup-test","--backup_filepath","backup-freetier-02-20240315021618","--backup_region","cn-hangzhou","--backup_access_key_id","$(AWS_ACCESS_KEY_ID)","--backup_secret_access_key","$(AWS_SECRET_ACCESS_KEY)","--restore_dir","s3","--restore_endpoint","http://oss-cn-hangzhou-internal.aliyuncs.com","--restore_access_key_id","$(AWS_ACCESS_KEY_ID)","--restore_secret_access_key","$(AWS_SECRET_ACCESS_KEY)","--restore_bucket","moc-backup-test","--restore_filepath","restore-freetier-02-20240315021618","--restore_region","cn-hangzhou","--log_level","debug"],"env":[{"name":"AWS_ACCESS_KEY_ID","valueFrom":{"secretKeyRef":{"name":"aliyun-moc-backup-test","key":"AWS_ACCESS_KEY_ID"}}},{"name":"AWS_SECRET_ACCESS_KEY","valueFrom":{"secretKeyRef":{"name":"aliyun-moc-backup-test","key":"AWS_SECRET_ACCESS_KEY"}}}],"resources":{"limits":{"cpu":"7","memory":"13Gi"},"requests":{"cpu":"7","memory":"13Gi"}},"volumeMounts":[{"name":"kube-api-access-kcbh4","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Never","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"default","serviceAccount":"default","nodeName":"cn-hangzhou.10.1.160.149","securityContext":{},"imagePullSecrets":[{"name":"acr-credential-0cd66774c2e1635329078c8ad94a7d92"},{"name":"acr-credential-90a511cb8249950d96ce0336cae093f0"},{"name":"acr-credential-518dfd1883737c2a6bde99ed6fee583c"},{"name":"acr-credential-91029a2c549212d737cbd7e40e1a6ebb"},{"name":"acr-credential-bbec27b1dbdc90bb0f27dbd225b24e17"}],"schedulerName":"default-scheduler","tolerations":[{"operator":"Exists","effect":"NoSchedule"},{"key":"node.kubernetes.io/not-ready","operator":"Exists","effect":"NoExecute","tolerationSeconds":300},{"key":"node.kubernetes.io/unreachable","operator":"Exists","effect":"NoExecute","tolerationSeconds":300}],"priority":0,"enableServiceLinks":true,"preemptionPolicy":"PreemptLowerPriority"},"status":{"phase":"Running","conditions":[{"type":"Initialized","status":"True","lastProbeTime":null,"lastTransitionTime":"2024-03-15T03:45:52Z"},{"type":"Ready","status":"True","lastProbeTime":null,"lastTransitionTime":"2024-03-15T03:46:43Z"},{"type":"ContainersReady","status":"True","lastProbeTime":null,"lastTransitionTime":"2024-03-15T03:46:43Z"},{"type":"PodScheduled","status":"True","lastProbeTime":null,"lastTransitionTime":"2024-03-15T03:45:53Z"}],"hostIP":"10.1.160.149","podIP":"172.20.87.130","podIPs":[{"ip":"172.20.87.130"}],"startTime":"2024-03-15T03:45:52Z","containerStatuses":[{"name":"mo-br","state":{"running":{"startedAt":"2024-03-15T03:46:42Z"}},"lastState":{},"ready":true,"restartCount":0,"image":"registry.cn-hangzhou.aliyuncs.com/mocloud/mo-backup:4fa21f1","imageID":"registry.cn-hangzhou.aliyuncs.com/mocloud/mo-backup@sha256:96b3680fe7739eb276013fba516d95a7f11f8cde92170a09d835b9f73d6f7e7b","containerID":"containerd://5e28da92e75da0968262af37e7c688c097e78a2312947729f62dfb222b66b132","started":true}],"qosClass":"Guaranteed"}}

DEBUG    src.tests.upgrade.test_mo_upgrade:test_mo_upgrade.py:219 wait for the conditions by '<lambda>' with args: ('restore-restore-freetier-02', 'moc-upgrade-test'), {}
DEBUG    kubernetes.client.rest:rest.py:235 response body: {"kind":"Pod","apiVersion":"v1","metadata":{"name":"restore-restore-freetier-02","namespace":"moc-upgrade-test","uid":"e16f2157-ce81-46db-a035-d4ceba7cfb90","resourceVersion":"96213815","creationTimestamp":"2024-03-15T03:44:29Z","managedFields":[{"manager":"OpenAPI-Generator","operation":"Update","apiVersion":"v1","time":"2024-03-15T03:44:29Z","fieldsType":"FieldsV1","fieldsV1":{"f:spec":{"f:containers":{"k:{\"name\":\"mo-br\"}":{".":{},"f:args":{},"f:command":{},"f:env":{".":{},"k:{\"name\":\"AWS_ACCESS_KEY_ID\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"AWS_SECRET_ACCESS_KEY\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}}},"f:image":{},"f:imagePullPolicy":{},"f:name":{},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{}}},"f:dnsPolicy":{},"f:enableServiceLinks":{},"f:imagePullSecrets":{".":{},"k:{\"name\":\"acr-credential-0cd66774c2e1635329078c8ad94a7d92\"}":{},"k:{\"name\":\"acr-credential-518dfd1883737c2a6bde99ed6fee583c\"}":{},"k:{\"name\":\"acr-credential-90a511cb8249950d96ce0336cae093f0\"}":{},"k:{\"name\":\"acr-credential-91029a2c549212d737cbd7e40e1a6ebb\"}":{},"k:{\"name\":\"acr-credential-bbec27b1dbdc90bb0f27dbd225b24e17\"}":{}},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{},"f:terminationGracePeriodSeconds":{},"f:tolerations":{}}}},{"manager":"kube-scheduler","operation":"Update","apiVersion":"v1","time":"2024-03-15T03:44:29Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:conditions":{".":{},"k:{\"type\":\"PodScheduled\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:message":{},"f:reason":{},"f:status":{},"f:type":{}}}}},"subresource":"status"},{"manager":"kubelet","operation":"Update","apiVersion":"v1","time":"2024-03-15T03:46:43Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:conditions":{"k:{\"type\":\"ContainersReady\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Initialized\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Ready\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}}},"f:containerStatuses":{},"f:hostIP":{},"f:phase":{},"f:podIP":{},"f:podIPs":{".":{},"k:{\"ip\":\"172.20.87.130\"}":{".":{},"f:ip":{}}},"f:startTime":{}}},"subresource":"status"}]},"spec":{"volumes":[{"name":"kube-api-access-kcbh4","projected":{"sources":[{"serviceAccountToken":{"expirationSeconds":3607,"path":"token"}},{"configMap":{"name":"kube-root-ca.crt","items":[{"key":"ca.crt","path":"ca.crt"}]}},{"downwardAPI":{"items":[{"path":"namespace","fieldRef":{"apiVersion":"v1","fieldPath":"metadata.namespace"}}]}}],"defaultMode":420}}],"containers":[{"name":"mo-br","image":"registry.cn-hangzhou.aliyuncs.com/mocloud/mo-backup:4fa21f1","command":["/mo_br","restore"],"args":["--backup_dir","s3","--backup_endpoint","http://oss-cn-hangzhou-internal.aliyuncs.com","--backup_bucket","moc-backup-test","--backup_filepath","backup-freetier-02-20240315021618","--backup_region","cn-hangzhou","--backup_access_key_id","$(AWS_ACCESS_KEY_ID)","--backup_secret_access_key","$(AWS_SECRET_ACCESS_KEY)","--restore_dir","s3","--restore_endpoint","http://oss-cn-hangzhou-internal.aliyuncs.com","--restore_access_key_id","$(AWS_ACCESS_KEY_ID)","--restore_secret_access_key","$(AWS_SECRET_ACCESS_KEY)","--restore_bucket","moc-backup-test","--restore_filepath","restore-freetier-02-20240315021618","--restore_region","cn-hangzhou","--log_level","debug"],"env":[{"name":"AWS_ACCESS_KEY_ID","valueFrom":{"secretKeyRef":{"name":"aliyun-moc-backup-test","key":"AWS_ACCESS_KEY_ID"}}},{"name":"AWS_SECRET_ACCESS_KEY","valueFrom":{"secretKeyRef":{"name":"aliyun-moc-backup-test","key":"AWS_SECRET_ACCESS_KEY"}}}],"resources":{"limits":{"cpu":"7","memory":"13Gi"},"requests":{"cpu":"7","memory":"13Gi"}},"volumeMounts":[{"name":"kube-api-access-kcbh4","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Never","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"default","serviceAccount":"default","nodeName":"cn-hangzhou.10.1.160.149","securityContext":{},"imagePullSecrets":[{"name":"acr-credential-0cd66774c2e1635329078c8ad94a7d92"},{"name":"acr-credential-90a511cb8249950d96ce0336cae093f0"},{"name":"acr-credential-518dfd1883737c2a6bde99ed6fee583c"},{"name":"acr-credential-91029a2c549212d737cbd7e40e1a6ebb"},{"name":"acr-credential-bbec27b1dbdc90bb0f27dbd225b24e17"}],"schedulerName":"default-scheduler","tolerations":[{"operator":"Exists","effect":"NoSchedule"},{"key":"node.kubernetes.io/not-ready","operator":"Exists","effect":"NoExecute","tolerationSeconds":300},{"key":"node.kubernetes.io/unreachable","operator":"Exists","effect":"NoExecute","tolerationSeconds":300}],"priority":0,"enableServiceLinks":true,"preemptionPolicy":"PreemptLowerPriority"},"status":{"phase":"Running","conditions":[{"type":"Initialized","status":"True","lastProbeTime":null,"lastTransitionTime":"2024-03-15T03:45:52Z"},{"type":"Ready","status":"True","lastProbeTime":null,"lastTransitionTime":"2024-03-15T03:46:43Z"},{"type":"ContainersReady","status":"True","lastProbeTime":null,"lastTransitionTime":"2024-03-15T03:46:43Z"},{"type":"PodScheduled","status":"True","lastProbeTime":null,"lastTransitionTime":"2024-03-15T03:45:53Z"}],"hostIP":"10.1.160.149","podIP":"172.20.87.130","podIPs":[{"ip":"172.20.87.130"}],"startTime":"2024-03-15T03:45:52Z","containerStatuses":[{"name":"mo-br","state":{"running":{"startedAt":"2024-03-15T03:46:42Z"}},"lastState":{},"ready":true,"restartCount":0,"image":"registry.cn-hangzhou.aliyuncs.com/mocloud/mo-backup:4fa21f1","imageID":"registry.cn-hangzhou.aliyuncs.com/mocloud/mo-backup@sha256:96b3680fe7739eb276013fba516d95a7f11f8cde92170a09d835b9f73d6f7e7b","containerID":"containerd://5e28da92e75da0968262af37e7c688c097e78a2312947729f62dfb222b66b132","started":true}],"qosClass":"Guaranteed"}}

DEBUG    src.tests.upgrade.test_mo_upgrade:test_mo_upgrade.py:219 wait for the conditions by '<lambda>' with args: ('restore-restore-freetier-02', 'moc-upgrade-test'), {}
DEBUG    kubernetes.client.rest:rest.py:235 response body: {"kind":"Pod","apiVersion":"v1","metadata":{"name":"restore-restore-freetier-02","namespace":"moc-upgrade-test","uid":"e16f2157-ce81-46db-a035-d4ceba7cfb90","resourceVersion":"96213815","creationTimestamp":"2024-03-15T03:44:29Z","managedFields":[{"manager":"OpenAPI-Generator","operation":"Update","apiVersion":"v1","time":"2024-03-15T03:44:29Z","fieldsType":"FieldsV1","fieldsV1":{"f:spec":{"f:containers":{"k:{\"name\":\"mo-br\"}":{".":{},"f:args":{},"f:command":{},"f:env":{".":{},"k:{\"name\":\"AWS_ACCESS_KEY_ID\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"AWS_SECRET_ACCESS_KEY\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}}},"f:image":{},"f:imagePullPolicy":{},"f:name":{},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{}}},"f:dnsPolicy":{},"f:enableServiceLinks":{},"f:imagePullSecrets":{".":{},"k:{\"name\":\"acr-credential-0cd66774c2e1635329078c8ad94a7d92\"}":{},"k:{\"name\":\"acr-credential-518dfd1883737c2a6bde99ed6fee583c\"}":{},"k:{\"name\":\"acr-credential-90a511cb8249950d96ce0336cae093f0\"}":{},"k:{\"name\":\"acr-credential-91029a2c549212d737cbd7e40e1a6ebb\"}":{},"k:{\"name\":\"acr-credential-bbec27b1dbdc90bb0f27dbd225b24e17\"}":{}},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{},"f:terminationGracePeriodSeconds":{},"f:tolerations":{}}}},{"manager":"kube-scheduler","operation":"Update","apiVersion":"v1","time":"2024-03-15T03:44:29Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:conditions":{".":{},"k:{\"type\":\"PodScheduled\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:message":{},"f:reason":{},"f:status":{},"f:type":{}}}}},"subresource":"status"},{"manager":"kubelet","operation":"Update","apiVersion":"v1","time":"2024-03-15T03:46:43Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:conditions":{"k:{\"type\":\"ContainersReady\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Initialized\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Ready\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}}},"f:containerStatuses":{},"f:hostIP":{},"f:phase":{},"f:podIP":{},"f:podIPs":{".":{},"k:{\"ip\":\"172.20.87.130\"}":{".":{},"f:ip":{}}},"f:startTime":{}}},"subresource":"status"}]},"spec":{"volumes":[{"name":"kube-api-access-kcbh4","projected":{"sources":[{"serviceAccountToken":{"expirationSeconds":3607,"path":"token"}},{"configMap":{"name":"kube-root-ca.crt","items":[{"key":"ca.crt","path":"ca.crt"}]}},{"downwardAPI":{"items":[{"path":"namespace","fieldRef":{"apiVersion":"v1","fieldPath":"metadata.namespace"}}]}}],"defaultMode":420}}],"containers":[{"name":"mo-br","image":"registry.cn-hangzhou.aliyuncs.com/mocloud/mo-backup:4fa21f1","command":["/mo_br","restore"],"args":["--backup_dir","s3","--backup_endpoint","http://oss-cn-hangzhou-internal.aliyuncs.com","--backup_bucket","moc-backup-test","--backup_filepath","backup-freetier-02-20240315021618","--backup_region","cn-hangzhou","--backup_access_key_id","$(AWS_ACCESS_KEY_ID)","--backup_secret_access_key","$(AWS_SECRET_ACCESS_KEY)","--restore_dir","s3","--restore_endpoint","http://oss-cn-hangzhou-internal.aliyuncs.com","--restore_access_key_id","$(AWS_ACCESS_KEY_ID)","--restore_secret_access_key","$(AWS_SECRET_ACCESS_KEY)","--restore_bucket","moc-backup-test","--restore_filepath","restore-freetier-02-20240315021618","--restore_region","cn-hangzhou","--log_level","debug"],"env":[{"name":"AWS_ACCESS_KEY_ID","valueFrom":{"secretKeyRef":{"name":"aliyun-moc-backup-test","key":"AWS_ACCESS_KEY_ID"}}},{"name":"AWS_SECRET_ACCESS_KEY","valueFrom":{"secretKeyRef":{"name":"aliyun-moc-backup-test","key":"AWS_SECRET_ACCESS_KEY"}}}],"resources":{"limits":{"cpu":"7","memory":"13Gi"},"requests":{"cpu":"7","memory":"13Gi"}},"volumeMounts":[{"name":"kube-api-access-kcbh4","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Never","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"default","serviceAccount":"default","nodeName":"cn-hangzhou.10.1.160.149","securityContext":{},"imagePullSecrets":[{"name":"acr-credential-0cd66774c2e1635329078c8ad94a7d92"},{"name":"acr-credential-90a511cb8249950d96ce0336cae093f0"},{"name":"acr-credential-518dfd1883737c2a6bde99ed6fee583c"},{"name":"acr-credential-91029a2c549212d737cbd7e40e1a6ebb"},{"name":"acr-credential-bbec27b1dbdc90bb0f27dbd225b24e17"}],"schedulerName":"default-scheduler","tolerations":[{"operator":"Exists","effect":"NoSchedule"},{"key":"node.kubernetes.io/not-ready","operator":"Exists","effect":"NoExecute","tolerationSeconds":300},{"key":"node.kubernetes.io/unreachable","operator":"Exists","effect":"NoExecute","tolerationSeconds":300}],"priority":0,"enableServiceLinks":true,"preemptionPolicy":"PreemptLowerPriority"},"status":{"phase":"Running","conditions":[{"type":"Initialized","status":"True","lastProbeTime":null,"lastTransitionTime":"2024-03-15T03:45:52Z"},{"type":"Ready","status":"True","lastProbeTime":null,"lastTransitionTime":"2024-03-15T03:46:43Z"},{"type":"ContainersReady","status":"True","lastProbeTime":null,"lastTransitionTime":"2024-03-15T03:46:43Z"},{"type":"PodScheduled","status":"True","lastProbeTime":null,"lastTransitionTime":"2024-03-15T03:45:53Z"}],"hostIP":"10.1.160.149","podIP":"172.20.87.130","podIPs":[{"ip":"172.20.87.130"}],"startTime":"2024-03-15T03:45:52Z","containerStatuses":[{"name":"mo-br","state":{"running":{"startedAt":"2024-03-15T03:46:42Z"}},"lastState":{},"ready":true,"restartCount":0,"image":"registry.cn-hangzhou.aliyuncs.com/mocloud/mo-backup:4fa21f1","imageID":"registry.cn-hangzhou.aliyuncs.com/mocloud/mo-backup@sha256:96b3680fe7739eb276013fba516d95a7f11f8cde92170a09d835b9f73d6f7e7b","containerID":"containerd://5e28da92e75da0968262af37e7c688c097e78a2312947729f62dfb222b66b132","started":true}],"qosClass":"Guaranteed"}}

DEBUG    src.tests.upgrade.test_mo_upgrade:test_mo_upgrade.py:219 wait for the conditions by '<lambda>' with args: ('restore-restore-freetier-02', 'moc-upgrade-test'), {}
DEBUG    kubernetes.client.rest:rest.py:235 response body: {"kind":"Pod","apiVersion":"v1","metadata":{"name":"restore-restore-freetier-02","namespace":"moc-upgrade-test","uid":"e16f2157-ce81-46db-a035-d4ceba7cfb90","resourceVersion":"96213815","creationTimestamp":"2024-03-15T03:44:29Z","managedFields":[{"manager":"OpenAPI-Generator","operation":"Update","apiVersion":"v1","time":"2024-03-15T03:44:29Z","fieldsType":"FieldsV1","fieldsV1":{"f:spec":{"f:containers":{"k:{\"name\":\"mo-br\"}":{".":{},"f:args":{},"f:command":{},"f:env":{".":{},"k:{\"name\":\"AWS_ACCESS_KEY_ID\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"AWS_SECRET_ACCESS_KEY\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}}},"f:image":{},"f:imagePullPolicy":{},"f:name":{},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{}}},"f:dnsPolicy":{},"f:enableServiceLinks":{},"f:imagePullSecrets":{".":{},"k:{\"name\":\"acr-credential-0cd66774c2e1635329078c8ad94a7d92\"}":{},"k:{\"name\":\"acr-credential-518dfd1883737c2a6bde99ed6fee583c\"}":{},"k:{\"name\":\"acr-credential-90a511cb8249950d96ce0336cae093f0\"}":{},"k:{\"name\":\"acr-credential-91029a2c549212d737cbd7e40e1a6ebb\"}":{},"k:{\"name\":\"acr-credential-bbec27b1dbdc90bb0f27dbd225b24e17\"}":{}},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{},"f:terminationGracePeriodSeconds":{},"f:tolerations":{}}}},{"manager":"kube-scheduler","operation":"Update","apiVersion":"v1","time":"2024-03-15T03:44:29Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:conditions":{".":{},"k:{\"type\":\"PodScheduled\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:message":{},"f:reason":{},"f:status":{},"f:type":{}}}}},"subresource":"status"},{"manager":"kubelet","operation":"Update","apiVersion":"v1","time":"2024-03-15T03:46:43Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:conditions":{"k:{\"type\":\"ContainersReady\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Initialized\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Ready\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}}},"f:containerStatuses":{},"f:hostIP":{},"f:phase":{},"f:podIP":{},"f:podIPs":{".":{},"k:{\"ip\":\"172.20.87.130\"}":{".":{},"f:ip":{}}},"f:startTime":{}}},"subresource":"status"}]},"spec":{"volumes":[{"name":"kube-api-access-kcbh4","projected":{"sources":[{"serviceAccountToken":{"expirationSeconds":3607,"path":"token"}},{"configMap":{"name":"kube-root-ca.crt","items":[{"key":"ca.crt","path":"ca.crt"}]}},{"downwardAPI":{"items":[{"path":"namespace","fieldRef":{"apiVersion":"v1","fieldPath":"metadata.namespace"}}]}}],"defaultMode":420}}],"containers":[{"name":"mo-br","image":"registry.cn-hangzhou.aliyuncs.com/mocloud/mo-backup:4fa21f1","command":["/mo_br","restore"],"args":["--backup_dir","s3","--backup_endpoint","http://oss-cn-hangzhou-internal.aliyuncs.com","--backup_bucket","moc-backup-test","--backup_filepath","backup-freetier-02-20240315021618","--backup_region","cn-hangzhou","--backup_access_key_id","$(AWS_ACCESS_KEY_ID)","--backup_secret_access_key","$(AWS_SECRET_ACCESS_KEY)","--restore_dir","s3","--restore_endpoint","http://oss-cn-hangzhou-internal.aliyuncs.com","--restore_access_key_id","$(AWS_ACCESS_KEY_ID)","--restore_secret_access_key","$(AWS_SECRET_ACCESS_KEY)","--restore_bucket","moc-backup-test","--restore_filepath","restore-freetier-02-20240315021618","--restore_region","cn-hangzhou","--log_level","debug"],"env":[{"name":"AWS_ACCESS_KEY_ID","valueFrom":{"secretKeyRef":{"name":"aliyun-moc-backup-test","key":"AWS_ACCESS_KEY_ID"}}},{"name":"AWS_SECRET_ACCESS_KEY","valueFrom":{"secretKeyRef":{"name":"aliyun-moc-backup-test","key":"AWS_SECRET_ACCESS_KEY"}}}],"resources":{"limits":{"cpu":"7","memory":"13Gi"},"requests":{"cpu":"7","memory":"13Gi"}},"volumeMounts":[{"name":"kube-api-access-kcbh4","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Never","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"default","serviceAccount":"default","nodeName":"cn-hangzhou.10.1.160.149","securityContext":{},"imagePullSecrets":[{"name":"acr-credential-0cd66774c2e1635329078c8ad94a7d92"},{"name":"acr-credential-90a511cb8249950d96ce0336cae093f0"},{"name":"acr-credential-518dfd1883737c2a6bde99ed6fee583c"},{"name":"acr-credential-91029a2c549212d737cbd7e40e1a6ebb"},{"name":"acr-credential-bbec27b1dbdc90bb0f27dbd225b24e17"}],"schedulerName":"default-scheduler","tolerations":[{"operator":"Exists","effect":"NoSchedule"},{"key":"node.kubernetes.io/not-ready","operator":"Exists","effect":"NoExecute","tolerationSeconds":300},{"key":"node.kubernetes.io/unreachable","operator":"Exists","effect":"NoExecute","tolerationSeconds":300}],"priority":0,"enableServiceLinks":true,"preemptionPolicy":"PreemptLowerPriority"},"status":{"phase":"Running","conditions":[{"type":"Initialized","status":"True","lastProbeTime":null,"lastTransitionTime":"2024-03-15T03:45:52Z"},{"type":"Ready","status":"True","lastProbeTime":null,"lastTransitionTime":"2024-03-15T03:46:43Z"},{"type":"ContainersReady","status":"True","lastProbeTime":null,"lastTransitionTime":"2024-03-15T03:46:43Z"},{"type":"PodScheduled","status":"True","lastProbeTime":null,"lastTransitionTime":"2024-03-15T03:45:53Z"}],"hostIP":"10.1.160.149","podIP":"172.20.87.130","podIPs":[{"ip":"172.20.87.130"}],"startTime":"2024-03-15T03:45:52Z","containerStatuses":[{"name":"mo-br","state":{"running":{"startedAt":"2024-03-15T03:46:42Z"}},"lastState":{},"ready":true,"restartCount":0,"image":"registry.cn-hangzhou.aliyuncs.com/mocloud/mo-backup:4fa21f1","imageID":"registry.cn-hangzhou.aliyuncs.com/mocloud/mo-backup@sha256:96b3680fe7739eb276013fba516d95a7f11f8cde92170a09d835b9f73d6f7e7b","containerID":"containerd://5e28da92e75da0968262af37e7c688c097e78a2312947729f62dfb222b66b132","started":true}],"qosClass":"Guaranteed"}}

DEBUG    src.tests.upgrade.test_mo_upgrade:test_mo_upgrade.py:219 wait for the conditions by '<lambda>' with args: ('restore-restore-freetier-02', 'moc-upgrade-test'), {}
DEBUG    kubernetes.client.rest:rest.py:235 response body: {"kind":"Pod","apiVersion":"v1","metadata":{"name":"restore-restore-freetier-02","namespace":"moc-upgrade-test","uid":"e16f2157-ce81-46db-a035-d4ceba7cfb90","resourceVersion":"96213815","creationTimestamp":"2024-03-15T03:44:29Z","managedFields":[{"manager":"OpenAPI-Generator","operation":"Update","apiVersion":"v1","time":"2024-03-15T03:44:29Z","fieldsType":"FieldsV1","fieldsV1":{"f:spec":{"f:containers":{"k:{\"name\":\"mo-br\"}":{".":{},"f:args":{},"f:command":{},"f:env":{".":{},"k:{\"name\":\"AWS_ACCESS_KEY_ID\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"AWS_SECRET_ACCESS_KEY\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}}},"f:image":{},"f:imagePullPolicy":{},"f:name":{},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{}}},"f:dnsPolicy":{},"f:enableServiceLinks":{},"f:imagePullSecrets":{".":{},"k:{\"name\":\"acr-credential-0cd66774c2e1635329078c8ad94a7d92\"}":{},"k:{\"name\":\"acr-credential-518dfd1883737c2a6bde99ed6fee583c\"}":{},"k:{\"name\":\"acr-credential-90a511cb8249950d96ce0336cae093f0\"}":{},"k:{\"name\":\"acr-credential-91029a2c549212d737cbd7e40e1a6ebb\"}":{},"k:{\"name\":\"acr-credential-bbec27b1dbdc90bb0f27dbd225b24e17\"}":{}},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{},"f:terminationGracePeriodSeconds":{},"f:tolerations":{}}}},{"manager":"kube-scheduler","operation":"Update","apiVersion":"v1","time":"2024-03-15T03:44:29Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:conditions":{".":{},"k:{\"type\":\"PodScheduled\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:message":{},"f:reason":{},"f:status":{},"f:type":{}}}}},"subresource":"status"},{"manager":"kubelet","operation":"Update","apiVersion":"v1","time":"2024-03-15T03:46:43Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:conditions":{"k:{\"type\":\"ContainersReady\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Initialized\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Ready\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}}},"f:containerStatuses":{},"f:hostIP":{},"f:phase":{},"f:podIP":{},"f:podIPs":{".":{},"k:{\"ip\":\"172.20.87.130\"}":{".":{},"f:ip":{}}},"f:startTime":{}}},"subresource":"status"}]},"spec":{"volumes":[{"name":"kube-api-access-kcbh4","projected":{"sources":[{"serviceAccountToken":{"expirationSeconds":3607,"path":"token"}},{"configMap":{"name":"kube-root-ca.crt","items":[{"key":"ca.crt","path":"ca.crt"}]}},{"downwardAPI":{"items":[{"path":"namespace","fieldRef":{"apiVersion":"v1","fieldPath":"metadata.namespace"}}]}}],"defaultMode":420}}],"containers":[{"name":"mo-br","image":"registry.cn-hangzhou.aliyuncs.com/mocloud/mo-backup:4fa21f1","command":["/mo_br","restore"],"args":["--backup_dir","s3","--backup_endpoint","http://oss-cn-hangzhou-internal.aliyuncs.com","--backup_bucket","moc-backup-test","--backup_filepath","backup-freetier-02-20240315021618","--backup_region","cn-hangzhou","--backup_access_key_id","$(AWS_ACCESS_KEY_ID)","--backup_secret_access_key","$(AWS_SECRET_ACCESS_KEY)","--restore_dir","s3","--restore_endpoint","http://oss-cn-hangzhou-internal.aliyuncs.com","--restore_access_key_id","$(AWS_ACCESS_KEY_ID)","--restore_secret_access_key","$(AWS_SECRET_ACCESS_KEY)","--restore_bucket","moc-backup-test","--restore_filepath","restore-freetier-02-20240315021618","--restore_region","cn-hangzhou","--log_level","debug"],"env":[{"name":"AWS_ACCESS_KEY_ID","valueFrom":{"secretKeyRef":{"name":"aliyun-moc-backup-test","key":"AWS_ACCESS_KEY_ID"}}},{"name":"AWS_SECRET_ACCESS_KEY","valueFrom":{"secretKeyRef":{"name":"aliyun-moc-backup-test","key":"AWS_SECRET_ACCESS_KEY"}}}],"resources":{"limits":{"cpu":"7","memory":"13Gi"},"requests":{"cpu":"7","memory":"13Gi"}},"volumeMounts":[{"name":"kube-api-access-kcbh4","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Never","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"default","serviceAccount":"default","nodeName":"cn-hangzhou.10.1.160.149","securityContext":{},"imagePullSecrets":[{"name":"acr-credential-0cd66774c2e1635329078c8ad94a7d92"},{"name":"acr-credential-90a511cb8249950d96ce0336cae093f0"},{"name":"acr-credential-518dfd1883737c2a6bde99ed6fee583c"},{"name":"acr-credential-91029a2c549212d737cbd7e40e1a6ebb"},{"name":"acr-credential-bbec27b1dbdc90bb0f27dbd225b24e17"}],"schedulerName":"default-scheduler","tolerations":[{"operator":"Exists","effect":"NoSchedule"},{"key":"node.kubernetes.io/not-ready","operator":"Exists","effect":"NoExecute","tolerationSeconds":300},{"key":"node.kubernetes.io/unreachable","operator":"Exists","effect":"NoExecute","tolerationSeconds":300}],"priority":0,"enableServiceLinks":true,"preemptionPolicy":"PreemptLowerPriority"},"status":{"phase":"Running","conditions":[{"type":"Initialized","status":"True","lastProbeTime":null,"lastTransitionTime":"2024-03-15T03:45:52Z"},{"type":"Ready","status":"True","lastProbeTime":null,"lastTransitionTime":"2024-03-15T03:46:43Z"},{"type":"ContainersReady","status":"True","lastProbeTime":null,"lastTransitionTime":"2024-03-15T03:46:43Z"},{"type":"PodScheduled","status":"True","lastProbeTime":null,"lastTransitionTime":"2024-03-15T03:45:53Z"}],"hostIP":"10.1.160.149","podIP":"172.20.87.130","podIPs":[{"ip":"172.20.87.130"}],"startTime":"2024-03-15T03:45:52Z","containerStatuses":[{"name":"mo-br","state":{"running":{"startedAt":"2024-03-15T03:46:42Z"}},"lastState":{},"ready":true,"restartCount":0,"image":"registry.cn-hangzhou.aliyuncs.com/mocloud/mo-backup:4fa21f1","imageID":"registry.cn-hangzhou.aliyuncs.com/mocloud/mo-backup@sha256:96b3680fe7739eb276013fba516d95a7f11f8cde92170a09d835b9f73d6f7e7b","containerID":"containerd://5e28da92e75da0968262af37e7c688c097e78a2312947729f62dfb222b66b132","started":true}],"qosClass":"Guaranteed"}}

DEBUG    src.tests.upgrade.test_mo_upgrade:test_mo_upgrade.py:219 wait for the conditions by '<lambda>' with args: ('restore-restore-freetier-02', 'moc-upgrade-test'), {}
DEBUG    kubernetes.client.rest:rest.py:235 response body: {"kind":"Pod","apiVersion":"v1","metadata":{"name":"restore-restore-freetier-02","namespace":"moc-upgrade-test","uid":"e16f2157-ce81-46db-a035-d4ceba7cfb90","resourceVersion":"96213815","creationTimestamp":"2024-03-15T03:44:29Z","managedFields":[{"manager":"OpenAPI-Generator","operation":"Update","apiVersion":"v1","time":"2024-03-15T03:44:29Z","fieldsType":"FieldsV1","fieldsV1":{"f:spec":{"f:containers":{"k:{\"name\":\"mo-br\"}":{".":{},"f:args":{},"f:command":{},"f:env":{".":{},"k:{\"name\":\"AWS_ACCESS_KEY_ID\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"AWS_SECRET_ACCESS_KEY\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}}},"f:image":{},"f:imagePullPolicy":{},"f:name":{},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{}}},"f:dnsPolicy":{},"f:enableServiceLinks":{},"f:imagePullSecrets":{".":{},"k:{\"name\":\"acr-credential-0cd66774c2e1635329078c8ad94a7d92\"}":{},"k:{\"name\":\"acr-credential-518dfd1883737c2a6bde99ed6fee583c\"}":{},"k:{\"name\":\"acr-credential-90a511cb8249950d96ce0336cae093f0\"}":{},"k:{\"name\":\"acr-credential-91029a2c549212d737cbd7e40e1a6ebb\"}":{},"k:{\"name\":\"acr-credential-bbec27b1dbdc90bb0f27dbd225b24e17\"}":{}},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{},"f:terminationGracePeriodSeconds":{},"f:tolerations":{}}}},{"manager":"kube-scheduler","operation":"Update","apiVersion":"v1","time":"2024-03-15T03:44:29Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:conditions":{".":{},"k:{\"type\":\"PodScheduled\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:message":{},"f:reason":{},"f:status":{},"f:type":{}}}}},"subresource":"status"},{"manager":"kubelet","operation":"Update","apiVersion":"v1","time":"2024-03-15T03:46:43Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:conditions":{"k:{\"type\":\"ContainersReady\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Initialized\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Ready\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}}},"f:containerStatuses":{},"f:hostIP":{},"f:phase":{},"f:podIP":{},"f:podIPs":{".":{},"k:{\"ip\":\"172.20.87.130\"}":{".":{},"f:ip":{}}},"f:startTime":{}}},"subresource":"status"}]},"spec":{"volumes":[{"name":"kube-api-access-kcbh4","projected":{"sources":[{"serviceAccountToken":{"expirationSeconds":3607,"path":"token"}},{"configMap":{"name":"kube-root-ca.crt","items":[{"key":"ca.crt","path":"ca.crt"}]}},{"downwardAPI":{"items":[{"path":"namespace","fieldRef":{"apiVersion":"v1","fieldPath":"metadata.namespace"}}]}}],"defaultMode":420}}],"containers":[{"name":"mo-br","image":"registry.cn-hangzhou.aliyuncs.com/mocloud/mo-backup:4fa21f1","command":["/mo_br","restore"],"args":["--backup_dir","s3","--backup_endpoint","http://oss-cn-hangzhou-internal.aliyuncs.com","--backup_bucket","moc-backup-test","--backup_filepath","backup-freetier-02-20240315021618","--backup_region","cn-hangzhou","--backup_access_key_id","$(AWS_ACCESS_KEY_ID)","--backup_secret_access_key","$(AWS_SECRET_ACCESS_KEY)","--restore_dir","s3","--restore_endpoint","http://oss-cn-hangzhou-internal.aliyuncs.com","--restore_access_key_id","$(AWS_ACCESS_KEY_ID)","--restore_secret_access_key","$(AWS_SECRET_ACCESS_KEY)","--restore_bucket","moc-backup-test","--restore_filepath","restore-freetier-02-20240315021618","--restore_region","cn-hangzhou","--log_level","debug"],"env":[{"name":"AWS_ACCESS_KEY_ID","valueFrom":{"secretKeyRef":{"name":"aliyun-moc-backup-test","key":"AWS_ACCESS_KEY_ID"}}},{"name":"AWS_SECRET_ACCESS_KEY","valueFrom":{"secretKeyRef":{"name":"aliyun-moc-backup-test","key":"AWS_SECRET_ACCESS_KEY"}}}],"resources":{"limits":{"cpu":"7","memory":"13Gi"},"requests":{"cpu":"7","memory":"13Gi"}},"volumeMounts":[{"name":"kube-api-access-kcbh4","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Never","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"default","serviceAccount":"default","nodeName":"cn-hangzhou.10.1.160.149","securityContext":{},"imagePullSecrets":[{"name":"acr-credential-0cd66774c2e1635329078c8ad94a7d92"},{"name":"acr-credential-90a511cb8249950d96ce0336cae093f0"},{"name":"acr-credential-518dfd1883737c2a6bde99ed6fee583c"},{"name":"acr-credential-91029a2c549212d737cbd7e40e1a6ebb"},{"name":"acr-credential-bbec27b1dbdc90bb0f27dbd225b24e17"}],"schedulerName":"default-scheduler","tolerations":[{"operator":"Exists","effect":"NoSchedule"},{"key":"node.kubernetes.io/not-ready","operator":"Exists","effect":"NoExecute","tolerationSeconds":300},{"key":"node.kubernetes.io/unreachable","operator":"Exists","effect":"NoExecute","tolerationSeconds":300}],"priority":0,"enableServiceLinks":true,"preemptionPolicy":"PreemptLowerPriority"},"status":{"phase":"Running","conditions":[{"type":"Initialized","status":"True","lastProbeTime":null,"lastTransitionTime":"2024-03-15T03:45:52Z"},{"type":"Ready","status":"True","lastProbeTime":null,"lastTransitionTime":"2024-03-15T03:46:43Z"},{"type":"ContainersReady","status":"True","lastProbeTime":null,"lastTransitionTime":"2024-03-15T03:46:43Z"},{"type":"PodScheduled","status":"True","lastProbeTime":null,"lastTransitionTime":"2024-03-15T03:45:53Z"}],"hostIP":"10.1.160.149","podIP":"172.20.87.130","podIPs":[{"ip":"172.20.87.130"}],"startTime":"2024-03-15T03:45:52Z","containerStatuses":[{"name":"mo-br","state":{"running":{"startedAt":"2024-03-15T03:46:42Z"}},"lastState":{},"ready":true,"restartCount":0,"image":"registry.cn-hangzhou.aliyuncs.com/mocloud/mo-backup:4fa21f1","imageID":"registry.cn-hangzhou.aliyuncs.com/mocloud/mo-backup@sha256:96b3680fe7739eb276013fba516d95a7f11f8cde92170a09d835b9f73d6f7e7b","containerID":"containerd://5e28da92e75da0968262af37e7c688c097e78a2312947729f62dfb222b66b132","started":true}],"qosClass":"Guaranteed"}}

DEBUG    src.tests.upgrade.test_mo_upgrade:test_mo_upgrade.py:219 wait for the conditions by '<lambda>' with args: ('restore-restore-freetier-02', 'moc-upgrade-test'), {}
DEBUG    kubernetes.client.rest:rest.py:235 response body: {"kind":"Pod","apiVersion":"v1","metadata":{"name":"restore-restore-freetier-02","namespace":"moc-upgrade-test","uid":"e16f2157-ce81-46db-a035-d4ceba7cfb90","resourceVersion":"96213815","creationTimestamp":"2024-03-15T03:44:29Z","managedFields":[{"manager":"OpenAPI-Generator","operation":"Update","apiVersion":"v1","time":"2024-03-15T03:44:29Z","fieldsType":"FieldsV1","fieldsV1":{"f:spec":{"f:containers":{"k:{\"name\":\"mo-br\"}":{".":{},"f:args":{},"f:command":{},"f:env":{".":{},"k:{\"name\":\"AWS_ACCESS_KEY_ID\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"AWS_SECRET_ACCESS_KEY\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}}},"f:image":{},"f:imagePullPolicy":{},"f:name":{},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{}}},"f:dnsPolicy":{},"f:enableServiceLinks":{},"f:imagePullSecrets":{".":{},"k:{\"name\":\"acr-credential-0cd66774c2e1635329078c8ad94a7d92\"}":{},"k:{\"name\":\"acr-credential-518dfd1883737c2a6bde99ed6fee583c\"}":{},"k:{\"name\":\"acr-credential-90a511cb8249950d96ce0336cae093f0\"}":{},"k:{\"name\":\"acr-credential-91029a2c549212d737cbd7e40e1a6ebb\"}":{},"k:{\"name\":\"acr-credential-bbec27b1dbdc90bb0f27dbd225b24e17\"}":{}},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{},"f:terminationGracePeriodSeconds":{},"f:tolerations":{}}}},{"manager":"kube-scheduler","operation":"Update","apiVersion":"v1","time":"2024-03-15T03:44:29Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:conditions":{".":{},"k:{\"type\":\"PodScheduled\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:message":{},"f:reason":{},"f:status":{},"f:type":{}}}}},"subresource":"status"},{"manager":"kubelet","operation":"Update","apiVersion":"v1","time":"2024-03-15T03:46:43Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:conditions":{"k:{\"type\":\"ContainersReady\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Initialized\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Ready\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}}},"f:containerStatuses":{},"f:hostIP":{},"f:phase":{},"f:podIP":{},"f:podIPs":{".":{},"k:{\"ip\":\"172.20.87.130\"}":{".":{},"f:ip":{}}},"f:startTime":{}}},"subresource":"status"}]},"spec":{"volumes":[{"name":"kube-api-access-kcbh4","projected":{"sources":[{"serviceAccountToken":{"expirationSeconds":3607,"path":"token"}},{"configMap":{"name":"kube-root-ca.crt","items":[{"key":"ca.crt","path":"ca.crt"}]}},{"downwardAPI":{"items":[{"path":"namespace","fieldRef":{"apiVersion":"v1","fieldPath":"metadata.namespace"}}]}}],"defaultMode":420}}],"containers":[{"name":"mo-br","image":"registry.cn-hangzhou.aliyuncs.com/mocloud/mo-backup:4fa21f1","command":["/mo_br","restore"],"args":["--backup_dir","s3","--backup_endpoint","http://oss-cn-hangzhou-internal.aliyuncs.com","--backup_bucket","moc-backup-test","--backup_filepath","backup-freetier-02-20240315021618","--backup_region","cn-hangzhou","--backup_access_key_id","$(AWS_ACCESS_KEY_ID)","--backup_secret_access_key","$(AWS_SECRET_ACCESS_KEY)","--restore_dir","s3","--restore_endpoint","http://oss-cn-hangzhou-internal.aliyuncs.com","--restore_access_key_id","$(AWS_ACCESS_KEY_ID)","--restore_secret_access_key","$(AWS_SECRET_ACCESS_KEY)","--restore_bucket","moc-backup-test","--restore_filepath","restore-freetier-02-20240315021618","--restore_region","cn-hangzhou","--log_level","debug"],"env":[{"name":"AWS_ACCESS_KEY_ID","valueFrom":{"secretKeyRef":{"name":"aliyun-moc-backup-test","key":"AWS_ACCESS_KEY_ID"}}},{"name":"AWS_SECRET_ACCESS_KEY","valueFrom":{"secretKeyRef":{"name":"aliyun-moc-backup-test","key":"AWS_SECRET_ACCESS_KEY"}}}],"resources":{"limits":{"cpu":"7","memory":"13Gi"},"requests":{"cpu":"7","memory":"13Gi"}},"volumeMounts":[{"name":"kube-api-access-kcbh4","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Never","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"default","serviceAccount":"default","nodeName":"cn-hangzhou.10.1.160.149","securityContext":{},"imagePullSecrets":[{"name":"acr-credential-0cd66774c2e1635329078c8ad94a7d92"},{"name":"acr-credential-90a511cb8249950d96ce0336cae093f0"},{"name":"acr-credential-518dfd1883737c2a6bde99ed6fee583c"},{"name":"acr-credential-91029a2c549212d737cbd7e40e1a6ebb"},{"name":"acr-credential-bbec27b1dbdc90bb0f27dbd225b24e17"}],"schedulerName":"default-scheduler","tolerations":[{"operator":"Exists","effect":"NoSchedule"},{"key":"node.kubernetes.io/not-ready","operator":"Exists","effect":"NoExecute","tolerationSeconds":300},{"key":"node.kubernetes.io/unreachable","operator":"Exists","effect":"NoExecute","tolerationSeconds":300}],"priority":0,"enableServiceLinks":true,"preemptionPolicy":"PreemptLowerPriority"},"status":{"phase":"Running","conditions":[{"type":"Initialized","status":"True","lastProbeTime":null,"lastTransitionTime":"2024-03-15T03:45:52Z"},{"type":"Ready","status":"True","lastProbeTime":null,"lastTransitionTime":"2024-03-15T03:46:43Z"},{"type":"ContainersReady","status":"True","lastProbeTime":null,"lastTransitionTime":"2024-03-15T03:46:43Z"},{"type":"PodScheduled","status":"True","lastProbeTime":null,"lastTransitionTime":"2024-03-15T03:45:53Z"}],"hostIP":"10.1.160.149","podIP":"172.20.87.130","podIPs":[{"ip":"172.20.87.130"}],"startTime":"2024-03-15T03:45:52Z","containerStatuses":[{"name":"mo-br","state":{"running":{"startedAt":"2024-03-15T03:46:42Z"}},"lastState":{},"ready":true,"restartCount":0,"image":"registry.cn-hangzhou.aliyuncs.com/mocloud/mo-backup:4fa21f1","imageID":"registry.cn-hangzhou.aliyuncs.com/mocloud/mo-backup@sha256:96b3680fe7739eb276013fba516d95a7f11f8cde92170a09d835b9f73d6f7e7b","containerID":"containerd://5e28da92e75da0968262af37e7c688c097e78a2312947729f62dfb222b66b132","started":true}],"qosClass":"Guaranteed"}}

DEBUG    src.tests.upgrade.test_mo_upgrade:test_mo_upgrade.py:219 wait for the conditions by '<lambda>' with args: ('restore-restore-freetier-02', 'moc-upgrade-test'), {}
DEBUG    kubernetes.client.rest:rest.py:235 response body: {"kind":"Pod","apiVersion":"v1","metadata":{"name":"restore-restore-freetier-02","namespace":"moc-upgrade-test","uid":"e16f2157-ce81-46db-a035-d4ceba7cfb90","resourceVersion":"96213815","creationTimestamp":"2024-03-15T03:44:29Z","managedFields":[{"manager":"OpenAPI-Generator","operation":"Update","apiVersion":"v1","time":"2024-03-15T03:44:29Z","fieldsType":"FieldsV1","fieldsV1":{"f:spec":{"f:containers":{"k:{\"name\":\"mo-br\"}":{".":{},"f:args":{},"f:command":{},"f:env":{".":{},"k:{\"name\":\"AWS_ACCESS_KEY_ID\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"AWS_SECRET_ACCESS_KEY\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}}},"f:image":{},"f:imagePullPolicy":{},"f:name":{},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{}}},"f:dnsPolicy":{},"f:enableServiceLinks":{},"f:imagePullSecrets":{".":{},"k:{\"name\":\"acr-credential-0cd66774c2e1635329078c8ad94a7d92\"}":{},"k:{\"name\":\"acr-credential-518dfd1883737c2a6bde99ed6fee583c\"}":{},"k:{\"name\":\"acr-credential-90a511cb8249950d96ce0336cae093f0\"}":{},"k:{\"name\":\"acr-credential-91029a2c549212d737cbd7e40e1a6ebb\"}":{},"k:{\"name\":\"acr-credential-bbec27b1dbdc90bb0f27dbd225b24e17\"}":{}},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{},"f:terminationGracePeriodSeconds":{},"f:tolerations":{}}}},{"manager":"kube-scheduler","operation":"Update","apiVersion":"v1","time":"2024-03-15T03:44:29Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:conditions":{".":{},"k:{\"type\":\"PodScheduled\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:message":{},"f:reason":{},"f:status":{},"f:type":{}}}}},"subresource":"status"},{"manager":"kubelet","operation":"Update","apiVersion":"v1","time":"2024-03-15T03:46:43Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:conditions":{"k:{\"type\":\"ContainersReady\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Initialized\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Ready\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}}},"f:containerStatuses":{},"f:hostIP":{},"f:phase":{},"f:podIP":{},"f:podIPs":{".":{},"k:{\"ip\":\"172.20.87.130\"}":{".":{},"f:ip":{}}},"f:startTime":{}}},"subresource":"status"}]},"spec":{"volumes":[{"name":"kube-api-access-kcbh4","projected":{"sources":[{"serviceAccountToken":{"expirationSeconds":3607,"path":"token"}},{"configMap":{"name":"kube-root-ca.crt","items":[{"key":"ca.crt","path":"ca.crt"}]}},{"downwardAPI":{"items":[{"path":"namespace","fieldRef":{"apiVersion":"v1","fieldPath":"metadata.namespace"}}]}}],"defaultMode":420}}],"containers":[{"name":"mo-br","image":"registry.cn-hangzhou.aliyuncs.com/mocloud/mo-backup:4fa21f1","command":["/mo_br","restore"],"args":["--backup_dir","s3","--backup_endpoint","http://oss-cn-hangzhou-internal.aliyuncs.com","--backup_bucket","moc-backup-test","--backup_filepath","backup-freetier-02-20240315021618","--backup_region","cn-hangzhou","--backup_access_key_id","$(AWS_ACCESS_KEY_ID)","--backup_secret_access_key","$(AWS_SECRET_ACCESS_KEY)","--restore_dir","s3","--restore_endpoint","http://oss-cn-hangzhou-internal.aliyuncs.com","--restore_access_key_id","$(AWS_ACCESS_KEY_ID)","--restore_secret_access_key","$(AWS_SECRET_ACCESS_KEY)","--restore_bucket","moc-backup-test","--restore_filepath","restore-freetier-02-20240315021618","--restore_region","cn-hangzhou","--log_level","debug"],"env":[{"name":"AWS_ACCESS_KEY_ID","valueFrom":{"secretKeyRef":{"name":"aliyun-moc-backup-test","key":"AWS_ACCESS_KEY_ID"}}},{"name":"AWS_SECRET_ACCESS_KEY","valueFrom":{"secretKeyRef":{"name":"aliyun-moc-backup-test","key":"AWS_SECRET_ACCESS_KEY"}}}],"resources":{"limits":{"cpu":"7","memory":"13Gi"},"requests":{"cpu":"7","memory":"13Gi"}},"volumeMounts":[{"name":"kube-api-access-kcbh4","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Never","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"default","serviceAccount":"default","nodeName":"cn-hangzhou.10.1.160.149","securityContext":{},"imagePullSecrets":[{"name":"acr-credential-0cd66774c2e1635329078c8ad94a7d92"},{"name":"acr-credential-90a511cb8249950d96ce0336cae093f0"},{"name":"acr-credential-518dfd1883737c2a6bde99ed6fee583c"},{"name":"acr-credential-91029a2c549212d737cbd7e40e1a6ebb"},{"name":"acr-credential-bbec27b1dbdc90bb0f27dbd225b24e17"}],"schedulerName":"default-scheduler","tolerations":[{"operator":"Exists","effect":"NoSchedule"},{"key":"node.kubernetes.io/not-ready","operator":"Exists","effect":"NoExecute","tolerationSeconds":300},{"key":"node.kubernetes.io/unreachable","operator":"Exists","effect":"NoExecute","tolerationSeconds":300}],"priority":0,"enableServiceLinks":true,"preemptionPolicy":"PreemptLowerPriority"},"status":{"phase":"Running","conditions":[{"type":"Initialized","status":"True","lastProbeTime":null,"lastTransitionTime":"2024-03-15T03:45:52Z"},{"type":"Ready","status":"True","lastProbeTime":null,"lastTransitionTime":"2024-03-15T03:46:43Z"},{"type":"ContainersReady","status":"True","lastProbeTime":null,"lastTransitionTime":"2024-03-15T03:46:43Z"},{"type":"PodScheduled","status":"True","lastProbeTime":null,"lastTransitionTime":"2024-03-15T03:45:53Z"}],"hostIP":"10.1.160.149","podIP":"172.20.87.130","podIPs":[{"ip":"172.20.87.130"}],"startTime":"2024-03-15T03:45:52Z","containerStatuses":[{"name":"mo-br","state":{"running":{"startedAt":"2024-03-15T03:46:42Z"}},"lastState":{},"ready":true,"restartCount":0,"image":"registry.cn-hangzhou.aliyuncs.com/mocloud/mo-backup:4fa21f1","imageID":"registry.cn-hangzhou.aliyuncs.com/mocloud/mo-backup@sha256:96b3680fe7739eb276013fba516d95a7f11f8cde92170a09d835b9f73d6f7e7b","containerID":"containerd://5e28da92e75da0968262af37e7c688c097e78a2312947729f62dfb222b66b132","started":true}],"qosClass":"Guaranteed"}}

DEBUG    src.tests.upgrade.test_mo_upgrade:test_mo_upgrade.py:219 wait for the conditions by '<lambda>' with args: ('restore-restore-freetier-02', 'moc-upgrade-test'), {}
DEBUG    kubernetes.client.rest:rest.py:235 response body: {"kind":"Pod","apiVersion":"v1","metadata":{"name":"restore-restore-freetier-02","namespace":"moc-upgrade-test","uid":"e16f2157-ce81-46db-a035-d4ceba7cfb90","resourceVersion":"96213815","creationTimestamp":"2024-03-15T03:44:29Z","managedFields":[{"manager":"OpenAPI-Generator","operation":"Update","apiVersion":"v1","time":"2024-03-15T03:44:29Z","fieldsType":"FieldsV1","fieldsV1":{"f:spec":{"f:containers":{"k:{\"name\":\"mo-br\"}":{".":{},"f:args":{},"f:command":{},"f:env":{".":{},"k:{\"name\":\"AWS_ACCESS_KEY_ID\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"AWS_SECRET_ACCESS_KEY\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}}},"f:image":{},"f:imagePullPolicy":{},"f:name":{},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{}}},"f:dnsPolicy":{},"f:enableServiceLinks":{},"f:imagePullSecrets":{".":{},"k:{\"name\":\"acr-credential-0cd66774c2e1635329078c8ad94a7d92\"}":{},"k:{\"name\":\"acr-credential-518dfd1883737c2a6bde99ed6fee583c\"}":{},"k:{\"name\":\"acr-credential-90a511cb8249950d96ce0336cae093f0\"}":{},"k:{\"name\":\"acr-credential-91029a2c549212d737cbd7e40e1a6ebb\"}":{},"k:{\"name\":\"acr-credential-bbec27b1dbdc90bb0f27dbd225b24e17\"}":{}},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{},"f:terminationGracePeriodSeconds":{},"f:tolerations":{}}}},{"manager":"kube-scheduler","operation":"Update","apiVersion":"v1","time":"2024-03-15T03:44:29Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:conditions":{".":{},"k:{\"type\":\"PodScheduled\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:message":{},"f:reason":{},"f:status":{},"f:type":{}}}}},"subresource":"status"},{"manager":"kubelet","operation":"Update","apiVersion":"v1","time":"2024-03-15T03:46:43Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:conditions":{"k:{\"type\":\"ContainersReady\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Initialized\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Ready\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}}},"f:containerStatuses":{},"f:hostIP":{},"f:phase":{},"f:podIP":{},"f:podIPs":{".":{},"k:{\"ip\":\"172.20.87.130\"}":{".":{},"f:ip":{}}},"f:startTime":{}}},"subresource":"status"}]},"spec":{"volumes":[{"name":"kube-api-access-kcbh4","projected":{"sources":[{"serviceAccountToken":{"expirationSeconds":3607,"path":"token"}},{"configMap":{"name":"kube-root-ca.crt","items":[{"key":"ca.crt","path":"ca.crt"}]}},{"downwardAPI":{"items":[{"path":"namespace","fieldRef":{"apiVersion":"v1","fieldPath":"metadata.namespace"}}]}}],"defaultMode":420}}],"containers":[{"name":"mo-br","image":"registry.cn-hangzhou.aliyuncs.com/mocloud/mo-backup:4fa21f1","command":["/mo_br","restore"],"args":["--backup_dir","s3","--backup_endpoint","http://oss-cn-hangzhou-internal.aliyuncs.com","--backup_bucket","moc-backup-test","--backup_filepath","backup-freetier-02-20240315021618","--backup_region","cn-hangzhou","--backup_access_key_id","$(AWS_ACCESS_KEY_ID)","--backup_secret_access_key","$(AWS_SECRET_ACCESS_KEY)","--restore_dir","s3","--restore_endpoint","http://oss-cn-hangzhou-internal.aliyuncs.com","--restore_access_key_id","$(AWS_ACCESS_KEY_ID)","--restore_secret_access_key","$(AWS_SECRET_ACCESS_KEY)","--restore_bucket","moc-backup-test","--restore_filepath","restore-freetier-02-20240315021618","--restore_region","cn-hangzhou","--log_level","debug"],"env":[{"name":"AWS_ACCESS_KEY_ID","valueFrom":{"secretKeyRef":{"name":"aliyun-moc-backup-test","key":"AWS_ACCESS_KEY_ID"}}},{"name":"AWS_SECRET_ACCESS_KEY","valueFrom":{"secretKeyRef":{"name":"aliyun-moc-backup-test","key":"AWS_SECRET_ACCESS_KEY"}}}],"resources":{"limits":{"cpu":"7","memory":"13Gi"},"requests":{"cpu":"7","memory":"13Gi"}},"volumeMounts":[{"name":"kube-api-access-kcbh4","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Never","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"default","serviceAccount":"default","nodeName":"cn-hangzhou.10.1.160.149","securityContext":{},"imagePullSecrets":[{"name":"acr-credential-0cd66774c2e1635329078c8ad94a7d92"},{"name":"acr-credential-90a511cb8249950d96ce0336cae093f0"},{"name":"acr-credential-518dfd1883737c2a6bde99ed6fee583c"},{"name":"acr-credential-91029a2c549212d737cbd7e40e1a6ebb"},{"name":"acr-credential-bbec27b1dbdc90bb0f27dbd225b24e17"}],"schedulerName":"default-scheduler","tolerations":[{"operator":"Exists","effect":"NoSchedule"},{"key":"node.kubernetes.io/not-ready","operator":"Exists","effect":"NoExecute","tolerationSeconds":300},{"key":"node.kubernetes.io/unreachable","operator":"Exists","effect":"NoExecute","tolerationSeconds":300}],"priority":0,"enableServiceLinks":true,"preemptionPolicy":"PreemptLowerPriority"},"status":{"phase":"Running","conditions":[{"type":"Initialized","status":"True","lastProbeTime":null,"lastTransitionTime":"2024-03-15T03:45:52Z"},{"type":"Ready","status":"True","lastProbeTime":null,"lastTransitionTime":"2024-03-15T03:46:43Z"},{"type":"ContainersReady","status":"True","lastProbeTime":null,"lastTransitionTime":"2024-03-15T03:46:43Z"},{"type":"PodScheduled","status":"True","lastProbeTime":null,"lastTransitionTime":"2024-03-15T03:45:53Z"}],"hostIP":"10.1.160.149","podIP":"172.20.87.130","podIPs":[{"ip":"172.20.87.130"}],"startTime":"2024-03-15T03:45:52Z","containerStatuses":[{"name":"mo-br","state":{"running":{"startedAt":"2024-03-15T03:46:42Z"}},"lastState":{},"ready":true,"restartCount":0,"image":"registry.cn-hangzhou.aliyuncs.com/mocloud/mo-backup:4fa21f1","imageID":"registry.cn-hangzhou.aliyuncs.com/mocloud/mo-backup@sha256:96b3680fe7739eb276013fba516d95a7f11f8cde92170a09d835b9f73d6f7e7b","containerID":"containerd://5e28da92e75da0968262af37e7c688c097e78a2312947729f62dfb222b66b132","started":true}],"qosClass":"Guaranteed"}}

DEBUG    src.tests.upgrade.test_mo_upgrade:test_mo_upgrade.py:219 wait for the conditions by '<lambda>' with args: ('restore-restore-freetier-02', 'moc-upgrade-test'), {}
DEBUG    kubernetes.client.rest:rest.py:235 response body: {"kind":"Pod","apiVersion":"v1","metadata":{"name":"restore-restore-freetier-02","namespace":"moc-upgrade-test","uid":"e16f2157-ce81-46db-a035-d4ceba7cfb90","resourceVersion":"96213815","creationTimestamp":"2024-03-15T03:44:29Z","managedFields":[{"manager":"OpenAPI-Generator","operation":"Update","apiVersion":"v1","time":"2024-03-15T03:44:29Z","fieldsType":"FieldsV1","fieldsV1":{"f:spec":{"f:containers":{"k:{\"name\":\"mo-br\"}":{".":{},"f:args":{},"f:command":{},"f:env":{".":{},"k:{\"name\":\"AWS_ACCESS_KEY_ID\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"AWS_SECRET_ACCESS_KEY\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}}},"f:image":{},"f:imagePullPolicy":{},"f:name":{},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{}}},"f:dnsPolicy":{},"f:enableServiceLinks":{},"f:imagePullSecrets":{".":{},"k:{\"name\":\"acr-credential-0cd66774c2e1635329078c8ad94a7d92\"}":{},"k:{\"name\":\"acr-credential-518dfd1883737c2a6bde99ed6fee583c\"}":{},"k:{\"name\":\"acr-credential-90a511cb8249950d96ce0336cae093f0\"}":{},"k:{\"name\":\"acr-credential-91029a2c549212d737cbd7e40e1a6ebb\"}":{},"k:{\"name\":\"acr-credential-bbec27b1dbdc90bb0f27dbd225b24e17\"}":{}},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{},"f:terminationGracePeriodSeconds":{},"f:tolerations":{}}}},{"manager":"kube-scheduler","operation":"Update","apiVersion":"v1","time":"2024-03-15T03:44:29Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:conditions":{".":{},"k:{\"type\":\"PodScheduled\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:message":{},"f:reason":{},"f:status":{},"f:type":{}}}}},"subresource":"status"},{"manager":"kubelet","operation":"Update","apiVersion":"v1","time":"2024-03-15T03:46:43Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:conditions":{"k:{\"type\":\"ContainersReady\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Initialized\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Ready\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}}},"f:containerStatuses":{},"f:hostIP":{},"f:phase":{},"f:podIP":{},"f:podIPs":{".":{},"k:{\"ip\":\"172.20.87.130\"}":{".":{},"f:ip":{}}},"f:startTime":{}}},"subresource":"status"}]},"spec":{"volumes":[{"name":"kube-api-access-kcbh4","projected":{"sources":[{"serviceAccountToken":{"expirationSeconds":3607,"path":"token"}},{"configMap":{"name":"kube-root-ca.crt","items":[{"key":"ca.crt","path":"ca.crt"}]}},{"downwardAPI":{"items":[{"path":"namespace","fieldRef":{"apiVersion":"v1","fieldPath":"metadata.namespace"}}]}}],"defaultMode":420}}],"containers":[{"name":"mo-br","image":"registry.cn-hangzhou.aliyuncs.com/mocloud/mo-backup:4fa21f1","command":["/mo_br","restore"],"args":["--backup_dir","s3","--backup_endpoint","http://oss-cn-hangzhou-internal.aliyuncs.com","--backup_bucket","moc-backup-test","--backup_filepath","backup-freetier-02-20240315021618","--backup_region","cn-hangzhou","--backup_access_key_id","$(AWS_ACCESS_KEY_ID)","--backup_secret_access_key","$(AWS_SECRET_ACCESS_KEY)","--restore_dir","s3","--restore_endpoint","http://oss-cn-hangzhou-internal.aliyuncs.com","--restore_access_key_id","$(AWS_ACCESS_KEY_ID)","--restore_secret_access_key","$(AWS_SECRET_ACCESS_KEY)","--restore_bucket","moc-backup-test","--restore_filepath","restore-freetier-02-20240315021618","--restore_region","cn-hangzhou","--log_level","debug"],"env":[{"name":"AWS_ACCESS_KEY_ID","valueFrom":{"secretKeyRef":{"name":"aliyun-moc-backup-test","key":"AWS_ACCESS_KEY_ID"}}},{"name":"AWS_SECRET_ACCESS_KEY","valueFrom":{"secretKeyRef":{"name":"aliyun-moc-backup-test","key":"AWS_SECRET_ACCESS_KEY"}}}],"resources":{"limits":{"cpu":"7","memory":"13Gi"},"requests":{"cpu":"7","memory":"13Gi"}},"volumeMounts":[{"name":"kube-api-access-kcbh4","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Never","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"default","serviceAccount":"default","nodeName":"cn-hangzhou.10.1.160.149","securityContext":{},"imagePullSecrets":[{"name":"acr-credential-0cd66774c2e1635329078c8ad94a7d92"},{"name":"acr-credential-90a511cb8249950d96ce0336cae093f0"},{"name":"acr-credential-518dfd1883737c2a6bde99ed6fee583c"},{"name":"acr-credential-91029a2c549212d737cbd7e40e1a6ebb"},{"name":"acr-credential-bbec27b1dbdc90bb0f27dbd225b24e17"}],"schedulerName":"default-scheduler","tolerations":[{"operator":"Exists","effect":"NoSchedule"},{"key":"node.kubernetes.io/not-ready","operator":"Exists","effect":"NoExecute","tolerationSeconds":300},{"key":"node.kubernetes.io/unreachable","operator":"Exists","effect":"NoExecute","tolerationSeconds":300}],"priority":0,"enableServiceLinks":true,"preemptionPolicy":"PreemptLowerPriority"},"status":{"phase":"Running","conditions":[{"type":"Initialized","status":"True","lastProbeTime":null,"lastTransitionTime":"2024-03-15T03:45:52Z"},{"type":"Ready","status":"True","lastProbeTime":null,"lastTransitionTime":"2024-03-15T03:46:43Z"},{"type":"ContainersReady","status":"True","lastProbeTime":null,"lastTransitionTime":"2024-03-15T03:46:43Z"},{"type":"PodScheduled","status":"True","lastProbeTime":null,"lastTransitionTime":"2024-03-15T03:45:53Z"}],"hostIP":"10.1.160.149","podIP":"172.20.87.130","podIPs":[{"ip":"172.20.87.130"}],"startTime":"2024-03-15T03:45:52Z","containerStatuses":[{"name":"mo-br","state":{"running":{"startedAt":"2024-03-15T03:46:42Z"}},"lastState":{},"ready":true,"restartCount":0,"image":"registry.cn-hangzhou.aliyuncs.com/mocloud/mo-backup:4fa21f1","imageID":"registry.cn-hangzhou.aliyuncs.com/mocloud/mo-backup@sha256:96b3680fe7739eb276013fba516d95a7f11f8cde92170a09d835b9f73d6f7e7b","containerID":"containerd://5e28da92e75da0968262af37e7c688c097e78a2312947729f62dfb222b66b132","started":true}],"qosClass":"Guaranteed"}}

DEBUG    src.tests.upgrade.test_mo_upgrade:test_mo_upgrade.py:219 wait for the conditions by '<lambda>' with args: ('restore-restore-freetier-02', 'moc-upgrade-test'), {}
DEBUG    kubernetes.client.rest:rest.py:235 response body: {"kind":"Pod","apiVersion":"v1","metadata":{"name":"restore-restore-freetier-02","namespace":"moc-upgrade-test","uid":"e16f2157-ce81-46db-a035-d4ceba7cfb90","resourceVersion":"96213815","creationTimestamp":"2024-03-15T03:44:29Z","managedFields":[{"manager":"OpenAPI-Generator","operation":"Update","apiVersion":"v1","time":"2024-03-15T03:44:29Z","fieldsType":"FieldsV1","fieldsV1":{"f:spec":{"f:containers":{"k:{\"name\":\"mo-br\"}":{".":{},"f:args":{},"f:command":{},"f:env":{".":{},"k:{\"name\":\"AWS_ACCESS_KEY_ID\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"AWS_SECRET_ACCESS_KEY\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}}},"f:image":{},"f:imagePullPolicy":{},"f:name":{},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{}}},"f:dnsPolicy":{},"f:enableServiceLinks":{},"f:imagePullSecrets":{".":{},"k:{\"name\":\"acr-credential-0cd66774c2e1635329078c8ad94a7d92\"}":{},"k:{\"name\":\"acr-credential-518dfd1883737c2a6bde99ed6fee583c\"}":{},"k:{\"name\":\"acr-credential-90a511cb8249950d96ce0336cae093f0\"}":{},"k:{\"name\":\"acr-credential-91029a2c549212d737cbd7e40e1a6ebb\"}":{},"k:{\"name\":\"acr-credential-bbec27b1dbdc90bb0f27dbd225b24e17\"}":{}},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{},"f:terminationGracePeriodSeconds":{},"f:tolerations":{}}}},{"manager":"kube-scheduler","operation":"Update","apiVersion":"v1","time":"2024-03-15T03:44:29Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:conditions":{".":{},"k:{\"type\":\"PodScheduled\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:message":{},"f:reason":{},"f:status":{},"f:type":{}}}}},"subresource":"status"},{"manager":"kubelet","operation":"Update","apiVersion":"v1","time":"2024-03-15T03:46:43Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:conditions":{"k:{\"type\":\"ContainersReady\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Initialized\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Ready\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}}},"f:containerStatuses":{},"f:hostIP":{},"f:phase":{},"f:podIP":{},"f:podIPs":{".":{},"k:{\"ip\":\"172.20.87.130\"}":{".":{},"f:ip":{}}},"f:startTime":{}}},"subresource":"status"}]},"spec":{"volumes":[{"name":"kube-api-access-kcbh4","projected":{"sources":[{"serviceAccountToken":{"expirationSeconds":3607,"path":"token"}},{"configMap":{"name":"kube-root-ca.crt","items":[{"key":"ca.crt","path":"ca.crt"}]}},{"downwardAPI":{"items":[{"path":"namespace","fieldRef":{"apiVersion":"v1","fieldPath":"metadata.namespace"}}]}}],"defaultMode":420}}],"containers":[{"name":"mo-br","image":"registry.cn-hangzhou.aliyuncs.com/mocloud/mo-backup:4fa21f1","command":["/mo_br","restore"],"args":["--backup_dir","s3","--backup_endpoint","http://oss-cn-hangzhou-internal.aliyuncs.com","--backup_bucket","moc-backup-test","--backup_filepath","backup-freetier-02-20240315021618","--backup_region","cn-hangzhou","--backup_access_key_id","$(AWS_ACCESS_KEY_ID)","--backup_secret_access_key","$(AWS_SECRET_ACCESS_KEY)","--restore_dir","s3","--restore_endpoint","http://oss-cn-hangzhou-internal.aliyuncs.com","--restore_access_key_id","$(AWS_ACCESS_KEY_ID)","--restore_secret_access_key","$(AWS_SECRET_ACCESS_KEY)","--restore_bucket","moc-backup-test","--restore_filepath","restore-freetier-02-20240315021618","--restore_region","cn-hangzhou","--log_level","debug"],"env":[{"name":"AWS_ACCESS_KEY_ID","valueFrom":{"secretKeyRef":{"name":"aliyun-moc-backup-test","key":"AWS_ACCESS_KEY_ID"}}},{"name":"AWS_SECRET_ACCESS_KEY","valueFrom":{"secretKeyRef":{"name":"aliyun-moc-backup-test","key":"AWS_SECRET_ACCESS_KEY"}}}],"resources":{"limits":{"cpu":"7","memory":"13Gi"},"requests":{"cpu":"7","memory":"13Gi"}},"volumeMounts":[{"name":"kube-api-access-kcbh4","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Never","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"default","serviceAccount":"default","nodeName":"cn-hangzhou.10.1.160.149","securityContext":{},"imagePullSecrets":[{"name":"acr-credential-0cd66774c2e1635329078c8ad94a7d92"},{"name":"acr-credential-90a511cb8249950d96ce0336cae093f0"},{"name":"acr-credential-518dfd1883737c2a6bde99ed6fee583c"},{"name":"acr-credential-91029a2c549212d737cbd7e40e1a6ebb"},{"name":"acr-credential-bbec27b1dbdc90bb0f27dbd225b24e17"}],"schedulerName":"default-scheduler","tolerations":[{"operator":"Exists","effect":"NoSchedule"},{"key":"node.kubernetes.io/not-ready","operator":"Exists","effect":"NoExecute","tolerationSeconds":300},{"key":"node.kubernetes.io/unreachable","operator":"Exists","effect":"NoExecute","tolerationSeconds":300}],"priority":0,"enableServiceLinks":true,"preemptionPolicy":"PreemptLowerPriority"},"status":{"phase":"Running","conditions":[{"type":"Initialized","status":"True","lastProbeTime":null,"lastTransitionTime":"2024-03-15T03:45:52Z"},{"type":"Ready","status":"True","lastProbeTime":null,"lastTransitionTime":"2024-03-15T03:46:43Z"},{"type":"ContainersReady","status":"True","lastProbeTime":null,"lastTransitionTime":"2024-03-15T03:46:43Z"},{"type":"PodScheduled","status":"True","lastProbeTime":null,"lastTransitionTime":"2024-03-15T03:45:53Z"}],"hostIP":"10.1.160.149","podIP":"172.20.87.130","podIPs":[{"ip":"172.20.87.130"}],"startTime":"2024-03-15T03:45:52Z","containerStatuses":[{"name":"mo-br","state":{"running":{"startedAt":"2024-03-15T03:46:42Z"}},"lastState":{},"ready":true,"restartCount":0,"image":"registry.cn-hangzhou.aliyuncs.com/mocloud/mo-backup:4fa21f1","imageID":"registry.cn-hangzhou.aliyuncs.com/mocloud/mo-backup@sha256:96b3680fe7739eb276013fba516d95a7f11f8cde92170a09d835b9f73d6f7e7b","containerID":"containerd://5e28da92e75da0968262af37e7c688c097e78a2312947729f62dfb222b66b132","started":true}],"qosClass":"Guaranteed"}}

DEBUG    src.tests.upgrade.test_mo_upgrade:test_mo_upgrade.py:219 wait for the conditions by '<lambda>' with args: ('restore-restore-freetier-02', 'moc-upgrade-test'), {}
DEBUG    kubernetes.client.rest:rest.py:235 response body: {"kind":"Pod","apiVersion":"v1","metadata":{"name":"restore-restore-freetier-02","namespace":"moc-upgrade-test","uid":"e16f2157-ce81-46db-a035-d4ceba7cfb90","resourceVersion":"96213815","creationTimestamp":"2024-03-15T03:44:29Z","managedFields":[{"manager":"OpenAPI-Generator","operation":"Update","apiVersion":"v1","time":"2024-03-15T03:44:29Z","fieldsType":"FieldsV1","fieldsV1":{"f:spec":{"f:containers":{"k:{\"name\":\"mo-br\"}":{".":{},"f:args":{},"f:command":{},"f:env":{".":{},"k:{\"name\":\"AWS_ACCESS_KEY_ID\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"AWS_SECRET_ACCESS_KEY\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}}},"f:image":{},"f:imagePullPolicy":{},"f:name":{},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{}}},"f:dnsPolicy":{},"f:enableServiceLinks":{},"f:imagePullSecrets":{".":{},"k:{\"name\":\"acr-credential-0cd66774c2e1635329078c8ad94a7d92\"}":{},"k:{\"name\":\"acr-credential-518dfd1883737c2a6bde99ed6fee583c\"}":{},"k:{\"name\":\"acr-credential-90a511cb8249950d96ce0336cae093f0\"}":{},"k:{\"name\":\"acr-credential-91029a2c549212d737cbd7e40e1a6ebb\"}":{},"k:{\"name\":\"acr-credential-bbec27b1dbdc90bb0f27dbd225b24e17\"}":{}},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{},"f:terminationGracePeriodSeconds":{},"f:tolerations":{}}}},{"manager":"kube-scheduler","operation":"Update","apiVersion":"v1","time":"2024-03-15T03:44:29Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:conditions":{".":{},"k:{\"type\":\"PodScheduled\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:message":{},"f:reason":{},"f:status":{},"f:type":{}}}}},"subresource":"status"},{"manager":"kubelet","operation":"Update","apiVersion":"v1","time":"2024-03-15T03:46:43Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:conditions":{"k:{\"type\":\"ContainersReady\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Initialized\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Ready\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}}},"f:containerStatuses":{},"f:hostIP":{},"f:phase":{},"f:podIP":{},"f:podIPs":{".":{},"k:{\"ip\":\"172.20.87.130\"}":{".":{},"f:ip":{}}},"f:startTime":{}}},"subresource":"status"}]},"spec":{"volumes":[{"name":"kube-api-access-kcbh4","projected":{"sources":[{"serviceAccountToken":{"expirationSeconds":3607,"path":"token"}},{"configMap":{"name":"kube-root-ca.crt","items":[{"key":"ca.crt","path":"ca.crt"}]}},{"downwardAPI":{"items":[{"path":"namespace","fieldRef":{"apiVersion":"v1","fieldPath":"metadata.namespace"}}]}}],"defaultMode":420}}],"containers":[{"name":"mo-br","image":"registry.cn-hangzhou.aliyuncs.com/mocloud/mo-backup:4fa21f1","command":["/mo_br","restore"],"args":["--backup_dir","s3","--backup_endpoint","http://oss-cn-hangzhou-internal.aliyuncs.com","--backup_bucket","moc-backup-test","--backup_filepath","backup-freetier-02-20240315021618","--backup_region","cn-hangzhou","--backup_access_key_id","$(AWS_ACCESS_KEY_ID)","--backup_secret_access_key","$(AWS_SECRET_ACCESS_KEY)","--restore_dir","s3","--restore_endpoint","http://oss-cn-hangzhou-internal.aliyuncs.com","--restore_access_key_id","$(AWS_ACCESS_KEY_ID)","--restore_secret_access_key","$(AWS_SECRET_ACCESS_KEY)","--restore_bucket","moc-backup-test","--restore_filepath","restore-freetier-02-20240315021618","--restore_region","cn-hangzhou","--log_level","debug"],"env":[{"name":"AWS_ACCESS_KEY_ID","valueFrom":{"secretKeyRef":{"name":"aliyun-moc-backup-test","key":"AWS_ACCESS_KEY_ID"}}},{"name":"AWS_SECRET_ACCESS_KEY","valueFrom":{"secretKeyRef":{"name":"aliyun-moc-backup-test","key":"AWS_SECRET_ACCESS_KEY"}}}],"resources":{"limits":{"cpu":"7","memory":"13Gi"},"requests":{"cpu":"7","memory":"13Gi"}},"volumeMounts":[{"name":"kube-api-access-kcbh4","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Never","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"default","serviceAccount":"default","nodeName":"cn-hangzhou.10.1.160.149","securityContext":{},"imagePullSecrets":[{"name":"acr-credential-0cd66774c2e1635329078c8ad94a7d92"},{"name":"acr-credential-90a511cb8249950d96ce0336cae093f0"},{"name":"acr-credential-518dfd1883737c2a6bde99ed6fee583c"},{"name":"acr-credential-91029a2c549212d737cbd7e40e1a6ebb"},{"name":"acr-credential-bbec27b1dbdc90bb0f27dbd225b24e17"}],"schedulerName":"default-scheduler","tolerations":[{"operator":"Exists","effect":"NoSchedule"},{"key":"node.kubernetes.io/not-ready","operator":"Exists","effect":"NoExecute","tolerationSeconds":300},{"key":"node.kubernetes.io/unreachable","operator":"Exists","effect":"NoExecute","tolerationSeconds":300}],"priority":0,"enableServiceLinks":true,"preemptionPolicy":"PreemptLowerPriority"},"status":{"phase":"Running","conditions":[{"type":"Initialized","status":"True","lastProbeTime":null,"lastTransitionTime":"2024-03-15T03:45:52Z"},{"type":"Ready","status":"True","lastProbeTime":null,"lastTransitionTime":"2024-03-15T03:46:43Z"},{"type":"ContainersReady","status":"True","lastProbeTime":null,"lastTransitionTime":"2024-03-15T03:46:43Z"},{"type":"PodScheduled","status":"True","lastProbeTime":null,"lastTransitionTime":"2024-03-15T03:45:53Z"}],"hostIP":"10.1.160.149","podIP":"172.20.87.130","podIPs":[{"ip":"172.20.87.130"}],"startTime":"2024-03-15T03:45:52Z","containerStatuses":[{"name":"mo-br","state":{"running":{"startedAt":"2024-03-15T03:46:42Z"}},"lastState":{},"ready":true,"restartCount":0,"image":"registry.cn-hangzhou.aliyuncs.com/mocloud/mo-backup:4fa21f1","imageID":"registry.cn-hangzhou.aliyuncs.com/mocloud/mo-backup@sha256:96b3680fe7739eb276013fba516d95a7f11f8cde92170a09d835b9f73d6f7e7b","containerID":"containerd://5e28da92e75da0968262af37e7c688c097e78a2312947729f62dfb222b66b132","started":true}],"qosClass":"Guaranteed"}}

DEBUG    src.tests.upgrade.test_mo_upgrade:test_mo_upgrade.py:219 wait for the conditions by '<lambda>' with args: ('restore-restore-freetier-02', 'moc-upgrade-test'), {}
DEBUG    kubernetes.client.rest:rest.py:235 response body: {"kind":"Pod","apiVersion":"v1","metadata":{"name":"restore-restore-freetier-02","namespace":"moc-upgrade-test","uid":"e16f2157-ce81-46db-a035-d4ceba7cfb90","resourceVersion":"96213815","creationTimestamp":"2024-03-15T03:44:29Z","managedFields":[{"manager":"OpenAPI-Generator","operation":"Update","apiVersion":"v1","time":"2024-03-15T03:44:29Z","fieldsType":"FieldsV1","fieldsV1":{"f:spec":{"f:containers":{"k:{\"name\":\"mo-br\"}":{".":{},"f:args":{},"f:command":{},"f:env":{".":{},"k:{\"name\":\"AWS_ACCESS_KEY_ID\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"AWS_SECRET_ACCESS_KEY\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}}},"f:image":{},"f:imagePullPolicy":{},"f:name":{},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{}}},"f:dnsPolicy":{},"f:enableServiceLinks":{},"f:imagePullSecrets":{".":{},"k:{\"name\":\"acr-credential-0cd66774c2e1635329078c8ad94a7d92\"}":{},"k:{\"name\":\"acr-credential-518dfd1883737c2a6bde99ed6fee583c\"}":{},"k:{\"name\":\"acr-credential-90a511cb8249950d96ce0336cae093f0\"}":{},"k:{\"name\":\"acr-credential-91029a2c549212d737cbd7e40e1a6ebb\"}":{},"k:{\"name\":\"acr-credential-bbec27b1dbdc90bb0f27dbd225b24e17\"}":{}},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{},"f:terminationGracePeriodSeconds":{},"f:tolerations":{}}}},{"manager":"kube-scheduler","operation":"Update","apiVersion":"v1","time":"2024-03-15T03:44:29Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:conditions":{".":{},"k:{\"type\":\"PodScheduled\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:message":{},"f:reason":{},"f:status":{},"f:type":{}}}}},"subresource":"status"},{"manager":"kubelet","operation":"Update","apiVersion":"v1","time":"2024-03-15T03:46:43Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:conditions":{"k:{\"type\":\"ContainersReady\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Initialized\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Ready\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}}},"f:containerStatuses":{},"f:hostIP":{},"f:phase":{},"f:podIP":{},"f:podIPs":{".":{},"k:{\"ip\":\"172.20.87.130\"}":{".":{},"f:ip":{}}},"f:startTime":{}}},"subresource":"status"}]},"spec":{"volumes":[{"name":"kube-api-access-kcbh4","projected":{"sources":[{"serviceAccountToken":{"expirationSeconds":3607,"path":"token"}},{"configMap":{"name":"kube-root-ca.crt","items":[{"key":"ca.crt","path":"ca.crt"}]}},{"downwardAPI":{"items":[{"path":"namespace","fieldRef":{"apiVersion":"v1","fieldPath":"metadata.namespace"}}]}}],"defaultMode":420}}],"containers":[{"name":"mo-br","image":"registry.cn-hangzhou.aliyuncs.com/mocloud/mo-backup:4fa21f1","command":["/mo_br","restore"],"args":["--backup_dir","s3","--backup_endpoint","http://oss-cn-hangzhou-internal.aliyuncs.com","--backup_bucket","moc-backup-test","--backup_filepath","backup-freetier-02-20240315021618","--backup_region","cn-hangzhou","--backup_access_key_id","$(AWS_ACCESS_KEY_ID)","--backup_secret_access_key","$(AWS_SECRET_ACCESS_KEY)","--restore_dir","s3","--restore_endpoint","http://oss-cn-hangzhou-internal.aliyuncs.com","--restore_access_key_id","$(AWS_ACCESS_KEY_ID)","--restore_secret_access_key","$(AWS_SECRET_ACCESS_KEY)","--restore_bucket","moc-backup-test","--restore_filepath","restore-freetier-02-20240315021618","--restore_region","cn-hangzhou","--log_level","debug"],"env":[{"name":"AWS_ACCESS_KEY_ID","valueFrom":{"secretKeyRef":{"name":"aliyun-moc-backup-test","key":"AWS_ACCESS_KEY_ID"}}},{"name":"AWS_SECRET_ACCESS_KEY","valueFrom":{"secretKeyRef":{"name":"aliyun-moc-backup-test","key":"AWS_SECRET_ACCESS_KEY"}}}],"resources":{"limits":{"cpu":"7","memory":"13Gi"},"requests":{"cpu":"7","memory":"13Gi"}},"volumeMounts":[{"name":"kube-api-access-kcbh4","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Never","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"default","serviceAccount":"default","nodeName":"cn-hangzhou.10.1.160.149","securityContext":{},"imagePullSecrets":[{"name":"acr-credential-0cd66774c2e1635329078c8ad94a7d92"},{"name":"acr-credential-90a511cb8249950d96ce0336cae093f0"},{"name":"acr-credential-518dfd1883737c2a6bde99ed6fee583c"},{"name":"acr-credential-91029a2c549212d737cbd7e40e1a6ebb"},{"name":"acr-credential-bbec27b1dbdc90bb0f27dbd225b24e17"}],"schedulerName":"default-scheduler","tolerations":[{"operator":"Exists","effect":"NoSchedule"},{"key":"node.kubernetes.io/not-ready","operator":"Exists","effect":"NoExecute","tolerationSeconds":300},{"key":"node.kubernetes.io/unreachable","operator":"Exists","effect":"NoExecute","tolerationSeconds":300}],"priority":0,"enableServiceLinks":true,"preemptionPolicy":"PreemptLowerPriority"},"status":{"phase":"Running","conditions":[{"type":"Initialized","status":"True","lastProbeTime":null,"lastTransitionTime":"2024-03-15T03:45:52Z"},{"type":"Ready","status":"True","lastProbeTime":null,"lastTransitionTime":"2024-03-15T03:46:43Z"},{"type":"ContainersReady","status":"True","lastProbeTime":null,"lastTransitionTime":"2024-03-15T03:46:43Z"},{"type":"PodScheduled","status":"True","lastProbeTime":null,"lastTransitionTime":"2024-03-15T03:45:53Z"}],"hostIP":"10.1.160.149","podIP":"172.20.87.130","podIPs":[{"ip":"172.20.87.130"}],"startTime":"2024-03-15T03:45:52Z","containerStatuses":[{"name":"mo-br","state":{"running":{"startedAt":"2024-03-15T03:46:42Z"}},"lastState":{},"ready":true,"restartCount":0,"image":"registry.cn-hangzhou.aliyuncs.com/mocloud/mo-backup:4fa21f1","imageID":"registry.cn-hangzhou.aliyuncs.com/mocloud/mo-backup@sha256:96b3680fe7739eb276013fba516d95a7f11f8cde92170a09d835b9f73d6f7e7b","containerID":"containerd://5e28da92e75da0968262af37e7c688c097e78a2312947729f62dfb222b66b132","started":true}],"qosClass":"Guaranteed"}}

DEBUG    src.tests.upgrade.test_mo_upgrade:test_mo_upgrade.py:219 wait for the conditions by '<lambda>' with args: ('restore-restore-freetier-02', 'moc-upgrade-test'), {}
DEBUG    kubernetes.client.rest:rest.py:235 response body: {"kind":"Pod","apiVersion":"v1","metadata":{"name":"restore-restore-freetier-02","namespace":"moc-upgrade-test","uid":"e16f2157-ce81-46db-a035-d4ceba7cfb90","resourceVersion":"96213815","creationTimestamp":"2024-03-15T03:44:29Z","managedFields":[{"manager":"OpenAPI-Generator","operation":"Update","apiVersion":"v1","time":"2024-03-15T03:44:29Z","fieldsType":"FieldsV1","fieldsV1":{"f:spec":{"f:containers":{"k:{\"name\":\"mo-br\"}":{".":{},"f:args":{},"f:command":{},"f:env":{".":{},"k:{\"name\":\"AWS_ACCESS_KEY_ID\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"AWS_SECRET_ACCESS_KEY\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}}},"f:image":{},"f:imagePullPolicy":{},"f:name":{},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{}}},"f:dnsPolicy":{},"f:enableServiceLinks":{},"f:imagePullSecrets":{".":{},"k:{\"name\":\"acr-credential-0cd66774c2e1635329078c8ad94a7d92\"}":{},"k:{\"name\":\"acr-credential-518dfd1883737c2a6bde99ed6fee583c\"}":{},"k:{\"name\":\"acr-credential-90a511cb8249950d96ce0336cae093f0\"}":{},"k:{\"name\":\"acr-credential-91029a2c549212d737cbd7e40e1a6ebb\"}":{},"k:{\"name\":\"acr-credential-bbec27b1dbdc90bb0f27dbd225b24e17\"}":{}},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{},"f:terminationGracePeriodSeconds":{},"f:tolerations":{}}}},{"manager":"kube-scheduler","operation":"Update","apiVersion":"v1","time":"2024-03-15T03:44:29Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:conditions":{".":{},"k:{\"type\":\"PodScheduled\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:message":{},"f:reason":{},"f:status":{},"f:type":{}}}}},"subresource":"status"},{"manager":"kubelet","operation":"Update","apiVersion":"v1","time":"2024-03-15T03:46:43Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:conditions":{"k:{\"type\":\"ContainersReady\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Initialized\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Ready\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}}},"f:containerStatuses":{},"f:hostIP":{},"f:phase":{},"f:podIP":{},"f:podIPs":{".":{},"k:{\"ip\":\"172.20.87.130\"}":{".":{},"f:ip":{}}},"f:startTime":{}}},"subresource":"status"}]},"spec":{"volumes":[{"name":"kube-api-access-kcbh4","projected":{"sources":[{"serviceAccountToken":{"expirationSeconds":3607,"path":"token"}},{"configMap":{"name":"kube-root-ca.crt","items":[{"key":"ca.crt","path":"ca.crt"}]}},{"downwardAPI":{"items":[{"path":"namespace","fieldRef":{"apiVersion":"v1","fieldPath":"metadata.namespace"}}]}}],"defaultMode":420}}],"containers":[{"name":"mo-br","image":"registry.cn-hangzhou.aliyuncs.com/mocloud/mo-backup:4fa21f1","command":["/mo_br","restore"],"args":["--backup_dir","s3","--backup_endpoint","http://oss-cn-hangzhou-internal.aliyuncs.com","--backup_bucket","moc-backup-test","--backup_filepath","backup-freetier-02-20240315021618","--backup_region","cn-hangzhou","--backup_access_key_id","$(AWS_ACCESS_KEY_ID)","--backup_secret_access_key","$(AWS_SECRET_ACCESS_KEY)","--restore_dir","s3","--restore_endpoint","http://oss-cn-hangzhou-internal.aliyuncs.com","--restore_access_key_id","$(AWS_ACCESS_KEY_ID)","--restore_secret_access_key","$(AWS_SECRET_ACCESS_KEY)","--restore_bucket","moc-backup-test","--restore_filepath","restore-freetier-02-20240315021618","--restore_region","cn-hangzhou","--log_level","debug"],"env":[{"name":"AWS_ACCESS_KEY_ID","valueFrom":{"secretKeyRef":{"name":"aliyun-moc-backup-test","key":"AWS_ACCESS_KEY_ID"}}},{"name":"AWS_SECRET_ACCESS_KEY","valueFrom":{"secretKeyRef":{"name":"aliyun-moc-backup-test","key":"AWS_SECRET_ACCESS_KEY"}}}],"resources":{"limits":{"cpu":"7","memory":"13Gi"},"requests":{"cpu":"7","memory":"13Gi"}},"volumeMounts":[{"name":"kube-api-access-kcbh4","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Never","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"default","serviceAccount":"default","nodeName":"cn-hangzhou.10.1.160.149","securityContext":{},"imagePullSecrets":[{"name":"acr-credential-0cd66774c2e1635329078c8ad94a7d92"},{"name":"acr-credential-90a511cb8249950d96ce0336cae093f0"},{"name":"acr-credential-518dfd1883737c2a6bde99ed6fee583c"},{"name":"acr-credential-91029a2c549212d737cbd7e40e1a6ebb"},{"name":"acr-credential-bbec27b1dbdc90bb0f27dbd225b24e17"}],"schedulerName":"default-scheduler","tolerations":[{"operator":"Exists","effect":"NoSchedule"},{"key":"node.kubernetes.io/not-ready","operator":"Exists","effect":"NoExecute","tolerationSeconds":300},{"key":"node.kubernetes.io/unreachable","operator":"Exists","effect":"NoExecute","tolerationSeconds":300}],"priority":0,"enableServiceLinks":true,"preemptionPolicy":"PreemptLowerPriority"},"status":{"phase":"Running","conditions":[{"type":"Initialized","status":"True","lastProbeTime":null,"lastTransitionTime":"2024-03-15T03:45:52Z"},{"type":"Ready","status":"True","lastProbeTime":null,"lastTransitionTime":"2024-03-15T03:46:43Z"},{"type":"ContainersReady","status":"True","lastProbeTime":null,"lastTransitionTime":"2024-03-15T03:46:43Z"},{"type":"PodScheduled","status":"True","lastProbeTime":null,"lastTransitionTime":"2024-03-15T03:45:53Z"}],"hostIP":"10.1.160.149","podIP":"172.20.87.130","podIPs":[{"ip":"172.20.87.130"}],"startTime":"2024-03-15T03:45:52Z","containerStatuses":[{"name":"mo-br","state":{"running":{"startedAt":"2024-03-15T03:46:42Z"}},"lastState":{},"ready":true,"restartCount":0,"image":"registry.cn-hangzhou.aliyuncs.com/mocloud/mo-backup:4fa21f1","imageID":"registry.cn-hangzhou.aliyuncs.com/mocloud/mo-backup@sha256:96b3680fe7739eb276013fba516d95a7f11f8cde92170a09d835b9f73d6f7e7b","containerID":"containerd://5e28da92e75da0968262af37e7c688c097e78a2312947729f62dfb222b66b132","started":true}],"qosClass":"Guaranteed"}}

DEBUG    src.tests.upgrade.test_mo_upgrade:test_mo_upgrade.py:219 wait for the conditions by '<lambda>' with args: ('restore-restore-freetier-02', 'moc-upgrade-test'), {}
DEBUG    kubernetes.client.rest:rest.py:235 response body: {"kind":"Pod","apiVersion":"v1","metadata":{"name":"restore-restore-freetier-02","namespace":"moc-upgrade-test","uid":"e16f2157-ce81-46db-a035-d4ceba7cfb90","resourceVersion":"96213815","creationTimestamp":"2024-03-15T03:44:29Z","managedFields":[{"manager":"OpenAPI-Generator","operation":"Update","apiVersion":"v1","time":"2024-03-15T03:44:29Z","fieldsType":"FieldsV1","fieldsV1":{"f:spec":{"f:containers":{"k:{\"name\":\"mo-br\"}":{".":{},"f:args":{},"f:command":{},"f:env":{".":{},"k:{\"name\":\"AWS_ACCESS_KEY_ID\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"AWS_SECRET_ACCESS_KEY\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}}},"f:image":{},"f:imagePullPolicy":{},"f:name":{},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{}}},"f:dnsPolicy":{},"f:enableServiceLinks":{},"f:imagePullSecrets":{".":{},"k:{\"name\":\"acr-credential-0cd66774c2e1635329078c8ad94a7d92\"}":{},"k:{\"name\":\"acr-credential-518dfd1883737c2a6bde99ed6fee583c\"}":{},"k:{\"name\":\"acr-credential-90a511cb8249950d96ce0336cae093f0\"}":{},"k:{\"name\":\"acr-credential-91029a2c549212d737cbd7e40e1a6ebb\"}":{},"k:{\"name\":\"acr-credential-bbec27b1dbdc90bb0f27dbd225b24e17\"}":{}},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{},"f:terminationGracePeriodSeconds":{},"f:tolerations":{}}}},{"manager":"kube-scheduler","operation":"Update","apiVersion":"v1","time":"2024-03-15T03:44:29Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:conditions":{".":{},"k:{\"type\":\"PodScheduled\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:message":{},"f:reason":{},"f:status":{},"f:type":{}}}}},"subresource":"status"},{"manager":"kubelet","operation":"Update","apiVersion":"v1","time":"2024-03-15T03:46:43Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:conditions":{"k:{\"type\":\"ContainersReady\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Initialized\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Ready\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}}},"f:containerStatuses":{},"f:hostIP":{},"f:phase":{},"f:podIP":{},"f:podIPs":{".":{},"k:{\"ip\":\"172.20.87.130\"}":{".":{},"f:ip":{}}},"f:startTime":{}}},"subresource":"status"}]},"spec":{"volumes":[{"name":"kube-api-access-kcbh4","projected":{"sources":[{"serviceAccountToken":{"expirationSeconds":3607,"path":"token"}},{"configMap":{"name":"kube-root-ca.crt","items":[{"key":"ca.crt","path":"ca.crt"}]}},{"downwardAPI":{"items":[{"path":"namespace","fieldRef":{"apiVersion":"v1","fieldPath":"metadata.namespace"}}]}}],"defaultMode":420}}],"containers":[{"name":"mo-br","image":"registry.cn-hangzhou.aliyuncs.com/mocloud/mo-backup:4fa21f1","command":["/mo_br","restore"],"args":["--backup_dir","s3","--backup_endpoint","http://oss-cn-hangzhou-internal.aliyuncs.com","--backup_bucket","moc-backup-test","--backup_filepath","backup-freetier-02-20240315021618","--backup_region","cn-hangzhou","--backup_access_key_id","$(AWS_ACCESS_KEY_ID)","--backup_secret_access_key","$(AWS_SECRET_ACCESS_KEY)","--restore_dir","s3","--restore_endpoint","http://oss-cn-hangzhou-internal.aliyuncs.com","--restore_access_key_id","$(AWS_ACCESS_KEY_ID)","--restore_secret_access_key","$(AWS_SECRET_ACCESS_KEY)","--restore_bucket","moc-backup-test","--restore_filepath","restore-freetier-02-20240315021618","--restore_region","cn-hangzhou","--log_level","debug"],"env":[{"name":"AWS_ACCESS_KEY_ID","valueFrom":{"secretKeyRef":{"name":"aliyun-moc-backup-test","key":"AWS_ACCESS_KEY_ID"}}},{"name":"AWS_SECRET_ACCESS_KEY","valueFrom":{"secretKeyRef":{"name":"aliyun-moc-backup-test","key":"AWS_SECRET_ACCESS_KEY"}}}],"resources":{"limits":{"cpu":"7","memory":"13Gi"},"requests":{"cpu":"7","memory":"13Gi"}},"volumeMounts":[{"name":"kube-api-access-kcbh4","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Never","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"default","serviceAccount":"default","nodeName":"cn-hangzhou.10.1.160.149","securityContext":{},"imagePullSecrets":[{"name":"acr-credential-0cd66774c2e1635329078c8ad94a7d92"},{"name":"acr-credential-90a511cb8249950d96ce0336cae093f0"},{"name":"acr-credential-518dfd1883737c2a6bde99ed6fee583c"},{"name":"acr-credential-91029a2c549212d737cbd7e40e1a6ebb"},{"name":"acr-credential-bbec27b1dbdc90bb0f27dbd225b24e17"}],"schedulerName":"default-scheduler","tolerations":[{"operator":"Exists","effect":"NoSchedule"},{"key":"node.kubernetes.io/not-ready","operator":"Exists","effect":"NoExecute","tolerationSeconds":300},{"key":"node.kubernetes.io/unreachable","operator":"Exists","effect":"NoExecute","tolerationSeconds":300}],"priority":0,"enableServiceLinks":true,"preemptionPolicy":"PreemptLowerPriority"},"status":{"phase":"Running","conditions":[{"type":"Initialized","status":"True","lastProbeTime":null,"lastTransitionTime":"2024-03-15T03:45:52Z"},{"type":"Ready","status":"True","lastProbeTime":null,"lastTransitionTime":"2024-03-15T03:46:43Z"},{"type":"ContainersReady","status":"True","lastProbeTime":null,"lastTransitionTime":"2024-03-15T03:46:43Z"},{"type":"PodScheduled","status":"True","lastProbeTime":null,"lastTransitionTime":"2024-03-15T03:45:53Z"}],"hostIP":"10.1.160.149","podIP":"172.20.87.130","podIPs":[{"ip":"172.20.87.130"}],"startTime":"2024-03-15T03:45:52Z","containerStatuses":[{"name":"mo-br","state":{"running":{"startedAt":"2024-03-15T03:46:42Z"}},"lastState":{},"ready":true,"restartCount":0,"image":"registry.cn-hangzhou.aliyuncs.com/mocloud/mo-backup:4fa21f1","imageID":"registry.cn-hangzhou.aliyuncs.com/mocloud/mo-backup@sha256:96b3680fe7739eb276013fba516d95a7f11f8cde92170a09d835b9f73d6f7e7b","containerID":"containerd://5e28da92e75da0968262af37e7c688c097e78a2312947729f62dfb222b66b132","started":true}],"qosClass":"Guaranteed"}}

DEBUG    src.tests.upgrade.test_mo_upgrade:test_mo_upgrade.py:219 wait for the conditions by '<lambda>' with args: ('restore-restore-freetier-02', 'moc-upgrade-test'), {}
DEBUG    kubernetes.client.rest:rest.py:235 response body: {"kind":"Pod","apiVersion":"v1","metadata":{"name":"restore-restore-freetier-02","namespace":"moc-upgrade-test","uid":"e16f2157-ce81-46db-a035-d4ceba7cfb90","resourceVersion":"96213815","creationTimestamp":"2024-03-15T03:44:29Z","managedFields":[{"manager":"OpenAPI-Generator","operation":"Update","apiVersion":"v1","time":"2024-03-15T03:44:29Z","fieldsType":"FieldsV1","fieldsV1":{"f:spec":{"f:containers":{"k:{\"name\":\"mo-br\"}":{".":{},"f:args":{},"f:command":{},"f:env":{".":{},"k:{\"name\":\"AWS_ACCESS_KEY_ID\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"AWS_SECRET_ACCESS_KEY\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}}},"f:image":{},"f:imagePullPolicy":{},"f:name":{},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{}}},"f:dnsPolicy":{},"f:enableServiceLinks":{},"f:imagePullSecrets":{".":{},"k:{\"name\":\"acr-credential-0cd66774c2e1635329078c8ad94a7d92\"}":{},"k:{\"name\":\"acr-credential-518dfd1883737c2a6bde99ed6fee583c\"}":{},"k:{\"name\":\"acr-credential-90a511cb8249950d96ce0336cae093f0\"}":{},"k:{\"name\":\"acr-credential-91029a2c549212d737cbd7e40e1a6ebb\"}":{},"k:{\"name\":\"acr-credential-bbec27b1dbdc90bb0f27dbd225b24e17\"}":{}},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{},"f:terminationGracePeriodSeconds":{},"f:tolerations":{}}}},{"manager":"kube-scheduler","operation":"Update","apiVersion":"v1","time":"2024-03-15T03:44:29Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:conditions":{".":{},"k:{\"type\":\"PodScheduled\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:message":{},"f:reason":{},"f:status":{},"f:type":{}}}}},"subresource":"status"},{"manager":"kubelet","operation":"Update","apiVersion":"v1","time":"2024-03-15T03:46:43Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:conditions":{"k:{\"type\":\"ContainersReady\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Initialized\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Ready\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}}},"f:containerStatuses":{},"f:hostIP":{},"f:phase":{},"f:podIP":{},"f:podIPs":{".":{},"k:{\"ip\":\"172.20.87.130\"}":{".":{},"f:ip":{}}},"f:startTime":{}}},"subresource":"status"}]},"spec":{"volumes":[{"name":"kube-api-access-kcbh4","projected":{"sources":[{"serviceAccountToken":{"expirationSeconds":3607,"path":"token"}},{"configMap":{"name":"kube-root-ca.crt","items":[{"key":"ca.crt","path":"ca.crt"}]}},{"downwardAPI":{"items":[{"path":"namespace","fieldRef":{"apiVersion":"v1","fieldPath":"metadata.namespace"}}]}}],"defaultMode":420}}],"containers":[{"name":"mo-br","image":"registry.cn-hangzhou.aliyuncs.com/mocloud/mo-backup:4fa21f1","command":["/mo_br","restore"],"args":["--backup_dir","s3","--backup_endpoint","http://oss-cn-hangzhou-internal.aliyuncs.com","--backup_bucket","moc-backup-test","--backup_filepath","backup-freetier-02-20240315021618","--backup_region","cn-hangzhou","--backup_access_key_id","$(AWS_ACCESS_KEY_ID)","--backup_secret_access_key","$(AWS_SECRET_ACCESS_KEY)","--restore_dir","s3","--restore_endpoint","http://oss-cn-hangzhou-internal.aliyuncs.com","--restore_access_key_id","$(AWS_ACCESS_KEY_ID)","--restore_secret_access_key","$(AWS_SECRET_ACCESS_KEY)","--restore_bucket","moc-backup-test","--restore_filepath","restore-freetier-02-20240315021618","--restore_region","cn-hangzhou","--log_level","debug"],"env":[{"name":"AWS_ACCESS_KEY_ID","valueFrom":{"secretKeyRef":{"name":"aliyun-moc-backup-test","key":"AWS_ACCESS_KEY_ID"}}},{"name":"AWS_SECRET_ACCESS_KEY","valueFrom":{"secretKeyRef":{"name":"aliyun-moc-backup-test","key":"AWS_SECRET_ACCESS_KEY"}}}],"resources":{"limits":{"cpu":"7","memory":"13Gi"},"requests":{"cpu":"7","memory":"13Gi"}},"volumeMounts":[{"name":"kube-api-access-kcbh4","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Never","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"default","serviceAccount":"default","nodeName":"cn-hangzhou.10.1.160.149","securityContext":{},"imagePullSecrets":[{"name":"acr-credential-0cd66774c2e1635329078c8ad94a7d92"},{"name":"acr-credential-90a511cb8249950d96ce0336cae093f0"},{"name":"acr-credential-518dfd1883737c2a6bde99ed6fee583c"},{"name":"acr-credential-91029a2c549212d737cbd7e40e1a6ebb"},{"name":"acr-credential-bbec27b1dbdc90bb0f27dbd225b24e17"}],"schedulerName":"default-scheduler","tolerations":[{"operator":"Exists","effect":"NoSchedule"},{"key":"node.kubernetes.io/not-ready","operator":"Exists","effect":"NoExecute","tolerationSeconds":300},{"key":"node.kubernetes.io/unreachable","operator":"Exists","effect":"NoExecute","tolerationSeconds":300}],"priority":0,"enableServiceLinks":true,"preemptionPolicy":"PreemptLowerPriority"},"status":{"phase":"Running","conditions":[{"type":"Initialized","status":"True","lastProbeTime":null,"lastTransitionTime":"2024-03-15T03:45:52Z"},{"type":"Ready","status":"True","lastProbeTime":null,"lastTransitionTime":"2024-03-15T03:46:43Z"},{"type":"ContainersReady","status":"True","lastProbeTime":null,"lastTransitionTime":"2024-03-15T03:46:43Z"},{"type":"PodScheduled","status":"True","lastProbeTime":null,"lastTransitionTime":"2024-03-15T03:45:53Z"}],"hostIP":"10.1.160.149","podIP":"172.20.87.130","podIPs":[{"ip":"172.20.87.130"}],"startTime":"2024-03-15T03:45:52Z","containerStatuses":[{"name":"mo-br","state":{"running":{"startedAt":"2024-03-15T03:46:42Z"}},"lastState":{},"ready":true,"restartCount":0,"image":"registry.cn-hangzhou.aliyuncs.com/mocloud/mo-backup:4fa21f1","imageID":"registry.cn-hangzhou.aliyuncs.com/mocloud/mo-backup@sha256:96b3680fe7739eb276013fba516d95a7f11f8cde92170a09d835b9f73d6f7e7b","containerID":"containerd://5e28da92e75da0968262af37e7c688c097e78a2312947729f62dfb222b66b132","started":true}],"qosClass":"Guaranteed"}}

DEBUG    src.tests.upgrade.test_mo_upgrade:test_mo_upgrade.py:219 wait for the conditions by '<lambda>' with args: ('restore-restore-freetier-02', 'moc-upgrade-test'), {}
DEBUG    kubernetes.client.rest:rest.py:235 response body: {"kind":"Pod","apiVersion":"v1","metadata":{"name":"restore-restore-freetier-02","namespace":"moc-upgrade-test","uid":"e16f2157-ce81-46db-a035-d4ceba7cfb90","resourceVersion":"96213815","creationTimestamp":"2024-03-15T03:44:29Z","managedFields":[{"manager":"OpenAPI-Generator","operation":"Update","apiVersion":"v1","time":"2024-03-15T03:44:29Z","fieldsType":"FieldsV1","fieldsV1":{"f:spec":{"f:containers":{"k:{\"name\":\"mo-br\"}":{".":{},"f:args":{},"f:command":{},"f:env":{".":{},"k:{\"name\":\"AWS_ACCESS_KEY_ID\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"AWS_SECRET_ACCESS_KEY\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}}},"f:image":{},"f:imagePullPolicy":{},"f:name":{},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{}}},"f:dnsPolicy":{},"f:enableServiceLinks":{},"f:imagePullSecrets":{".":{},"k:{\"name\":\"acr-credential-0cd66774c2e1635329078c8ad94a7d92\"}":{},"k:{\"name\":\"acr-credential-518dfd1883737c2a6bde99ed6fee583c\"}":{},"k:{\"name\":\"acr-credential-90a511cb8249950d96ce0336cae093f0\"}":{},"k:{\"name\":\"acr-credential-91029a2c549212d737cbd7e40e1a6ebb\"}":{},"k:{\"name\":\"acr-credential-bbec27b1dbdc90bb0f27dbd225b24e17\"}":{}},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{},"f:terminationGracePeriodSeconds":{},"f:tolerations":{}}}},{"manager":"kube-scheduler","operation":"Update","apiVersion":"v1","time":"2024-03-15T03:44:29Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:conditions":{".":{},"k:{\"type\":\"PodScheduled\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:message":{},"f:reason":{},"f:status":{},"f:type":{}}}}},"subresource":"status"},{"manager":"kubelet","operation":"Update","apiVersion":"v1","time":"2024-03-15T03:46:43Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:conditions":{"k:{\"type\":\"ContainersReady\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Initialized\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Ready\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}}},"f:containerStatuses":{},"f:hostIP":{},"f:phase":{},"f:podIP":{},"f:podIPs":{".":{},"k:{\"ip\":\"172.20.87.130\"}":{".":{},"f:ip":{}}},"f:startTime":{}}},"subresource":"status"}]},"spec":{"volumes":[{"name":"kube-api-access-kcbh4","projected":{"sources":[{"serviceAccountToken":{"expirationSeconds":3607,"path":"token"}},{"configMap":{"name":"kube-root-ca.crt","items":[{"key":"ca.crt","path":"ca.crt"}]}},{"downwardAPI":{"items":[{"path":"namespace","fieldRef":{"apiVersion":"v1","fieldPath":"metadata.namespace"}}]}}],"defaultMode":420}}],"containers":[{"name":"mo-br","image":"registry.cn-hangzhou.aliyuncs.com/mocloud/mo-backup:4fa21f1","command":["/mo_br","restore"],"args":["--backup_dir","s3","--backup_endpoint","http://oss-cn-hangzhou-internal.aliyuncs.com","--backup_bucket","moc-backup-test","--backup_filepath","backup-freetier-02-20240315021618","--backup_region","cn-hangzhou","--backup_access_key_id","$(AWS_ACCESS_KEY_ID)","--backup_secret_access_key","$(AWS_SECRET_ACCESS_KEY)","--restore_dir","s3","--restore_endpoint","http://oss-cn-hangzhou-internal.aliyuncs.com","--restore_access_key_id","$(AWS_ACCESS_KEY_ID)","--restore_secret_access_key","$(AWS_SECRET_ACCESS_KEY)","--restore_bucket","moc-backup-test","--restore_filepath","restore-freetier-02-20240315021618","--restore_region","cn-hangzhou","--log_level","debug"],"env":[{"name":"AWS_ACCESS_KEY_ID","valueFrom":{"secretKeyRef":{"name":"aliyun-moc-backup-test","key":"AWS_ACCESS_KEY_ID"}}},{"name":"AWS_SECRET_ACCESS_KEY","valueFrom":{"secretKeyRef":{"name":"aliyun-moc-backup-test","key":"AWS_SECRET_ACCESS_KEY"}}}],"resources":{"limits":{"cpu":"7","memory":"13Gi"},"requests":{"cpu":"7","memory":"13Gi"}},"volumeMounts":[{"name":"kube-api-access-kcbh4","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Never","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"default","serviceAccount":"default","nodeName":"cn-hangzhou.10.1.160.149","securityContext":{},"imagePullSecrets":[{"name":"acr-credential-0cd66774c2e1635329078c8ad94a7d92"},{"name":"acr-credential-90a511cb8249950d96ce0336cae093f0"},{"name":"acr-credential-518dfd1883737c2a6bde99ed6fee583c"},{"name":"acr-credential-91029a2c549212d737cbd7e40e1a6ebb"},{"name":"acr-credential-bbec27b1dbdc90bb0f27dbd225b24e17"}],"schedulerName":"default-scheduler","tolerations":[{"operator":"Exists","effect":"NoSchedule"},{"key":"node.kubernetes.io/not-ready","operator":"Exists","effect":"NoExecute","tolerationSeconds":300},{"key":"node.kubernetes.io/unreachable","operator":"Exists","effect":"NoExecute","tolerationSeconds":300}],"priority":0,"enableServiceLinks":true,"preemptionPolicy":"PreemptLowerPriority"},"status":{"phase":"Running","conditions":[{"type":"Initialized","status":"True","lastProbeTime":null,"lastTransitionTime":"2024-03-15T03:45:52Z"},{"type":"Ready","status":"True","lastProbeTime":null,"lastTransitionTime":"2024-03-15T03:46:43Z"},{"type":"ContainersReady","status":"True","lastProbeTime":null,"lastTransitionTime":"2024-03-15T03:46:43Z"},{"type":"PodScheduled","status":"True","lastProbeTime":null,"lastTransitionTime":"2024-03-15T03:45:53Z"}],"hostIP":"10.1.160.149","podIP":"172.20.87.130","podIPs":[{"ip":"172.20.87.130"}],"startTime":"2024-03-15T03:45:52Z","containerStatuses":[{"name":"mo-br","state":{"running":{"startedAt":"2024-03-15T03:46:42Z"}},"lastState":{},"ready":true,"restartCount":0,"image":"registry.cn-hangzhou.aliyuncs.com/mocloud/mo-backup:4fa21f1","imageID":"registry.cn-hangzhou.aliyuncs.com/mocloud/mo-backup@sha256:96b3680fe7739eb276013fba516d95a7f11f8cde92170a09d835b9f73d6f7e7b","containerID":"containerd://5e28da92e75da0968262af37e7c688c097e78a2312947729f62dfb222b66b132","started":true}],"qosClass":"Guaranteed"}}

DEBUG    src.tests.upgrade.test_mo_upgrade:test_mo_upgrade.py:219 wait for the conditions by '<lambda>' with args: ('restore-restore-freetier-02', 'moc-upgrade-test'), {}
DEBUG    kubernetes.client.rest:rest.py:235 response body: {"kind":"Pod","apiVersion":"v1","metadata":{"name":"restore-restore-freetier-02","namespace":"moc-upgrade-test","uid":"e16f2157-ce81-46db-a035-d4ceba7cfb90","resourceVersion":"96213815","creationTimestamp":"2024-03-15T03:44:29Z","managedFields":[{"manager":"OpenAPI-Generator","operation":"Update","apiVersion":"v1","time":"2024-03-15T03:44:29Z","fieldsType":"FieldsV1","fieldsV1":{"f:spec":{"f:containers":{"k:{\"name\":\"mo-br\"}":{".":{},"f:args":{},"f:command":{},"f:env":{".":{},"k:{\"name\":\"AWS_ACCESS_KEY_ID\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"AWS_SECRET_ACCESS_KEY\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}}},"f:image":{},"f:imagePullPolicy":{},"f:name":{},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{}}},"f:dnsPolicy":{},"f:enableServiceLinks":{},"f:imagePullSecrets":{".":{},"k:{\"name\":\"acr-credential-0cd66774c2e1635329078c8ad94a7d92\"}":{},"k:{\"name\":\"acr-credential-518dfd1883737c2a6bde99ed6fee583c\"}":{},"k:{\"name\":\"acr-credential-90a511cb8249950d96ce0336cae093f0\"}":{},"k:{\"name\":\"acr-credential-91029a2c549212d737cbd7e40e1a6ebb\"}":{},"k:{\"name\":\"acr-credential-bbec27b1dbdc90bb0f27dbd225b24e17\"}":{}},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{},"f:terminationGracePeriodSeconds":{},"f:tolerations":{}}}},{"manager":"kube-scheduler","operation":"Update","apiVersion":"v1","time":"2024-03-15T03:44:29Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:conditions":{".":{},"k:{\"type\":\"PodScheduled\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:message":{},"f:reason":{},"f:status":{},"f:type":{}}}}},"subresource":"status"},{"manager":"kubelet","operation":"Update","apiVersion":"v1","time":"2024-03-15T03:46:43Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:conditions":{"k:{\"type\":\"ContainersReady\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Initialized\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Ready\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}}},"f:containerStatuses":{},"f:hostIP":{},"f:phase":{},"f:podIP":{},"f:podIPs":{".":{},"k:{\"ip\":\"172.20.87.130\"}":{".":{},"f:ip":{}}},"f:startTime":{}}},"subresource":"status"}]},"spec":{"volumes":[{"name":"kube-api-access-kcbh4","projected":{"sources":[{"serviceAccountToken":{"expirationSeconds":3607,"path":"token"}},{"configMap":{"name":"kube-root-ca.crt","items":[{"key":"ca.crt","path":"ca.crt"}]}},{"downwardAPI":{"items":[{"path":"namespace","fieldRef":{"apiVersion":"v1","fieldPath":"metadata.namespace"}}]}}],"defaultMode":420}}],"containers":[{"name":"mo-br","image":"registry.cn-hangzhou.aliyuncs.com/mocloud/mo-backup:4fa21f1","command":["/mo_br","restore"],"args":["--backup_dir","s3","--backup_endpoint","http://oss-cn-hangzhou-internal.aliyuncs.com","--backup_bucket","moc-backup-test","--backup_filepath","backup-freetier-02-20240315021618","--backup_region","cn-hangzhou","--backup_access_key_id","$(AWS_ACCESS_KEY_ID)","--backup_secret_access_key","$(AWS_SECRET_ACCESS_KEY)","--restore_dir","s3","--restore_endpoint","http://oss-cn-hangzhou-internal.aliyuncs.com","--restore_access_key_id","$(AWS_ACCESS_KEY_ID)","--restore_secret_access_key","$(AWS_SECRET_ACCESS_KEY)","--restore_bucket","moc-backup-test","--restore_filepath","restore-freetier-02-20240315021618","--restore_region","cn-hangzhou","--log_level","debug"],"env":[{"name":"AWS_ACCESS_KEY_ID","valueFrom":{"secretKeyRef":{"name":"aliyun-moc-backup-test","key":"AWS_ACCESS_KEY_ID"}}},{"name":"AWS_SECRET_ACCESS_KEY","valueFrom":{"secretKeyRef":{"name":"aliyun-moc-backup-test","key":"AWS_SECRET_ACCESS_KEY"}}}],"resources":{"limits":{"cpu":"7","memory":"13Gi"},"requests":{"cpu":"7","memory":"13Gi"}},"volumeMounts":[{"name":"kube-api-access-kcbh4","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Never","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"default","serviceAccount":"default","nodeName":"cn-hangzhou.10.1.160.149","securityContext":{},"imagePullSecrets":[{"name":"acr-credential-0cd66774c2e1635329078c8ad94a7d92"},{"name":"acr-credential-90a511cb8249950d96ce0336cae093f0"},{"name":"acr-credential-518dfd1883737c2a6bde99ed6fee583c"},{"name":"acr-credential-91029a2c549212d737cbd7e40e1a6ebb"},{"name":"acr-credential-bbec27b1dbdc90bb0f27dbd225b24e17"}],"schedulerName":"default-scheduler","tolerations":[{"operator":"Exists","effect":"NoSchedule"},{"key":"node.kubernetes.io/not-ready","operator":"Exists","effect":"NoExecute","tolerationSeconds":300},{"key":"node.kubernetes.io/unreachable","operator":"Exists","effect":"NoExecute","tolerationSeconds":300}],"priority":0,"enableServiceLinks":true,"preemptionPolicy":"PreemptLowerPriority"},"status":{"phase":"Running","conditions":[{"type":"Initialized","status":"True","lastProbeTime":null,"lastTransitionTime":"2024-03-15T03:45:52Z"},{"type":"Ready","status":"True","lastProbeTime":null,"lastTransitionTime":"2024-03-15T03:46:43Z"},{"type":"ContainersReady","status":"True","lastProbeTime":null,"lastTransitionTime":"2024-03-15T03:46:43Z"},{"type":"PodScheduled","status":"True","lastProbeTime":null,"lastTransitionTime":"2024-03-15T03:45:53Z"}],"hostIP":"10.1.160.149","podIP":"172.20.87.130","podIPs":[{"ip":"172.20.87.130"}],"startTime":"2024-03-15T03:45:52Z","containerStatuses":[{"name":"mo-br","state":{"running":{"startedAt":"2024-03-15T03:46:42Z"}},"lastState":{},"ready":true,"restartCount":0,"image":"registry.cn-hangzhou.aliyuncs.com/mocloud/mo-backup:4fa21f1","imageID":"registry.cn-hangzhou.aliyuncs.com/mocloud/mo-backup@sha256:96b3680fe7739eb276013fba516d95a7f11f8cde92170a09d835b9f73d6f7e7b","containerID":"containerd://5e28da92e75da0968262af37e7c688c097e78a2312947729f62dfb222b66b132","started":true}],"qosClass":"Guaranteed"}}

DEBUG    src.tests.upgrade.test_mo_upgrade:test_mo_upgrade.py:219 wait for the conditions by '<lambda>' with args: ('restore-restore-freetier-02', 'moc-upgrade-test'), {}
DEBUG    kubernetes.client.rest:rest.py:235 response body: {"kind":"Pod","apiVersion":"v1","metadata":{"name":"restore-restore-freetier-02","namespace":"moc-upgrade-test","uid":"e16f2157-ce81-46db-a035-d4ceba7cfb90","resourceVersion":"96213815","creationTimestamp":"2024-03-15T03:44:29Z","managedFields":[{"manager":"OpenAPI-Generator","operation":"Update","apiVersion":"v1","time":"2024-03-15T03:44:29Z","fieldsType":"FieldsV1","fieldsV1":{"f:spec":{"f:containers":{"k:{\"name\":\"mo-br\"}":{".":{},"f:args":{},"f:command":{},"f:env":{".":{},"k:{\"name\":\"AWS_ACCESS_KEY_ID\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"AWS_SECRET_ACCESS_KEY\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}}},"f:image":{},"f:imagePullPolicy":{},"f:name":{},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{}}},"f:dnsPolicy":{},"f:enableServiceLinks":{},"f:imagePullSecrets":{".":{},"k:{\"name\":\"acr-credential-0cd66774c2e1635329078c8ad94a7d92\"}":{},"k:{\"name\":\"acr-credential-518dfd1883737c2a6bde99ed6fee583c\"}":{},"k:{\"name\":\"acr-credential-90a511cb8249950d96ce0336cae093f0\"}":{},"k:{\"name\":\"acr-credential-91029a2c549212d737cbd7e40e1a6ebb\"}":{},"k:{\"name\":\"acr-credential-bbec27b1dbdc90bb0f27dbd225b24e17\"}":{}},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{},"f:terminationGracePeriodSeconds":{},"f:tolerations":{}}}},{"manager":"kube-scheduler","operation":"Update","apiVersion":"v1","time":"2024-03-15T03:44:29Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:conditions":{".":{},"k:{\"type\":\"PodScheduled\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:message":{},"f:reason":{},"f:status":{},"f:type":{}}}}},"subresource":"status"},{"manager":"kubelet","operation":"Update","apiVersion":"v1","time":"2024-03-15T03:46:43Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:conditions":{"k:{\"type\":\"ContainersReady\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Initialized\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Ready\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}}},"f:containerStatuses":{},"f:hostIP":{},"f:phase":{},"f:podIP":{},"f:podIPs":{".":{},"k:{\"ip\":\"172.20.87.130\"}":{".":{},"f:ip":{}}},"f:startTime":{}}},"subresource":"status"}]},"spec":{"volumes":[{"name":"kube-api-access-kcbh4","projected":{"sources":[{"serviceAccountToken":{"expirationSeconds":3607,"path":"token"}},{"configMap":{"name":"kube-root-ca.crt","items":[{"key":"ca.crt","path":"ca.crt"}]}},{"downwardAPI":{"items":[{"path":"namespace","fieldRef":{"apiVersion":"v1","fieldPath":"metadata.namespace"}}]}}],"defaultMode":420}}],"containers":[{"name":"mo-br","image":"registry.cn-hangzhou.aliyuncs.com/mocloud/mo-backup:4fa21f1","command":["/mo_br","restore"],"args":["--backup_dir","s3","--backup_endpoint","http://oss-cn-hangzhou-internal.aliyuncs.com","--backup_bucket","moc-backup-test","--backup_filepath","backup-freetier-02-20240315021618","--backup_region","cn-hangzhou","--backup_access_key_id","$(AWS_ACCESS_KEY_ID)","--backup_secret_access_key","$(AWS_SECRET_ACCESS_KEY)","--restore_dir","s3","--restore_endpoint","http://oss-cn-hangzhou-internal.aliyuncs.com","--restore_access_key_id","$(AWS_ACCESS_KEY_ID)","--restore_secret_access_key","$(AWS_SECRET_ACCESS_KEY)","--restore_bucket","moc-backup-test","--restore_filepath","restore-freetier-02-20240315021618","--restore_region","cn-hangzhou","--log_level","debug"],"env":[{"name":"AWS_ACCESS_KEY_ID","valueFrom":{"secretKeyRef":{"name":"aliyun-moc-backup-test","key":"AWS_ACCESS_KEY_ID"}}},{"name":"AWS_SECRET_ACCESS_KEY","valueFrom":{"secretKeyRef":{"name":"aliyun-moc-backup-test","key":"AWS_SECRET_ACCESS_KEY"}}}],"resources":{"limits":{"cpu":"7","memory":"13Gi"},"requests":{"cpu":"7","memory":"13Gi"}},"volumeMounts":[{"name":"kube-api-access-kcbh4","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Never","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"default","serviceAccount":"default","nodeName":"cn-hangzhou.10.1.160.149","securityContext":{},"imagePullSecrets":[{"name":"acr-credential-0cd66774c2e1635329078c8ad94a7d92"},{"name":"acr-credential-90a511cb8249950d96ce0336cae093f0"},{"name":"acr-credential-518dfd1883737c2a6bde99ed6fee583c"},{"name":"acr-credential-91029a2c549212d737cbd7e40e1a6ebb"},{"name":"acr-credential-bbec27b1dbdc90bb0f27dbd225b24e17"}],"schedulerName":"default-scheduler","tolerations":[{"operator":"Exists","effect":"NoSchedule"},{"key":"node.kubernetes.io/not-ready","operator":"Exists","effect":"NoExecute","tolerationSeconds":300},{"key":"node.kubernetes.io/unreachable","operator":"Exists","effect":"NoExecute","tolerationSeconds":300}],"priority":0,"enableServiceLinks":true,"preemptionPolicy":"PreemptLowerPriority"},"status":{"phase":"Running","conditions":[{"type":"Initialized","status":"True","lastProbeTime":null,"lastTransitionTime":"2024-03-15T03:45:52Z"},{"type":"Ready","status":"True","lastProbeTime":null,"lastTransitionTime":"2024-03-15T03:46:43Z"},{"type":"ContainersReady","status":"True","lastProbeTime":null,"lastTransitionTime":"2024-03-15T03:46:43Z"},{"type":"PodScheduled","status":"True","lastProbeTime":null,"lastTransitionTime":"2024-03-15T03:45:53Z"}],"hostIP":"10.1.160.149","podIP":"172.20.87.130","podIPs":[{"ip":"172.20.87.130"}],"startTime":"2024-03-15T03:45:52Z","containerStatuses":[{"name":"mo-br","state":{"running":{"startedAt":"2024-03-15T03:46:42Z"}},"lastState":{},"ready":true,"restartCount":0,"image":"registry.cn-hangzhou.aliyuncs.com/mocloud/mo-backup:4fa21f1","imageID":"registry.cn-hangzhou.aliyuncs.com/mocloud/mo-backup@sha256:96b3680fe7739eb276013fba516d95a7f11f8cde92170a09d835b9f73d6f7e7b","containerID":"containerd://5e28da92e75da0968262af37e7c688c097e78a2312947729f62dfb222b66b132","started":true}],"qosClass":"Guaranteed"}}

DEBUG    src.tests.upgrade.test_mo_upgrade:test_mo_upgrade.py:219 wait for the conditions by '<lambda>' with args: ('restore-restore-freetier-02', 'moc-upgrade-test'), {}
DEBUG    kubernetes.client.rest:rest.py:235 response body: {"kind":"Pod","apiVersion":"v1","metadata":{"name":"restore-restore-freetier-02","namespace":"moc-upgrade-test","uid":"e16f2157-ce81-46db-a035-d4ceba7cfb90","resourceVersion":"96213815","creationTimestamp":"2024-03-15T03:44:29Z","managedFields":[{"manager":"OpenAPI-Generator","operation":"Update","apiVersion":"v1","time":"2024-03-15T03:44:29Z","fieldsType":"FieldsV1","fieldsV1":{"f:spec":{"f:containers":{"k:{\"name\":\"mo-br\"}":{".":{},"f:args":{},"f:command":{},"f:env":{".":{},"k:{\"name\":\"AWS_ACCESS_KEY_ID\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"AWS_SECRET_ACCESS_KEY\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}}},"f:image":{},"f:imagePullPolicy":{},"f:name":{},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{}}},"f:dnsPolicy":{},"f:enableServiceLinks":{},"f:imagePullSecrets":{".":{},"k:{\"name\":\"acr-credential-0cd66774c2e1635329078c8ad94a7d92\"}":{},"k:{\"name\":\"acr-credential-518dfd1883737c2a6bde99ed6fee583c\"}":{},"k:{\"name\":\"acr-credential-90a511cb8249950d96ce0336cae093f0\"}":{},"k:{\"name\":\"acr-credential-91029a2c549212d737cbd7e40e1a6ebb\"}":{},"k:{\"name\":\"acr-credential-bbec27b1dbdc90bb0f27dbd225b24e17\"}":{}},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{},"f:terminationGracePeriodSeconds":{},"f:tolerations":{}}}},{"manager":"kube-scheduler","operation":"Update","apiVersion":"v1","time":"2024-03-15T03:44:29Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:conditions":{".":{},"k:{\"type\":\"PodScheduled\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:message":{},"f:reason":{},"f:status":{},"f:type":{}}}}},"subresource":"status"},{"manager":"kubelet","operation":"Update","apiVersion":"v1","time":"2024-03-15T03:46:43Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:conditions":{"k:{\"type\":\"ContainersReady\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Initialized\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Ready\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}}},"f:containerStatuses":{},"f:hostIP":{},"f:phase":{},"f:podIP":{},"f:podIPs":{".":{},"k:{\"ip\":\"172.20.87.130\"}":{".":{},"f:ip":{}}},"f:startTime":{}}},"subresource":"status"}]},"spec":{"volumes":[{"name":"kube-api-access-kcbh4","projected":{"sources":[{"serviceAccountToken":{"expirationSeconds":3607,"path":"token"}},{"configMap":{"name":"kube-root-ca.crt","items":[{"key":"ca.crt","path":"ca.crt"}]}},{"downwardAPI":{"items":[{"path":"namespace","fieldRef":{"apiVersion":"v1","fieldPath":"metadata.namespace"}}]}}],"defaultMode":420}}],"containers":[{"name":"mo-br","image":"registry.cn-hangzhou.aliyuncs.com/mocloud/mo-backup:4fa21f1","command":["/mo_br","restore"],"args":["--backup_dir","s3","--backup_endpoint","http://oss-cn-hangzhou-internal.aliyuncs.com","--backup_bucket","moc-backup-test","--backup_filepath","backup-freetier-02-20240315021618","--backup_region","cn-hangzhou","--backup_access_key_id","$(AWS_ACCESS_KEY_ID)","--backup_secret_access_key","$(AWS_SECRET_ACCESS_KEY)","--restore_dir","s3","--restore_endpoint","http://oss-cn-hangzhou-internal.aliyuncs.com","--restore_access_key_id","$(AWS_ACCESS_KEY_ID)","--restore_secret_access_key","$(AWS_SECRET_ACCESS_KEY)","--restore_bucket","moc-backup-test","--restore_filepath","restore-freetier-02-20240315021618","--restore_region","cn-hangzhou","--log_level","debug"],"env":[{"name":"AWS_ACCESS_KEY_ID","valueFrom":{"secretKeyRef":{"name":"aliyun-moc-backup-test","key":"AWS_ACCESS_KEY_ID"}}},{"name":"AWS_SECRET_ACCESS_KEY","valueFrom":{"secretKeyRef":{"name":"aliyun-moc-backup-test","key":"AWS_SECRET_ACCESS_KEY"}}}],"resources":{"limits":{"cpu":"7","memory":"13Gi"},"requests":{"cpu":"7","memory":"13Gi"}},"volumeMounts":[{"name":"kube-api-access-kcbh4","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Never","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"default","serviceAccount":"default","nodeName":"cn-hangzhou.10.1.160.149","securityContext":{},"imagePullSecrets":[{"name":"acr-credential-0cd66774c2e1635329078c8ad94a7d92"},{"name":"acr-credential-90a511cb8249950d96ce0336cae093f0"},{"name":"acr-credential-518dfd1883737c2a6bde99ed6fee583c"},{"name":"acr-credential-91029a2c549212d737cbd7e40e1a6ebb"},{"name":"acr-credential-bbec27b1dbdc90bb0f27dbd225b24e17"}],"schedulerName":"default-scheduler","tolerations":[{"operator":"Exists","effect":"NoSchedule"},{"key":"node.kubernetes.io/not-ready","operator":"Exists","effect":"NoExecute","tolerationSeconds":300},{"key":"node.kubernetes.io/unreachable","operator":"Exists","effect":"NoExecute","tolerationSeconds":300}],"priority":0,"enableServiceLinks":true,"preemptionPolicy":"PreemptLowerPriority"},"status":{"phase":"Running","conditions":[{"type":"Initialized","status":"True","lastProbeTime":null,"lastTransitionTime":"2024-03-15T03:45:52Z"},{"type":"Ready","status":"True","lastProbeTime":null,"lastTransitionTime":"2024-03-15T03:46:43Z"},{"type":"ContainersReady","status":"True","lastProbeTime":null,"lastTransitionTime":"2024-03-15T03:46:43Z"},{"type":"PodScheduled","status":"True","lastProbeTime":null,"lastTransitionTime":"2024-03-15T03:45:53Z"}],"hostIP":"10.1.160.149","podIP":"172.20.87.130","podIPs":[{"ip":"172.20.87.130"}],"startTime":"2024-03-15T03:45:52Z","containerStatuses":[{"name":"mo-br","state":{"running":{"startedAt":"2024-03-15T03:46:42Z"}},"lastState":{},"ready":true,"restartCount":0,"image":"registry.cn-hangzhou.aliyuncs.com/mocloud/mo-backup:4fa21f1","imageID":"registry.cn-hangzhou.aliyuncs.com/mocloud/mo-backup@sha256:96b3680fe7739eb276013fba516d95a7f11f8cde92170a09d835b9f73d6f7e7b","containerID":"containerd://5e28da92e75da0968262af37e7c688c097e78a2312947729f62dfb222b66b132","started":true}],"qosClass":"Guaranteed"}}

DEBUG    src.tests.upgrade.test_mo_upgrade:test_mo_upgrade.py:219 wait for the conditions by '<lambda>' with args: ('restore-restore-freetier-02', 'moc-upgrade-test'), {}
DEBUG    kubernetes.client.rest:rest.py:235 response body: {"kind":"Pod","apiVersion":"v1","metadata":{"name":"restore-restore-freetier-02","namespace":"moc-upgrade-test","uid":"e16f2157-ce81-46db-a035-d4ceba7cfb90","resourceVersion":"96213815","creationTimestamp":"2024-03-15T03:44:29Z","managedFields":[{"manager":"OpenAPI-Generator","operation":"Update","apiVersion":"v1","time":"2024-03-15T03:44:29Z","fieldsType":"FieldsV1","fieldsV1":{"f:spec":{"f:containers":{"k:{\"name\":\"mo-br\"}":{".":{},"f:args":{},"f:command":{},"f:env":{".":{},"k:{\"name\":\"AWS_ACCESS_KEY_ID\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"AWS_SECRET_ACCESS_KEY\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}}},"f:image":{},"f:imagePullPolicy":{},"f:name":{},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{}}},"f:dnsPolicy":{},"f:enableServiceLinks":{},"f:imagePullSecrets":{".":{},"k:{\"name\":\"acr-credential-0cd66774c2e1635329078c8ad94a7d92\"}":{},"k:{\"name\":\"acr-credential-518dfd1883737c2a6bde99ed6fee583c\"}":{},"k:{\"name\":\"acr-credential-90a511cb8249950d96ce0336cae093f0\"}":{},"k:{\"name\":\"acr-credential-91029a2c549212d737cbd7e40e1a6ebb\"}":{},"k:{\"name\":\"acr-credential-bbec27b1dbdc90bb0f27dbd225b24e17\"}":{}},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{},"f:terminationGracePeriodSeconds":{},"f:tolerations":{}}}},{"manager":"kube-scheduler","operation":"Update","apiVersion":"v1","time":"2024-03-15T03:44:29Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:conditions":{".":{},"k:{\"type\":\"PodScheduled\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:message":{},"f:reason":{},"f:status":{},"f:type":{}}}}},"subresource":"status"},{"manager":"kubelet","operation":"Update","apiVersion":"v1","time":"2024-03-15T03:46:43Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:conditions":{"k:{\"type\":\"ContainersReady\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Initialized\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Ready\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}}},"f:containerStatuses":{},"f:hostIP":{},"f:phase":{},"f:podIP":{},"f:podIPs":{".":{},"k:{\"ip\":\"172.20.87.130\"}":{".":{},"f:ip":{}}},"f:startTime":{}}},"subresource":"status"}]},"spec":{"volumes":[{"name":"kube-api-access-kcbh4","projected":{"sources":[{"serviceAccountToken":{"expirationSeconds":3607,"path":"token"}},{"configMap":{"name":"kube-root-ca.crt","items":[{"key":"ca.crt","path":"ca.crt"}]}},{"downwardAPI":{"items":[{"path":"namespace","fieldRef":{"apiVersion":"v1","fieldPath":"metadata.namespace"}}]}}],"defaultMode":420}}],"containers":[{"name":"mo-br","image":"registry.cn-hangzhou.aliyuncs.com/mocloud/mo-backup:4fa21f1","command":["/mo_br","restore"],"args":["--backup_dir","s3","--backup_endpoint","http://oss-cn-hangzhou-internal.aliyuncs.com","--backup_bucket","moc-backup-test","--backup_filepath","backup-freetier-02-20240315021618","--backup_region","cn-hangzhou","--backup_access_key_id","$(AWS_ACCESS_KEY_ID)","--backup_secret_access_key","$(AWS_SECRET_ACCESS_KEY)","--restore_dir","s3","--restore_endpoint","http://oss-cn-hangzhou-internal.aliyuncs.com","--restore_access_key_id","$(AWS_ACCESS_KEY_ID)","--restore_secret_access_key","$(AWS_SECRET_ACCESS_KEY)","--restore_bucket","moc-backup-test","--restore_filepath","restore-freetier-02-20240315021618","--restore_region","cn-hangzhou","--log_level","debug"],"env":[{"name":"AWS_ACCESS_KEY_ID","valueFrom":{"secretKeyRef":{"name":"aliyun-moc-backup-test","key":"AWS_ACCESS_KEY_ID"}}},{"name":"AWS_SECRET_ACCESS_KEY","valueFrom":{"secretKeyRef":{"name":"aliyun-moc-backup-test","key":"AWS_SECRET_ACCESS_KEY"}}}],"resources":{"limits":{"cpu":"7","memory":"13Gi"},"requests":{"cpu":"7","memory":"13Gi"}},"volumeMounts":[{"name":"kube-api-access-kcbh4","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Never","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"default","serviceAccount":"default","nodeName":"cn-hangzhou.10.1.160.149","securityContext":{},"imagePullSecrets":[{"name":"acr-credential-0cd66774c2e1635329078c8ad94a7d92"},{"name":"acr-credential-90a511cb8249950d96ce0336cae093f0"},{"name":"acr-credential-518dfd1883737c2a6bde99ed6fee583c"},{"name":"acr-credential-91029a2c549212d737cbd7e40e1a6ebb"},{"name":"acr-credential-bbec27b1dbdc90bb0f27dbd225b24e17"}],"schedulerName":"default-scheduler","tolerations":[{"operator":"Exists","effect":"NoSchedule"},{"key":"node.kubernetes.io/not-ready","operator":"Exists","effect":"NoExecute","tolerationSeconds":300},{"key":"node.kubernetes.io/unreachable","operator":"Exists","effect":"NoExecute","tolerationSeconds":300}],"priority":0,"enableServiceLinks":true,"preemptionPolicy":"PreemptLowerPriority"},"status":{"phase":"Running","conditions":[{"type":"Initialized","status":"True","lastProbeTime":null,"lastTransitionTime":"2024-03-15T03:45:52Z"},{"type":"Ready","status":"True","lastProbeTime":null,"lastTransitionTime":"2024-03-15T03:46:43Z"},{"type":"ContainersReady","status":"True","lastProbeTime":null,"lastTransitionTime":"2024-03-15T03:46:43Z"},{"type":"PodScheduled","status":"True","lastProbeTime":null,"lastTransitionTime":"2024-03-15T03:45:53Z"}],"hostIP":"10.1.160.149","podIP":"172.20.87.130","podIPs":[{"ip":"172.20.87.130"}],"startTime":"2024-03-15T03:45:52Z","containerStatuses":[{"name":"mo-br","state":{"running":{"startedAt":"2024-03-15T03:46:42Z"}},"lastState":{},"ready":true,"restartCount":0,"image":"registry.cn-hangzhou.aliyuncs.com/mocloud/mo-backup:4fa21f1","imageID":"registry.cn-hangzhou.aliyuncs.com/mocloud/mo-backup@sha256:96b3680fe7739eb276013fba516d95a7f11f8cde92170a09d835b9f73d6f7e7b","containerID":"containerd://5e28da92e75da0968262af37e7c688c097e78a2312947729f62dfb222b66b132","started":true}],"qosClass":"Guaranteed"}}

DEBUG    src.tests.upgrade.test_mo_upgrade:test_mo_upgrade.py:219 wait for the conditions by '<lambda>' with args: ('restore-restore-freetier-02', 'moc-upgrade-test'), {}
DEBUG    kubernetes.client.rest:rest.py:235 response body: {"kind":"Pod","apiVersion":"v1","metadata":{"name":"restore-restore-freetier-02","namespace":"moc-upgrade-test","uid":"e16f2157-ce81-46db-a035-d4ceba7cfb90","resourceVersion":"96213815","creationTimestamp":"2024-03-15T03:44:29Z","managedFields":[{"manager":"OpenAPI-Generator","operation":"Update","apiVersion":"v1","time":"2024-03-15T03:44:29Z","fieldsType":"FieldsV1","fieldsV1":{"f:spec":{"f:containers":{"k:{\"name\":\"mo-br\"}":{".":{},"f:args":{},"f:command":{},"f:env":{".":{},"k:{\"name\":\"AWS_ACCESS_KEY_ID\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"AWS_SECRET_ACCESS_KEY\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}}},"f:image":{},"f:imagePullPolicy":{},"f:name":{},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{}}},"f:dnsPolicy":{},"f:enableServiceLinks":{},"f:imagePullSecrets":{".":{},"k:{\"name\":\"acr-credential-0cd66774c2e1635329078c8ad94a7d92\"}":{},"k:{\"name\":\"acr-credential-518dfd1883737c2a6bde99ed6fee583c\"}":{},"k:{\"name\":\"acr-credential-90a511cb8249950d96ce0336cae093f0\"}":{},"k:{\"name\":\"acr-credential-91029a2c549212d737cbd7e40e1a6ebb\"}":{},"k:{\"name\":\"acr-credential-bbec27b1dbdc90bb0f27dbd225b24e17\"}":{}},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{},"f:terminationGracePeriodSeconds":{},"f:tolerations":{}}}},{"manager":"kube-scheduler","operation":"Update","apiVersion":"v1","time":"2024-03-15T03:44:29Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:conditions":{".":{},"k:{\"type\":\"PodScheduled\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:message":{},"f:reason":{},"f:status":{},"f:type":{}}}}},"subresource":"status"},{"manager":"kubelet","operation":"Update","apiVersion":"v1","time":"2024-03-15T03:46:43Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:conditions":{"k:{\"type\":\"ContainersReady\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Initialized\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Ready\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}}},"f:containerStatuses":{},"f:hostIP":{},"f:phase":{},"f:podIP":{},"f:podIPs":{".":{},"k:{\"ip\":\"172.20.87.130\"}":{".":{},"f:ip":{}}},"f:startTime":{}}},"subresource":"status"}]},"spec":{"volumes":[{"name":"kube-api-access-kcbh4","projected":{"sources":[{"serviceAccountToken":{"expirationSeconds":3607,"path":"token"}},{"configMap":{"name":"kube-root-ca.crt","items":[{"key":"ca.crt","path":"ca.crt"}]}},{"downwardAPI":{"items":[{"path":"namespace","fieldRef":{"apiVersion":"v1","fieldPath":"metadata.namespace"}}]}}],"defaultMode":420}}],"containers":[{"name":"mo-br","image":"registry.cn-hangzhou.aliyuncs.com/mocloud/mo-backup:4fa21f1","command":["/mo_br","restore"],"args":["--backup_dir","s3","--backup_endpoint","http://oss-cn-hangzhou-internal.aliyuncs.com","--backup_bucket","moc-backup-test","--backup_filepath","backup-freetier-02-20240315021618","--backup_region","cn-hangzhou","--backup_access_key_id","$(AWS_ACCESS_KEY_ID)","--backup_secret_access_key","$(AWS_SECRET_ACCESS_KEY)","--restore_dir","s3","--restore_endpoint","http://oss-cn-hangzhou-internal.aliyuncs.com","--restore_access_key_id","$(AWS_ACCESS_KEY_ID)","--restore_secret_access_key","$(AWS_SECRET_ACCESS_KEY)","--restore_bucket","moc-backup-test","--restore_filepath","restore-freetier-02-20240315021618","--restore_region","cn-hangzhou","--log_level","debug"],"env":[{"name":"AWS_ACCESS_KEY_ID","valueFrom":{"secretKeyRef":{"name":"aliyun-moc-backup-test","key":"AWS_ACCESS_KEY_ID"}}},{"name":"AWS_SECRET_ACCESS_KEY","valueFrom":{"secretKeyRef":{"name":"aliyun-moc-backup-test","key":"AWS_SECRET_ACCESS_KEY"}}}],"resources":{"limits":{"cpu":"7","memory":"13Gi"},"requests":{"cpu":"7","memory":"13Gi"}},"volumeMounts":[{"name":"kube-api-access-kcbh4","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Never","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"default","serviceAccount":"default","nodeName":"cn-hangzhou.10.1.160.149","securityContext":{},"imagePullSecrets":[{"name":"acr-credential-0cd66774c2e1635329078c8ad94a7d92"},{"name":"acr-credential-90a511cb8249950d96ce0336cae093f0"},{"name":"acr-credential-518dfd1883737c2a6bde99ed6fee583c"},{"name":"acr-credential-91029a2c549212d737cbd7e40e1a6ebb"},{"name":"acr-credential-bbec27b1dbdc90bb0f27dbd225b24e17"}],"schedulerName":"default-scheduler","tolerations":[{"operator":"Exists","effect":"NoSchedule"},{"key":"node.kubernetes.io/not-ready","operator":"Exists","effect":"NoExecute","tolerationSeconds":300},{"key":"node.kubernetes.io/unreachable","operator":"Exists","effect":"NoExecute","tolerationSeconds":300}],"priority":0,"enableServiceLinks":true,"preemptionPolicy":"PreemptLowerPriority"},"status":{"phase":"Running","conditions":[{"type":"Initialized","status":"True","lastProbeTime":null,"lastTransitionTime":"2024-03-15T03:45:52Z"},{"type":"Ready","status":"True","lastProbeTime":null,"lastTransitionTime":"2024-03-15T03:46:43Z"},{"type":"ContainersReady","status":"True","lastProbeTime":null,"lastTransitionTime":"2024-03-15T03:46:43Z"},{"type":"PodScheduled","status":"True","lastProbeTime":null,"lastTransitionTime":"2024-03-15T03:45:53Z"}],"hostIP":"10.1.160.149","podIP":"172.20.87.130","podIPs":[{"ip":"172.20.87.130"}],"startTime":"2024-03-15T03:45:52Z","containerStatuses":[{"name":"mo-br","state":{"running":{"startedAt":"2024-03-15T03:46:42Z"}},"lastState":{},"ready":true,"restartCount":0,"image":"registry.cn-hangzhou.aliyuncs.com/mocloud/mo-backup:4fa21f1","imageID":"registry.cn-hangzhou.aliyuncs.com/mocloud/mo-backup@sha256:96b3680fe7739eb276013fba516d95a7f11f8cde92170a09d835b9f73d6f7e7b","containerID":"containerd://5e28da92e75da0968262af37e7c688c097e78a2312947729f62dfb222b66b132","started":true}],"qosClass":"Guaranteed"}}

DEBUG    src.tests.upgrade.test_mo_upgrade:test_mo_upgrade.py:219 wait for the conditions by '<lambda>' with args: ('restore-restore-freetier-02', 'moc-upgrade-test'), {}
DEBUG    kubernetes.client.rest:rest.py:235 response body: {"kind":"Pod","apiVersion":"v1","metadata":{"name":"restore-restore-freetier-02","namespace":"moc-upgrade-test","uid":"e16f2157-ce81-46db-a035-d4ceba7cfb90","resourceVersion":"96213815","creationTimestamp":"2024-03-15T03:44:29Z","managedFields":[{"manager":"OpenAPI-Generator","operation":"Update","apiVersion":"v1","time":"2024-03-15T03:44:29Z","fieldsType":"FieldsV1","fieldsV1":{"f:spec":{"f:containers":{"k:{\"name\":\"mo-br\"}":{".":{},"f:args":{},"f:command":{},"f:env":{".":{},"k:{\"name\":\"AWS_ACCESS_KEY_ID\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"AWS_SECRET_ACCESS_KEY\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}}},"f:image":{},"f:imagePullPolicy":{},"f:name":{},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{}}},"f:dnsPolicy":{},"f:enableServiceLinks":{},"f:imagePullSecrets":{".":{},"k:{\"name\":\"acr-credential-0cd66774c2e1635329078c8ad94a7d92\"}":{},"k:{\"name\":\"acr-credential-518dfd1883737c2a6bde99ed6fee583c\"}":{},"k:{\"name\":\"acr-credential-90a511cb8249950d96ce0336cae093f0\"}":{},"k:{\"name\":\"acr-credential-91029a2c549212d737cbd7e40e1a6ebb\"}":{},"k:{\"name\":\"acr-credential-bbec27b1dbdc90bb0f27dbd225b24e17\"}":{}},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{},"f:terminationGracePeriodSeconds":{},"f:tolerations":{}}}},{"manager":"kube-scheduler","operation":"Update","apiVersion":"v1","time":"2024-03-15T03:44:29Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:conditions":{".":{},"k:{\"type\":\"PodScheduled\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:message":{},"f:reason":{},"f:status":{},"f:type":{}}}}},"subresource":"status"},{"manager":"kubelet","operation":"Update","apiVersion":"v1","time":"2024-03-15T03:46:43Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:conditions":{"k:{\"type\":\"ContainersReady\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Initialized\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Ready\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}}},"f:containerStatuses":{},"f:hostIP":{},"f:phase":{},"f:podIP":{},"f:podIPs":{".":{},"k:{\"ip\":\"172.20.87.130\"}":{".":{},"f:ip":{}}},"f:startTime":{}}},"subresource":"status"}]},"spec":{"volumes":[{"name":"kube-api-access-kcbh4","projected":{"sources":[{"serviceAccountToken":{"expirationSeconds":3607,"path":"token"}},{"configMap":{"name":"kube-root-ca.crt","items":[{"key":"ca.crt","path":"ca.crt"}]}},{"downwardAPI":{"items":[{"path":"namespace","fieldRef":{"apiVersion":"v1","fieldPath":"metadata.namespace"}}]}}],"defaultMode":420}}],"containers":[{"name":"mo-br","image":"registry.cn-hangzhou.aliyuncs.com/mocloud/mo-backup:4fa21f1","command":["/mo_br","restore"],"args":["--backup_dir","s3","--backup_endpoint","http://oss-cn-hangzhou-internal.aliyuncs.com","--backup_bucket","moc-backup-test","--backup_filepath","backup-freetier-02-20240315021618","--backup_region","cn-hangzhou","--backup_access_key_id","$(AWS_ACCESS_KEY_ID)","--backup_secret_access_key","$(AWS_SECRET_ACCESS_KEY)","--restore_dir","s3","--restore_endpoint","http://oss-cn-hangzhou-internal.aliyuncs.com","--restore_access_key_id","$(AWS_ACCESS_KEY_ID)","--restore_secret_access_key","$(AWS_SECRET_ACCESS_KEY)","--restore_bucket","moc-backup-test","--restore_filepath","restore-freetier-02-20240315021618","--restore_region","cn-hangzhou","--log_level","debug"],"env":[{"name":"AWS_ACCESS_KEY_ID","valueFrom":{"secretKeyRef":{"name":"aliyun-moc-backup-test","key":"AWS_ACCESS_KEY_ID"}}},{"name":"AWS_SECRET_ACCESS_KEY","valueFrom":{"secretKeyRef":{"name":"aliyun-moc-backup-test","key":"AWS_SECRET_ACCESS_KEY"}}}],"resources":{"limits":{"cpu":"7","memory":"13Gi"},"requests":{"cpu":"7","memory":"13Gi"}},"volumeMounts":[{"name":"kube-api-access-kcbh4","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Never","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"default","serviceAccount":"default","nodeName":"cn-hangzhou.10.1.160.149","securityContext":{},"imagePullSecrets":[{"name":"acr-credential-0cd66774c2e1635329078c8ad94a7d92"},{"name":"acr-credential-90a511cb8249950d96ce0336cae093f0"},{"name":"acr-credential-518dfd1883737c2a6bde99ed6fee583c"},{"name":"acr-credential-91029a2c549212d737cbd7e40e1a6ebb"},{"name":"acr-credential-bbec27b1dbdc90bb0f27dbd225b24e17"}],"schedulerName":"default-scheduler","tolerations":[{"operator":"Exists","effect":"NoSchedule"},{"key":"node.kubernetes.io/not-ready","operator":"Exists","effect":"NoExecute","tolerationSeconds":300},{"key":"node.kubernetes.io/unreachable","operator":"Exists","effect":"NoExecute","tolerationSeconds":300}],"priority":0,"enableServiceLinks":true,"preemptionPolicy":"PreemptLowerPriority"},"status":{"phase":"Running","conditions":[{"type":"Initialized","status":"True","lastProbeTime":null,"lastTransitionTime":"2024-03-15T03:45:52Z"},{"type":"Ready","status":"True","lastProbeTime":null,"lastTransitionTime":"2024-03-15T03:46:43Z"},{"type":"ContainersReady","status":"True","lastProbeTime":null,"lastTransitionTime":"2024-03-15T03:46:43Z"},{"type":"PodScheduled","status":"True","lastProbeTime":null,"lastTransitionTime":"2024-03-15T03:45:53Z"}],"hostIP":"10.1.160.149","podIP":"172.20.87.130","podIPs":[{"ip":"172.20.87.130"}],"startTime":"2024-03-15T03:45:52Z","containerStatuses":[{"name":"mo-br","state":{"running":{"startedAt":"2024-03-15T03:46:42Z"}},"lastState":{},"ready":true,"restartCount":0,"image":"registry.cn-hangzhou.aliyuncs.com/mocloud/mo-backup:4fa21f1","imageID":"registry.cn-hangzhou.aliyuncs.com/mocloud/mo-backup@sha256:96b3680fe7739eb276013fba516d95a7f11f8cde92170a09d835b9f73d6f7e7b","containerID":"containerd://5e28da92e75da0968262af37e7c688c097e78a2312947729f62dfb222b66b132","started":true}],"qosClass":"Guaranteed"}}

DEBUG    src.tests.upgrade.test_mo_upgrade:test_mo_upgrade.py:219 wait for the conditions by '<lambda>' with args: ('restore-restore-freetier-02', 'moc-upgrade-test'), {}
DEBUG    kubernetes.client.rest:rest.py:235 response body: {"kind":"Pod","apiVersion":"v1","metadata":{"name":"restore-restore-freetier-02","namespace":"moc-upgrade-test","uid":"e16f2157-ce81-46db-a035-d4ceba7cfb90","resourceVersion":"96213815","creationTimestamp":"2024-03-15T03:44:29Z","managedFields":[{"manager":"OpenAPI-Generator","operation":"Update","apiVersion":"v1","time":"2024-03-15T03:44:29Z","fieldsType":"FieldsV1","fieldsV1":{"f:spec":{"f:containers":{"k:{\"name\":\"mo-br\"}":{".":{},"f:args":{},"f:command":{},"f:env":{".":{},"k:{\"name\":\"AWS_ACCESS_KEY_ID\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"AWS_SECRET_ACCESS_KEY\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}}},"f:image":{},"f:imagePullPolicy":{},"f:name":{},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{}}},"f:dnsPolicy":{},"f:enableServiceLinks":{},"f:imagePullSecrets":{".":{},"k:{\"name\":\"acr-credential-0cd66774c2e1635329078c8ad94a7d92\"}":{},"k:{\"name\":\"acr-credential-518dfd1883737c2a6bde99ed6fee583c\"}":{},"k:{\"name\":\"acr-credential-90a511cb8249950d96ce0336cae093f0\"}":{},"k:{\"name\":\"acr-credential-91029a2c549212d737cbd7e40e1a6ebb\"}":{},"k:{\"name\":\"acr-credential-bbec27b1dbdc90bb0f27dbd225b24e17\"}":{}},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{},"f:terminationGracePeriodSeconds":{},"f:tolerations":{}}}},{"manager":"kube-scheduler","operation":"Update","apiVersion":"v1","time":"2024-03-15T03:44:29Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:conditions":{".":{},"k:{\"type\":\"PodScheduled\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:message":{},"f:reason":{},"f:status":{},"f:type":{}}}}},"subresource":"status"},{"manager":"kubelet","operation":"Update","apiVersion":"v1","time":"2024-03-15T03:46:43Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:conditions":{"k:{\"type\":\"ContainersReady\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Initialized\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Ready\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}}},"f:containerStatuses":{},"f:hostIP":{},"f:phase":{},"f:podIP":{},"f:podIPs":{".":{},"k:{\"ip\":\"172.20.87.130\"}":{".":{},"f:ip":{}}},"f:startTime":{}}},"subresource":"status"}]},"spec":{"volumes":[{"name":"kube-api-access-kcbh4","projected":{"sources":[{"serviceAccountToken":{"expirationSeconds":3607,"path":"token"}},{"configMap":{"name":"kube-root-ca.crt","items":[{"key":"ca.crt","path":"ca.crt"}]}},{"downwardAPI":{"items":[{"path":"namespace","fieldRef":{"apiVersion":"v1","fieldPath":"metadata.namespace"}}]}}],"defaultMode":420}}],"containers":[{"name":"mo-br","image":"registry.cn-hangzhou.aliyuncs.com/mocloud/mo-backup:4fa21f1","command":["/mo_br","restore"],"args":["--backup_dir","s3","--backup_endpoint","http://oss-cn-hangzhou-internal.aliyuncs.com","--backup_bucket","moc-backup-test","--backup_filepath","backup-freetier-02-20240315021618","--backup_region","cn-hangzhou","--backup_access_key_id","$(AWS_ACCESS_KEY_ID)","--backup_secret_access_key","$(AWS_SECRET_ACCESS_KEY)","--restore_dir","s3","--restore_endpoint","http://oss-cn-hangzhou-internal.aliyuncs.com","--restore_access_key_id","$(AWS_ACCESS_KEY_ID)","--restore_secret_access_key","$(AWS_SECRET_ACCESS_KEY)","--restore_bucket","moc-backup-test","--restore_filepath","restore-freetier-02-20240315021618","--restore_region","cn-hangzhou","--log_level","debug"],"env":[{"name":"AWS_ACCESS_KEY_ID","valueFrom":{"secretKeyRef":{"name":"aliyun-moc-backup-test","key":"AWS_ACCESS_KEY_ID"}}},{"name":"AWS_SECRET_ACCESS_KEY","valueFrom":{"secretKeyRef":{"name":"aliyun-moc-backup-test","key":"AWS_SECRET_ACCESS_KEY"}}}],"resources":{"limits":{"cpu":"7","memory":"13Gi"},"requests":{"cpu":"7","memory":"13Gi"}},"volumeMounts":[{"name":"kube-api-access-kcbh4","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Never","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"default","serviceAccount":"default","nodeName":"cn-hangzhou.10.1.160.149","securityContext":{},"imagePullSecrets":[{"name":"acr-credential-0cd66774c2e1635329078c8ad94a7d92"},{"name":"acr-credential-90a511cb8249950d96ce0336cae093f0"},{"name":"acr-credential-518dfd1883737c2a6bde99ed6fee583c"},{"name":"acr-credential-91029a2c549212d737cbd7e40e1a6ebb"},{"name":"acr-credential-bbec27b1dbdc90bb0f27dbd225b24e17"}],"schedulerName":"default-scheduler","tolerations":[{"operator":"Exists","effect":"NoSchedule"},{"key":"node.kubernetes.io/not-ready","operator":"Exists","effect":"NoExecute","tolerationSeconds":300},{"key":"node.kubernetes.io/unreachable","operator":"Exists","effect":"NoExecute","tolerationSeconds":300}],"priority":0,"enableServiceLinks":true,"preemptionPolicy":"PreemptLowerPriority"},"status":{"phase":"Running","conditions":[{"type":"Initialized","status":"True","lastProbeTime":null,"lastTransitionTime":"2024-03-15T03:45:52Z"},{"type":"Ready","status":"True","lastProbeTime":null,"lastTransitionTime":"2024-03-15T03:46:43Z"},{"type":"ContainersReady","status":"True","lastProbeTime":null,"lastTransitionTime":"2024-03-15T03:46:43Z"},{"type":"PodScheduled","status":"True","lastProbeTime":null,"lastTransitionTime":"2024-03-15T03:45:53Z"}],"hostIP":"10.1.160.149","podIP":"172.20.87.130","podIPs":[{"ip":"172.20.87.130"}],"startTime":"2024-03-15T03:45:52Z","containerStatuses":[{"name":"mo-br","state":{"running":{"startedAt":"2024-03-15T03:46:42Z"}},"lastState":{},"ready":true,"restartCount":0,"image":"registry.cn-hangzhou.aliyuncs.com/mocloud/mo-backup:4fa21f1","imageID":"registry.cn-hangzhou.aliyuncs.com/mocloud/mo-backup@sha256:96b3680fe7739eb276013fba516d95a7f11f8cde92170a09d835b9f73d6f7e7b","containerID":"containerd://5e28da92e75da0968262af37e7c688c097e78a2312947729f62dfb222b66b132","started":true}],"qosClass":"Guaranteed"}}

DEBUG    src.tests.upgrade.test_mo_upgrade:test_mo_upgrade.py:219 wait for the conditions by '<lambda>' with args: ('restore-restore-freetier-02', 'moc-upgrade-test'), {}
DEBUG    kubernetes.client.rest:rest.py:235 response body: {"kind":"Pod","apiVersion":"v1","metadata":{"name":"restore-restore-freetier-02","namespace":"moc-upgrade-test","uid":"e16f2157-ce81-46db-a035-d4ceba7cfb90","resourceVersion":"96213815","creationTimestamp":"2024-03-15T03:44:29Z","managedFields":[{"manager":"OpenAPI-Generator","operation":"Update","apiVersion":"v1","time":"2024-03-15T03:44:29Z","fieldsType":"FieldsV1","fieldsV1":{"f:spec":{"f:containers":{"k:{\"name\":\"mo-br\"}":{".":{},"f:args":{},"f:command":{},"f:env":{".":{},"k:{\"name\":\"AWS_ACCESS_KEY_ID\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"AWS_SECRET_ACCESS_KEY\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}}},"f:image":{},"f:imagePullPolicy":{},"f:name":{},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{}}},"f:dnsPolicy":{},"f:enableServiceLinks":{},"f:imagePullSecrets":{".":{},"k:{\"name\":\"acr-credential-0cd66774c2e1635329078c8ad94a7d92\"}":{},"k:{\"name\":\"acr-credential-518dfd1883737c2a6bde99ed6fee583c\"}":{},"k:{\"name\":\"acr-credential-90a511cb8249950d96ce0336cae093f0\"}":{},"k:{\"name\":\"acr-credential-91029a2c549212d737cbd7e40e1a6ebb\"}":{},"k:{\"name\":\"acr-credential-bbec27b1dbdc90bb0f27dbd225b24e17\"}":{}},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{},"f:terminationGracePeriodSeconds":{},"f:tolerations":{}}}},{"manager":"kube-scheduler","operation":"Update","apiVersion":"v1","time":"2024-03-15T03:44:29Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:conditions":{".":{},"k:{\"type\":\"PodScheduled\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:message":{},"f:reason":{},"f:status":{},"f:type":{}}}}},"subresource":"status"},{"manager":"kubelet","operation":"Update","apiVersion":"v1","time":"2024-03-15T03:46:43Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:conditions":{"k:{\"type\":\"ContainersReady\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Initialized\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Ready\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}}},"f:containerStatuses":{},"f:hostIP":{},"f:phase":{},"f:podIP":{},"f:podIPs":{".":{},"k:{\"ip\":\"172.20.87.130\"}":{".":{},"f:ip":{}}},"f:startTime":{}}},"subresource":"status"}]},"spec":{"volumes":[{"name":"kube-api-access-kcbh4","projected":{"sources":[{"serviceAccountToken":{"expirationSeconds":3607,"path":"token"}},{"configMap":{"name":"kube-root-ca.crt","items":[{"key":"ca.crt","path":"ca.crt"}]}},{"downwardAPI":{"items":[{"path":"namespace","fieldRef":{"apiVersion":"v1","fieldPath":"metadata.namespace"}}]}}],"defaultMode":420}}],"containers":[{"name":"mo-br","image":"registry.cn-hangzhou.aliyuncs.com/mocloud/mo-backup:4fa21f1","command":["/mo_br","restore"],"args":["--backup_dir","s3","--backup_endpoint","http://oss-cn-hangzhou-internal.aliyuncs.com","--backup_bucket","moc-backup-test","--backup_filepath","backup-freetier-02-20240315021618","--backup_region","cn-hangzhou","--backup_access_key_id","$(AWS_ACCESS_KEY_ID)","--backup_secret_access_key","$(AWS_SECRET_ACCESS_KEY)","--restore_dir","s3","--restore_endpoint","http://oss-cn-hangzhou-internal.aliyuncs.com","--restore_access_key_id","$(AWS_ACCESS_KEY_ID)","--restore_secret_access_key","$(AWS_SECRET_ACCESS_KEY)","--restore_bucket","moc-backup-test","--restore_filepath","restore-freetier-02-20240315021618","--restore_region","cn-hangzhou","--log_level","debug"],"env":[{"name":"AWS_ACCESS_KEY_ID","valueFrom":{"secretKeyRef":{"name":"aliyun-moc-backup-test","key":"AWS_ACCESS_KEY_ID"}}},{"name":"AWS_SECRET_ACCESS_KEY","valueFrom":{"secretKeyRef":{"name":"aliyun-moc-backup-test","key":"AWS_SECRET_ACCESS_KEY"}}}],"resources":{"limits":{"cpu":"7","memory":"13Gi"},"requests":{"cpu":"7","memory":"13Gi"}},"volumeMounts":[{"name":"kube-api-access-kcbh4","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Never","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"default","serviceAccount":"default","nodeName":"cn-hangzhou.10.1.160.149","securityContext":{},"imagePullSecrets":[{"name":"acr-credential-0cd66774c2e1635329078c8ad94a7d92"},{"name":"acr-credential-90a511cb8249950d96ce0336cae093f0"},{"name":"acr-credential-518dfd1883737c2a6bde99ed6fee583c"},{"name":"acr-credential-91029a2c549212d737cbd7e40e1a6ebb"},{"name":"acr-credential-bbec27b1dbdc90bb0f27dbd225b24e17"}],"schedulerName":"default-scheduler","tolerations":[{"operator":"Exists","effect":"NoSchedule"},{"key":"node.kubernetes.io/not-ready","operator":"Exists","effect":"NoExecute","tolerationSeconds":300},{"key":"node.kubernetes.io/unreachable","operator":"Exists","effect":"NoExecute","tolerationSeconds":300}],"priority":0,"enableServiceLinks":true,"preemptionPolicy":"PreemptLowerPriority"},"status":{"phase":"Running","conditions":[{"type":"Initialized","status":"True","lastProbeTime":null,"lastTransitionTime":"2024-03-15T03:45:52Z"},{"type":"Ready","status":"True","lastProbeTime":null,"lastTransitionTime":"2024-03-15T03:46:43Z"},{"type":"ContainersReady","status":"True","lastProbeTime":null,"lastTransitionTime":"2024-03-15T03:46:43Z"},{"type":"PodScheduled","status":"True","lastProbeTime":null,"lastTransitionTime":"2024-03-15T03:45:53Z"}],"hostIP":"10.1.160.149","podIP":"172.20.87.130","podIPs":[{"ip":"172.20.87.130"}],"startTime":"2024-03-15T03:45:52Z","containerStatuses":[{"name":"mo-br","state":{"running":{"startedAt":"2024-03-15T03:46:42Z"}},"lastState":{},"ready":true,"restartCount":0,"image":"registry.cn-hangzhou.aliyuncs.com/mocloud/mo-backup:4fa21f1","imageID":"registry.cn-hangzhou.aliyuncs.com/mocloud/mo-backup@sha256:96b3680fe7739eb276013fba516d95a7f11f8cde92170a09d835b9f73d6f7e7b","containerID":"containerd://5e28da92e75da0968262af37e7c688c097e78a2312947729f62dfb222b66b132","started":true}],"qosClass":"Guaranteed"}}

DEBUG    src.tests.upgrade.test_mo_upgrade:test_mo_upgrade.py:219 wait for the conditions by '<lambda>' with args: ('restore-restore-freetier-02', 'moc-upgrade-test'), {}
DEBUG    kubernetes.client.rest:rest.py:235 response body: {"kind":"Pod","apiVersion":"v1","metadata":{"name":"restore-restore-freetier-02","namespace":"moc-upgrade-test","uid":"e16f2157-ce81-46db-a035-d4ceba7cfb90","resourceVersion":"96213815","creationTimestamp":"2024-03-15T03:44:29Z","managedFields":[{"manager":"OpenAPI-Generator","operation":"Update","apiVersion":"v1","time":"2024-03-15T03:44:29Z","fieldsType":"FieldsV1","fieldsV1":{"f:spec":{"f:containers":{"k:{\"name\":\"mo-br\"}":{".":{},"f:args":{},"f:command":{},"f:env":{".":{},"k:{\"name\":\"AWS_ACCESS_KEY_ID\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"AWS_SECRET_ACCESS_KEY\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}}},"f:image":{},"f:imagePullPolicy":{},"f:name":{},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{}}},"f:dnsPolicy":{},"f:enableServiceLinks":{},"f:imagePullSecrets":{".":{},"k:{\"name\":\"acr-credential-0cd66774c2e1635329078c8ad94a7d92\"}":{},"k:{\"name\":\"acr-credential-518dfd1883737c2a6bde99ed6fee583c\"}":{},"k:{\"name\":\"acr-credential-90a511cb8249950d96ce0336cae093f0\"}":{},"k:{\"name\":\"acr-credential-91029a2c549212d737cbd7e40e1a6ebb\"}":{},"k:{\"name\":\"acr-credential-bbec27b1dbdc90bb0f27dbd225b24e17\"}":{}},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{},"f:terminationGracePeriodSeconds":{},"f:tolerations":{}}}},{"manager":"kube-scheduler","operation":"Update","apiVersion":"v1","time":"2024-03-15T03:44:29Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:conditions":{".":{},"k:{\"type\":\"PodScheduled\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:message":{},"f:reason":{},"f:status":{},"f:type":{}}}}},"subresource":"status"},{"manager":"kubelet","operation":"Update","apiVersion":"v1","time":"2024-03-15T03:46:43Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:conditions":{"k:{\"type\":\"ContainersReady\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Initialized\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Ready\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}}},"f:containerStatuses":{},"f:hostIP":{},"f:phase":{},"f:podIP":{},"f:podIPs":{".":{},"k:{\"ip\":\"172.20.87.130\"}":{".":{},"f:ip":{}}},"f:startTime":{}}},"subresource":"status"}]},"spec":{"volumes":[{"name":"kube-api-access-kcbh4","projected":{"sources":[{"serviceAccountToken":{"expirationSeconds":3607,"path":"token"}},{"configMap":{"name":"kube-root-ca.crt","items":[{"key":"ca.crt","path":"ca.crt"}]}},{"downwardAPI":{"items":[{"path":"namespace","fieldRef":{"apiVersion":"v1","fieldPath":"metadata.namespace"}}]}}],"defaultMode":420}}],"containers":[{"name":"mo-br","image":"registry.cn-hangzhou.aliyuncs.com/mocloud/mo-backup:4fa21f1","command":["/mo_br","restore"],"args":["--backup_dir","s3","--backup_endpoint","http://oss-cn-hangzhou-internal.aliyuncs.com","--backup_bucket","moc-backup-test","--backup_filepath","backup-freetier-02-20240315021618","--backup_region","cn-hangzhou","--backup_access_key_id","$(AWS_ACCESS_KEY_ID)","--backup_secret_access_key","$(AWS_SECRET_ACCESS_KEY)","--restore_dir","s3","--restore_endpoint","http://oss-cn-hangzhou-internal.aliyuncs.com","--restore_access_key_id","$(AWS_ACCESS_KEY_ID)","--restore_secret_access_key","$(AWS_SECRET_ACCESS_KEY)","--restore_bucket","moc-backup-test","--restore_filepath","restore-freetier-02-20240315021618","--restore_region","cn-hangzhou","--log_level","debug"],"env":[{"name":"AWS_ACCESS_KEY_ID","valueFrom":{"secretKeyRef":{"name":"aliyun-moc-backup-test","key":"AWS_ACCESS_KEY_ID"}}},{"name":"AWS_SECRET_ACCESS_KEY","valueFrom":{"secretKeyRef":{"name":"aliyun-moc-backup-test","key":"AWS_SECRET_ACCESS_KEY"}}}],"resources":{"limits":{"cpu":"7","memory":"13Gi"},"requests":{"cpu":"7","memory":"13Gi"}},"volumeMounts":[{"name":"kube-api-access-kcbh4","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Never","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"default","serviceAccount":"default","nodeName":"cn-hangzhou.10.1.160.149","securityContext":{},"imagePullSecrets":[{"name":"acr-credential-0cd66774c2e1635329078c8ad94a7d92"},{"name":"acr-credential-90a511cb8249950d96ce0336cae093f0"},{"name":"acr-credential-518dfd1883737c2a6bde99ed6fee583c"},{"name":"acr-credential-91029a2c549212d737cbd7e40e1a6ebb"},{"name":"acr-credential-bbec27b1dbdc90bb0f27dbd225b24e17"}],"schedulerName":"default-scheduler","tolerations":[{"operator":"Exists","effect":"NoSchedule"},{"key":"node.kubernetes.io/not-ready","operator":"Exists","effect":"NoExecute","tolerationSeconds":300},{"key":"node.kubernetes.io/unreachable","operator":"Exists","effect":"NoExecute","tolerationSeconds":300}],"priority":0,"enableServiceLinks":true,"preemptionPolicy":"PreemptLowerPriority"},"status":{"phase":"Running","conditions":[{"type":"Initialized","status":"True","lastProbeTime":null,"lastTransitionTime":"2024-03-15T03:45:52Z"},{"type":"Ready","status":"True","lastProbeTime":null,"lastTransitionTime":"2024-03-15T03:46:43Z"},{"type":"ContainersReady","status":"True","lastProbeTime":null,"lastTransitionTime":"2024-03-15T03:46:43Z"},{"type":"PodScheduled","status":"True","lastProbeTime":null,"lastTransitionTime":"2024-03-15T03:45:53Z"}],"hostIP":"10.1.160.149","podIP":"172.20.87.130","podIPs":[{"ip":"172.20.87.130"}],"startTime":"2024-03-15T03:45:52Z","containerStatuses":[{"name":"mo-br","state":{"running":{"startedAt":"2024-03-15T03:46:42Z"}},"lastState":{},"ready":true,"restartCount":0,"image":"registry.cn-hangzhou.aliyuncs.com/mocloud/mo-backup:4fa21f1","imageID":"registry.cn-hangzhou.aliyuncs.com/mocloud/mo-backup@sha256:96b3680fe7739eb276013fba516d95a7f11f8cde92170a09d835b9f73d6f7e7b","containerID":"containerd://5e28da92e75da0968262af37e7c688c097e78a2312947729f62dfb222b66b132","started":true}],"qosClass":"Guaranteed"}}

DEBUG    src.tests.upgrade.test_mo_upgrade:test_mo_upgrade.py:219 wait for the conditions by '<lambda>' with args: ('restore-restore-freetier-02', 'moc-upgrade-test'), {}
DEBUG    kubernetes.client.rest:rest.py:235 response body: {"kind":"Pod","apiVersion":"v1","metadata":{"name":"restore-restore-freetier-02","namespace":"moc-upgrade-test","uid":"e16f2157-ce81-46db-a035-d4ceba7cfb90","resourceVersion":"96213815","creationTimestamp":"2024-03-15T03:44:29Z","managedFields":[{"manager":"OpenAPI-Generator","operation":"Update","apiVersion":"v1","time":"2024-03-15T03:44:29Z","fieldsType":"FieldsV1","fieldsV1":{"f:spec":{"f:containers":{"k:{\"name\":\"mo-br\"}":{".":{},"f:args":{},"f:command":{},"f:env":{".":{},"k:{\"name\":\"AWS_ACCESS_KEY_ID\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"AWS_SECRET_ACCESS_KEY\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}}},"f:image":{},"f:imagePullPolicy":{},"f:name":{},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{}}},"f:dnsPolicy":{},"f:enableServiceLinks":{},"f:imagePullSecrets":{".":{},"k:{\"name\":\"acr-credential-0cd66774c2e1635329078c8ad94a7d92\"}":{},"k:{\"name\":\"acr-credential-518dfd1883737c2a6bde99ed6fee583c\"}":{},"k:{\"name\":\"acr-credential-90a511cb8249950d96ce0336cae093f0\"}":{},"k:{\"name\":\"acr-credential-91029a2c549212d737cbd7e40e1a6ebb\"}":{},"k:{\"name\":\"acr-credential-bbec27b1dbdc90bb0f27dbd225b24e17\"}":{}},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{},"f:terminationGracePeriodSeconds":{},"f:tolerations":{}}}},{"manager":"kube-scheduler","operation":"Update","apiVersion":"v1","time":"2024-03-15T03:44:29Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:conditions":{".":{},"k:{\"type\":\"PodScheduled\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:message":{},"f:reason":{},"f:status":{},"f:type":{}}}}},"subresource":"status"},{"manager":"kubelet","operation":"Update","apiVersion":"v1","time":"2024-03-15T03:46:43Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:conditions":{"k:{\"type\":\"ContainersReady\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Initialized\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Ready\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}}},"f:containerStatuses":{},"f:hostIP":{},"f:phase":{},"f:podIP":{},"f:podIPs":{".":{},"k:{\"ip\":\"172.20.87.130\"}":{".":{},"f:ip":{}}},"f:startTime":{}}},"subresource":"status"}]},"spec":{"volumes":[{"name":"kube-api-access-kcbh4","projected":{"sources":[{"serviceAccountToken":{"expirationSeconds":3607,"path":"token"}},{"configMap":{"name":"kube-root-ca.crt","items":[{"key":"ca.crt","path":"ca.crt"}]}},{"downwardAPI":{"items":[{"path":"namespace","fieldRef":{"apiVersion":"v1","fieldPath":"metadata.namespace"}}]}}],"defaultMode":420}}],"containers":[{"name":"mo-br","image":"registry.cn-hangzhou.aliyuncs.com/mocloud/mo-backup:4fa21f1","command":["/mo_br","restore"],"args":["--backup_dir","s3","--backup_endpoint","http://oss-cn-hangzhou-internal.aliyuncs.com","--backup_bucket","moc-backup-test","--backup_filepath","backup-freetier-02-20240315021618","--backup_region","cn-hangzhou","--backup_access_key_id","$(AWS_ACCESS_KEY_ID)","--backup_secret_access_key","$(AWS_SECRET_ACCESS_KEY)","--restore_dir","s3","--restore_endpoint","http://oss-cn-hangzhou-internal.aliyuncs.com","--restore_access_key_id","$(AWS_ACCESS_KEY_ID)","--restore_secret_access_key","$(AWS_SECRET_ACCESS_KEY)","--restore_bucket","moc-backup-test","--restore_filepath","restore-freetier-02-20240315021618","--restore_region","cn-hangzhou","--log_level","debug"],"env":[{"name":"AWS_ACCESS_KEY_ID","valueFrom":{"secretKeyRef":{"name":"aliyun-moc-backup-test","key":"AWS_ACCESS_KEY_ID"}}},{"name":"AWS_SECRET_ACCESS_KEY","valueFrom":{"secretKeyRef":{"name":"aliyun-moc-backup-test","key":"AWS_SECRET_ACCESS_KEY"}}}],"resources":{"limits":{"cpu":"7","memory":"13Gi"},"requests":{"cpu":"7","memory":"13Gi"}},"volumeMounts":[{"name":"kube-api-access-kcbh4","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Never","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"default","serviceAccount":"default","nodeName":"cn-hangzhou.10.1.160.149","securityContext":{},"imagePullSecrets":[{"name":"acr-credential-0cd66774c2e1635329078c8ad94a7d92"},{"name":"acr-credential-90a511cb8249950d96ce0336cae093f0"},{"name":"acr-credential-518dfd1883737c2a6bde99ed6fee583c"},{"name":"acr-credential-91029a2c549212d737cbd7e40e1a6ebb"},{"name":"acr-credential-bbec27b1dbdc90bb0f27dbd225b24e17"}],"schedulerName":"default-scheduler","tolerations":[{"operator":"Exists","effect":"NoSchedule"},{"key":"node.kubernetes.io/not-ready","operator":"Exists","effect":"NoExecute","tolerationSeconds":300},{"key":"node.kubernetes.io/unreachable","operator":"Exists","effect":"NoExecute","tolerationSeconds":300}],"priority":0,"enableServiceLinks":true,"preemptionPolicy":"PreemptLowerPriority"},"status":{"phase":"Running","conditions":[{"type":"Initialized","status":"True","lastProbeTime":null,"lastTransitionTime":"2024-03-15T03:45:52Z"},{"type":"Ready","status":"True","lastProbeTime":null,"lastTransitionTime":"2024-03-15T03:46:43Z"},{"type":"ContainersReady","status":"True","lastProbeTime":null,"lastTransitionTime":"2024-03-15T03:46:43Z"},{"type":"PodScheduled","status":"True","lastProbeTime":null,"lastTransitionTime":"2024-03-15T03:45:53Z"}],"hostIP":"10.1.160.149","podIP":"172.20.87.130","podIPs":[{"ip":"172.20.87.130"}],"startTime":"2024-03-15T03:45:52Z","containerStatuses":[{"name":"mo-br","state":{"running":{"startedAt":"2024-03-15T03:46:42Z"}},"lastState":{},"ready":true,"restartCount":0,"image":"registry.cn-hangzhou.aliyuncs.com/mocloud/mo-backup:4fa21f1","imageID":"registry.cn-hangzhou.aliyuncs.com/mocloud/mo-backup@sha256:96b3680fe7739eb276013fba516d95a7f11f8cde92170a09d835b9f73d6f7e7b","containerID":"containerd://5e28da92e75da0968262af37e7c688c097e78a2312947729f62dfb222b66b132","started":true}],"qosClass":"Guaranteed"}}

DEBUG    src.tests.upgrade.test_mo_upgrade:test_mo_upgrade.py:219 wait for the conditions by '<lambda>' with args: ('restore-restore-freetier-02', 'moc-upgrade-test'), {}
DEBUG    kubernetes.client.rest:rest.py:235 response body: {"kind":"Pod","apiVersion":"v1","metadata":{"name":"restore-restore-freetier-02","namespace":"moc-upgrade-test","uid":"e16f2157-ce81-46db-a035-d4ceba7cfb90","resourceVersion":"96213815","creationTimestamp":"2024-03-15T03:44:29Z","managedFields":[{"manager":"OpenAPI-Generator","operation":"Update","apiVersion":"v1","time":"2024-03-15T03:44:29Z","fieldsType":"FieldsV1","fieldsV1":{"f:spec":{"f:containers":{"k:{\"name\":\"mo-br\"}":{".":{},"f:args":{},"f:command":{},"f:env":{".":{},"k:{\"name\":\"AWS_ACCESS_KEY_ID\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"AWS_SECRET_ACCESS_KEY\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}}},"f:image":{},"f:imagePullPolicy":{},"f:name":{},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{}}},"f:dnsPolicy":{},"f:enableServiceLinks":{},"f:imagePullSecrets":{".":{},"k:{\"name\":\"acr-credential-0cd66774c2e1635329078c8ad94a7d92\"}":{},"k:{\"name\":\"acr-credential-518dfd1883737c2a6bde99ed6fee583c\"}":{},"k:{\"name\":\"acr-credential-90a511cb8249950d96ce0336cae093f0\"}":{},"k:{\"name\":\"acr-credential-91029a2c549212d737cbd7e40e1a6ebb\"}":{},"k:{\"name\":\"acr-credential-bbec27b1dbdc90bb0f27dbd225b24e17\"}":{}},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{},"f:terminationGracePeriodSeconds":{},"f:tolerations":{}}}},{"manager":"kube-scheduler","operation":"Update","apiVersion":"v1","time":"2024-03-15T03:44:29Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:conditions":{".":{},"k:{\"type\":\"PodScheduled\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:message":{},"f:reason":{},"f:status":{},"f:type":{}}}}},"subresource":"status"},{"manager":"kubelet","operation":"Update","apiVersion":"v1","time":"2024-03-15T03:46:43Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:conditions":{"k:{\"type\":\"ContainersReady\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Initialized\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Ready\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}}},"f:containerStatuses":{},"f:hostIP":{},"f:phase":{},"f:podIP":{},"f:podIPs":{".":{},"k:{\"ip\":\"172.20.87.130\"}":{".":{},"f:ip":{}}},"f:startTime":{}}},"subresource":"status"}]},"spec":{"volumes":[{"name":"kube-api-access-kcbh4","projected":{"sources":[{"serviceAccountToken":{"expirationSeconds":3607,"path":"token"}},{"configMap":{"name":"kube-root-ca.crt","items":[{"key":"ca.crt","path":"ca.crt"}]}},{"downwardAPI":{"items":[{"path":"namespace","fieldRef":{"apiVersion":"v1","fieldPath":"metadata.namespace"}}]}}],"defaultMode":420}}],"containers":[{"name":"mo-br","image":"registry.cn-hangzhou.aliyuncs.com/mocloud/mo-backup:4fa21f1","command":["/mo_br","restore"],"args":["--backup_dir","s3","--backup_endpoint","http://oss-cn-hangzhou-internal.aliyuncs.com","--backup_bucket","moc-backup-test","--backup_filepath","backup-freetier-02-20240315021618","--backup_region","cn-hangzhou","--backup_access_key_id","$(AWS_ACCESS_KEY_ID)","--backup_secret_access_key","$(AWS_SECRET_ACCESS_KEY)","--restore_dir","s3","--restore_endpoint","http://oss-cn-hangzhou-internal.aliyuncs.com","--restore_access_key_id","$(AWS_ACCESS_KEY_ID)","--restore_secret_access_key","$(AWS_SECRET_ACCESS_KEY)","--restore_bucket","moc-backup-test","--restore_filepath","restore-freetier-02-20240315021618","--restore_region","cn-hangzhou","--log_level","debug"],"env":[{"name":"AWS_ACCESS_KEY_ID","valueFrom":{"secretKeyRef":{"name":"aliyun-moc-backup-test","key":"AWS_ACCESS_KEY_ID"}}},{"name":"AWS_SECRET_ACCESS_KEY","valueFrom":{"secretKeyRef":{"name":"aliyun-moc-backup-test","key":"AWS_SECRET_ACCESS_KEY"}}}],"resources":{"limits":{"cpu":"7","memory":"13Gi"},"requests":{"cpu":"7","memory":"13Gi"}},"volumeMounts":[{"name":"kube-api-access-kcbh4","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Never","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"default","serviceAccount":"default","nodeName":"cn-hangzhou.10.1.160.149","securityContext":{},"imagePullSecrets":[{"name":"acr-credential-0cd66774c2e1635329078c8ad94a7d92"},{"name":"acr-credential-90a511cb8249950d96ce0336cae093f0"},{"name":"acr-credential-518dfd1883737c2a6bde99ed6fee583c"},{"name":"acr-credential-91029a2c549212d737cbd7e40e1a6ebb"},{"name":"acr-credential-bbec27b1dbdc90bb0f27dbd225b24e17"}],"schedulerName":"default-scheduler","tolerations":[{"operator":"Exists","effect":"NoSchedule"},{"key":"node.kubernetes.io/not-ready","operator":"Exists","effect":"NoExecute","tolerationSeconds":300},{"key":"node.kubernetes.io/unreachable","operator":"Exists","effect":"NoExecute","tolerationSeconds":300}],"priority":0,"enableServiceLinks":true,"preemptionPolicy":"PreemptLowerPriority"},"status":{"phase":"Running","conditions":[{"type":"Initialized","status":"True","lastProbeTime":null,"lastTransitionTime":"2024-03-15T03:45:52Z"},{"type":"Ready","status":"True","lastProbeTime":null,"lastTransitionTime":"2024-03-15T03:46:43Z"},{"type":"ContainersReady","status":"True","lastProbeTime":null,"lastTransitionTime":"2024-03-15T03:46:43Z"},{"type":"PodScheduled","status":"True","lastProbeTime":null,"lastTransitionTime":"2024-03-15T03:45:53Z"}],"hostIP":"10.1.160.149","podIP":"172.20.87.130","podIPs":[{"ip":"172.20.87.130"}],"startTime":"2024-03-15T03:45:52Z","containerStatuses":[{"name":"mo-br","state":{"running":{"startedAt":"2024-03-15T03:46:42Z"}},"lastState":{},"ready":true,"restartCount":0,"image":"registry.cn-hangzhou.aliyuncs.com/mocloud/mo-backup:4fa21f1","imageID":"registry.cn-hangzhou.aliyuncs.com/mocloud/mo-backup@sha256:96b3680fe7739eb276013fba516d95a7f11f8cde92170a09d835b9f73d6f7e7b","containerID":"containerd://5e28da92e75da0968262af37e7c688c097e78a2312947729f62dfb222b66b132","started":true}],"qosClass":"Guaranteed"}}

DEBUG    src.tests.upgrade.test_mo_upgrade:test_mo_upgrade.py:219 wait for the conditions by '<lambda>' with args: ('restore-restore-freetier-02', 'moc-upgrade-test'), {}
DEBUG    kubernetes.client.rest:rest.py:235 response body: {"kind":"Pod","apiVersion":"v1","metadata":{"name":"restore-restore-freetier-02","namespace":"moc-upgrade-test","uid":"e16f2157-ce81-46db-a035-d4ceba7cfb90","resourceVersion":"96213815","creationTimestamp":"2024-03-15T03:44:29Z","managedFields":[{"manager":"OpenAPI-Generator","operation":"Update","apiVersion":"v1","time":"2024-03-15T03:44:29Z","fieldsType":"FieldsV1","fieldsV1":{"f:spec":{"f:containers":{"k:{\"name\":\"mo-br\"}":{".":{},"f:args":{},"f:command":{},"f:env":{".":{},"k:{\"name\":\"AWS_ACCESS_KEY_ID\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"AWS_SECRET_ACCESS_KEY\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}}},"f:image":{},"f:imagePullPolicy":{},"f:name":{},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{}}},"f:dnsPolicy":{},"f:enableServiceLinks":{},"f:imagePullSecrets":{".":{},"k:{\"name\":\"acr-credential-0cd66774c2e1635329078c8ad94a7d92\"}":{},"k:{\"name\":\"acr-credential-518dfd1883737c2a6bde99ed6fee583c\"}":{},"k:{\"name\":\"acr-credential-90a511cb8249950d96ce0336cae093f0\"}":{},"k:{\"name\":\"acr-credential-91029a2c549212d737cbd7e40e1a6ebb\"}":{},"k:{\"name\":\"acr-credential-bbec27b1dbdc90bb0f27dbd225b24e17\"}":{}},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{},"f:terminationGracePeriodSeconds":{},"f:tolerations":{}}}},{"manager":"kube-scheduler","operation":"Update","apiVersion":"v1","time":"2024-03-15T03:44:29Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:conditions":{".":{},"k:{\"type\":\"PodScheduled\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:message":{},"f:reason":{},"f:status":{},"f:type":{}}}}},"subresource":"status"},{"manager":"kubelet","operation":"Update","apiVersion":"v1","time":"2024-03-15T03:46:43Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:conditions":{"k:{\"type\":\"ContainersReady\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Initialized\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Ready\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}}},"f:containerStatuses":{},"f:hostIP":{},"f:phase":{},"f:podIP":{},"f:podIPs":{".":{},"k:{\"ip\":\"172.20.87.130\"}":{".":{},"f:ip":{}}},"f:startTime":{}}},"subresource":"status"}]},"spec":{"volumes":[{"name":"kube-api-access-kcbh4","projected":{"sources":[{"serviceAccountToken":{"expirationSeconds":3607,"path":"token"}},{"configMap":{"name":"kube-root-ca.crt","items":[{"key":"ca.crt","path":"ca.crt"}]}},{"downwardAPI":{"items":[{"path":"namespace","fieldRef":{"apiVersion":"v1","fieldPath":"metadata.namespace"}}]}}],"defaultMode":420}}],"containers":[{"name":"mo-br","image":"registry.cn-hangzhou.aliyuncs.com/mocloud/mo-backup:4fa21f1","command":["/mo_br","restore"],"args":["--backup_dir","s3","--backup_endpoint","http://oss-cn-hangzhou-internal.aliyuncs.com","--backup_bucket","moc-backup-test","--backup_filepath","backup-freetier-02-20240315021618","--backup_region","cn-hangzhou","--backup_access_key_id","$(AWS_ACCESS_KEY_ID)","--backup_secret_access_key","$(AWS_SECRET_ACCESS_KEY)","--restore_dir","s3","--restore_endpoint","http://oss-cn-hangzhou-internal.aliyuncs.com","--restore_access_key_id","$(AWS_ACCESS_KEY_ID)","--restore_secret_access_key","$(AWS_SECRET_ACCESS_KEY)","--restore_bucket","moc-backup-test","--restore_filepath","restore-freetier-02-20240315021618","--restore_region","cn-hangzhou","--log_level","debug"],"env":[{"name":"AWS_ACCESS_KEY_ID","valueFrom":{"secretKeyRef":{"name":"aliyun-moc-backup-test","key":"AWS_ACCESS_KEY_ID"}}},{"name":"AWS_SECRET_ACCESS_KEY","valueFrom":{"secretKeyRef":{"name":"aliyun-moc-backup-test","key":"AWS_SECRET_ACCESS_KEY"}}}],"resources":{"limits":{"cpu":"7","memory":"13Gi"},"requests":{"cpu":"7","memory":"13Gi"}},"volumeMounts":[{"name":"kube-api-access-kcbh4","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Never","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"default","serviceAccount":"default","nodeName":"cn-hangzhou.10.1.160.149","securityContext":{},"imagePullSecrets":[{"name":"acr-credential-0cd66774c2e1635329078c8ad94a7d92"},{"name":"acr-credential-90a511cb8249950d96ce0336cae093f0"},{"name":"acr-credential-518dfd1883737c2a6bde99ed6fee583c"},{"name":"acr-credential-91029a2c549212d737cbd7e40e1a6ebb"},{"name":"acr-credential-bbec27b1dbdc90bb0f27dbd225b24e17"}],"schedulerName":"default-scheduler","tolerations":[{"operator":"Exists","effect":"NoSchedule"},{"key":"node.kubernetes.io/not-ready","operator":"Exists","effect":"NoExecute","tolerationSeconds":300},{"key":"node.kubernetes.io/unreachable","operator":"Exists","effect":"NoExecute","tolerationSeconds":300}],"priority":0,"enableServiceLinks":true,"preemptionPolicy":"PreemptLowerPriority"},"status":{"phase":"Running","conditions":[{"type":"Initialized","status":"True","lastProbeTime":null,"lastTransitionTime":"2024-03-15T03:45:52Z"},{"type":"Ready","status":"True","lastProbeTime":null,"lastTransitionTime":"2024-03-15T03:46:43Z"},{"type":"ContainersReady","status":"True","lastProbeTime":null,"lastTransitionTime":"2024-03-15T03:46:43Z"},{"type":"PodScheduled","status":"True","lastProbeTime":null,"lastTransitionTime":"2024-03-15T03:45:53Z"}],"hostIP":"10.1.160.149","podIP":"172.20.87.130","podIPs":[{"ip":"172.20.87.130"}],"startTime":"2024-03-15T03:45:52Z","containerStatuses":[{"name":"mo-br","state":{"running":{"startedAt":"2024-03-15T03:46:42Z"}},"lastState":{},"ready":true,"restartCount":0,"image":"registry.cn-hangzhou.aliyuncs.com/mocloud/mo-backup:4fa21f1","imageID":"registry.cn-hangzhou.aliyuncs.com/mocloud/mo-backup@sha256:96b3680fe7739eb276013fba516d95a7f11f8cde92170a09d835b9f73d6f7e7b","containerID":"containerd://5e28da92e75da0968262af37e7c688c097e78a2312947729f62dfb222b66b132","started":true}],"qosClass":"Guaranteed"}}

DEBUG    src.tests.upgrade.test_mo_upgrade:test_mo_upgrade.py:219 wait for the conditions by '<lambda>' with args: ('restore-restore-freetier-02', 'moc-upgrade-test'), {}
DEBUG    kubernetes.client.rest:rest.py:235 response body: {"kind":"Pod","apiVersion":"v1","metadata":{"name":"restore-restore-freetier-02","namespace":"moc-upgrade-test","uid":"e16f2157-ce81-46db-a035-d4ceba7cfb90","resourceVersion":"96213815","creationTimestamp":"2024-03-15T03:44:29Z","managedFields":[{"manager":"OpenAPI-Generator","operation":"Update","apiVersion":"v1","time":"2024-03-15T03:44:29Z","fieldsType":"FieldsV1","fieldsV1":{"f:spec":{"f:containers":{"k:{\"name\":\"mo-br\"}":{".":{},"f:args":{},"f:command":{},"f:env":{".":{},"k:{\"name\":\"AWS_ACCESS_KEY_ID\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"AWS_SECRET_ACCESS_KEY\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}}},"f:image":{},"f:imagePullPolicy":{},"f:name":{},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{}}},"f:dnsPolicy":{},"f:enableServiceLinks":{},"f:imagePullSecrets":{".":{},"k:{\"name\":\"acr-credential-0cd66774c2e1635329078c8ad94a7d92\"}":{},"k:{\"name\":\"acr-credential-518dfd1883737c2a6bde99ed6fee583c\"}":{},"k:{\"name\":\"acr-credential-90a511cb8249950d96ce0336cae093f0\"}":{},"k:{\"name\":\"acr-credential-91029a2c549212d737cbd7e40e1a6ebb\"}":{},"k:{\"name\":\"acr-credential-bbec27b1dbdc90bb0f27dbd225b24e17\"}":{}},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{},"f:terminationGracePeriodSeconds":{},"f:tolerations":{}}}},{"manager":"kube-scheduler","operation":"Update","apiVersion":"v1","time":"2024-03-15T03:44:29Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:conditions":{".":{},"k:{\"type\":\"PodScheduled\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:message":{},"f:reason":{},"f:status":{},"f:type":{}}}}},"subresource":"status"},{"manager":"kubelet","operation":"Update","apiVersion":"v1","time":"2024-03-15T03:46:43Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:conditions":{"k:{\"type\":\"ContainersReady\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Initialized\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Ready\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}}},"f:containerStatuses":{},"f:hostIP":{},"f:phase":{},"f:podIP":{},"f:podIPs":{".":{},"k:{\"ip\":\"172.20.87.130\"}":{".":{},"f:ip":{}}},"f:startTime":{}}},"subresource":"status"}]},"spec":{"volumes":[{"name":"kube-api-access-kcbh4","projected":{"sources":[{"serviceAccountToken":{"expirationSeconds":3607,"path":"token"}},{"configMap":{"name":"kube-root-ca.crt","items":[{"key":"ca.crt","path":"ca.crt"}]}},{"downwardAPI":{"items":[{"path":"namespace","fieldRef":{"apiVersion":"v1","fieldPath":"metadata.namespace"}}]}}],"defaultMode":420}}],"containers":[{"name":"mo-br","image":"registry.cn-hangzhou.aliyuncs.com/mocloud/mo-backup:4fa21f1","command":["/mo_br","restore"],"args":["--backup_dir","s3","--backup_endpoint","http://oss-cn-hangzhou-internal.aliyuncs.com","--backup_bucket","moc-backup-test","--backup_filepath","backup-freetier-02-20240315021618","--backup_region","cn-hangzhou","--backup_access_key_id","$(AWS_ACCESS_KEY_ID)","--backup_secret_access_key","$(AWS_SECRET_ACCESS_KEY)","--restore_dir","s3","--restore_endpoint","http://oss-cn-hangzhou-internal.aliyuncs.com","--restore_access_key_id","$(AWS_ACCESS_KEY_ID)","--restore_secret_access_key","$(AWS_SECRET_ACCESS_KEY)","--restore_bucket","moc-backup-test","--restore_filepath","restore-freetier-02-20240315021618","--restore_region","cn-hangzhou","--log_level","debug"],"env":[{"name":"AWS_ACCESS_KEY_ID","valueFrom":{"secretKeyRef":{"name":"aliyun-moc-backup-test","key":"AWS_ACCESS_KEY_ID"}}},{"name":"AWS_SECRET_ACCESS_KEY","valueFrom":{"secretKeyRef":{"name":"aliyun-moc-backup-test","key":"AWS_SECRET_ACCESS_KEY"}}}],"resources":{"limits":{"cpu":"7","memory":"13Gi"},"requests":{"cpu":"7","memory":"13Gi"}},"volumeMounts":[{"name":"kube-api-access-kcbh4","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Never","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"default","serviceAccount":"default","nodeName":"cn-hangzhou.10.1.160.149","securityContext":{},"imagePullSecrets":[{"name":"acr-credential-0cd66774c2e1635329078c8ad94a7d92"},{"name":"acr-credential-90a511cb8249950d96ce0336cae093f0"},{"name":"acr-credential-518dfd1883737c2a6bde99ed6fee583c"},{"name":"acr-credential-91029a2c549212d737cbd7e40e1a6ebb"},{"name":"acr-credential-bbec27b1dbdc90bb0f27dbd225b24e17"}],"schedulerName":"default-scheduler","tolerations":[{"operator":"Exists","effect":"NoSchedule"},{"key":"node.kubernetes.io/not-ready","operator":"Exists","effect":"NoExecute","tolerationSeconds":300},{"key":"node.kubernetes.io/unreachable","operator":"Exists","effect":"NoExecute","tolerationSeconds":300}],"priority":0,"enableServiceLinks":true,"preemptionPolicy":"PreemptLowerPriority"},"status":{"phase":"Running","conditions":[{"type":"Initialized","status":"True","lastProbeTime":null,"lastTransitionTime":"2024-03-15T03:45:52Z"},{"type":"Ready","status":"True","lastProbeTime":null,"lastTransitionTime":"2024-03-15T03:46:43Z"},{"type":"ContainersReady","status":"True","lastProbeTime":null,"lastTransitionTime":"2024-03-15T03:46:43Z"},{"type":"PodScheduled","status":"True","lastProbeTime":null,"lastTransitionTime":"2024-03-15T03:45:53Z"}],"hostIP":"10.1.160.149","podIP":"172.20.87.130","podIPs":[{"ip":"172.20.87.130"}],"startTime":"2024-03-15T03:45:52Z","containerStatuses":[{"name":"mo-br","state":{"running":{"startedAt":"2024-03-15T03:46:42Z"}},"lastState":{},"ready":true,"restartCount":0,"image":"registry.cn-hangzhou.aliyuncs.com/mocloud/mo-backup:4fa21f1","imageID":"registry.cn-hangzhou.aliyuncs.com/mocloud/mo-backup@sha256:96b3680fe7739eb276013fba516d95a7f11f8cde92170a09d835b9f73d6f7e7b","containerID":"containerd://5e28da92e75da0968262af37e7c688c097e78a2312947729f62dfb222b66b132","started":true}],"qosClass":"Guaranteed"}}

DEBUG    src.tests.upgrade.test_mo_upgrade:test_mo_upgrade.py:219 wait for the conditions by '<lambda>' with args: ('restore-restore-freetier-02', 'moc-upgrade-test'), {}
DEBUG    kubernetes.client.rest:rest.py:235 response body: {"kind":"Pod","apiVersion":"v1","metadata":{"name":"restore-restore-freetier-02","namespace":"moc-upgrade-test","uid":"e16f2157-ce81-46db-a035-d4ceba7cfb90","resourceVersion":"96213815","creationTimestamp":"2024-03-15T03:44:29Z","managedFields":[{"manager":"OpenAPI-Generator","operation":"Update","apiVersion":"v1","time":"2024-03-15T03:44:29Z","fieldsType":"FieldsV1","fieldsV1":{"f:spec":{"f:containers":{"k:{\"name\":\"mo-br\"}":{".":{},"f:args":{},"f:command":{},"f:env":{".":{},"k:{\"name\":\"AWS_ACCESS_KEY_ID\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"AWS_SECRET_ACCESS_KEY\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}}},"f:image":{},"f:imagePullPolicy":{},"f:name":{},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{}}},"f:dnsPolicy":{},"f:enableServiceLinks":{},"f:imagePullSecrets":{".":{},"k:{\"name\":\"acr-credential-0cd66774c2e1635329078c8ad94a7d92\"}":{},"k:{\"name\":\"acr-credential-518dfd1883737c2a6bde99ed6fee583c\"}":{},"k:{\"name\":\"acr-credential-90a511cb8249950d96ce0336cae093f0\"}":{},"k:{\"name\":\"acr-credential-91029a2c549212d737cbd7e40e1a6ebb\"}":{},"k:{\"name\":\"acr-credential-bbec27b1dbdc90bb0f27dbd225b24e17\"}":{}},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{},"f:terminationGracePeriodSeconds":{},"f:tolerations":{}}}},{"manager":"kube-scheduler","operation":"Update","apiVersion":"v1","time":"2024-03-15T03:44:29Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:conditions":{".":{},"k:{\"type\":\"PodScheduled\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:message":{},"f:reason":{},"f:status":{},"f:type":{}}}}},"subresource":"status"},{"manager":"kubelet","operation":"Update","apiVersion":"v1","time":"2024-03-15T03:46:43Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:conditions":{"k:{\"type\":\"ContainersReady\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Initialized\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Ready\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:status":{},"f:type":{}}},"f:containerStatuses":{},"f:hostIP":{},"f:phase":{},"f:podIP":{},"f:podIPs":{".":{},"k:{\"ip\":\"172.20.87.130\"}":{".":{},"f:ip":{}}},"f:startTime":{}}},"subresource":"status"}]},"spec":{"volumes":[{"name":"kube-api-access-kcbh4","projected":{"sources":[{"serviceAccountToken":{"expirationSeconds":3607,"path":"token"}},{"configMap":{"name":"kube-root-ca.crt","items":[{"key":"ca.crt","path":"ca.crt"}]}},{"downwardAPI":{"items":[{"path":"namespace","fieldRef":{"apiVersion":"v1","fieldPath":"metadata.namespace"}}]}}],"defaultMode":420}}],"containers":[{"name":"mo-br","image":"registry.cn-hangzhou.aliyuncs.com/mocloud/mo-backup:4fa21f1","command":["/mo_br","restore"],"args":["--backup_dir","s3","--backup_endpoint","http://oss-cn-hangzhou-internal.aliyuncs.com","--backup_bucket","moc-backup-test","--backup_filepath","backup-freetier-02-20240315021618","--backup_region","cn-hangzhou","--backup_access_key_id","$(AWS_ACCESS_KEY_ID)","--backup_secret_access_key","$(AWS_SECRET_ACCESS_KEY)","--restore_dir","s3","--restore_endpoint","http://oss-cn-hangzhou-internal.aliyuncs.com","--restore_access_key_id","$(AWS_ACCESS_KEY_ID)","--restore_secret_access_key","$(AWS_SECRET_ACCESS_KEY)","--restore_bucket","moc-backup-test","--restore_filepath","restore-freetier-02-20240315021618","--restore_region","cn-hangzhou","--log_level","debug"],"env":[{"name":"AWS_ACCESS_KEY_ID","valueFrom":{"secretKeyRef":{"name":"aliyun-moc-backup-test","key":"AWS_ACCESS_KEY_ID"}}},{"name":"AWS_SECRET_ACCESS_KEY","valueFrom":{"secretKeyRef":{"name":"aliyun-moc-backup-test","key":"AWS_SECRET_ACCESS_KEY"}}}],"resources":{"limits":{"cpu":"7","memory":"13Gi"},"requests":{"cpu":"7","memory":"13Gi"}},"volumeMounts":[{"name":"kube-api-access-kcbh4","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Never","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"default","serviceAccount":"default","nodeName":"cn-hangzhou.10.1.160.149","securityContext":{},"imagePullSecrets":[{"name":"acr-credential-0cd66774c2e1635329078c8ad94a7d92"},{"name":"acr-credential-90a511cb8249950d96ce0336cae093f0"},{"name":"acr-credential-518dfd1883737c2a6bde99ed6fee583c"},{"name":"acr-credential-91029a2c549212d737cbd7e40e1a6ebb"},{"name":"acr-credential-bbec27b1dbdc90bb0f27dbd225b24e17"}],"schedulerName":"default-scheduler","tolerations":[{"operator":"Exists","effect":"NoSchedule"},{"key":"node.kubernetes.io/not-ready","operator":"Exists","effect":"NoExecute","tolerationSeconds":300},{"key":"node.kubernetes.io/unreachable","operator":"Exists","effect":"NoExecute","tolerationSeconds":300}],"priority":0,"enableServiceLinks":true,"preemptionPolicy":"PreemptLowerPriority"},"status":{"phase":"Running","conditions":[{"type":"Initialized","status":"True","lastProbeTime":null,"lastTransitionTime":"2024-03-15T03:45:52Z"},{"type":"Ready","status":"True","lastProbeTime":null,"lastTransitionTime":"2024-03-15T03:46:43Z"},{"type":"ContainersReady","status":"True","lastProbeTime":null,"lastTransitionTime":"2024-03-15T03:46:43Z"},{"type":"PodScheduled","status":"True","lastProbeTime":null,"lastTransitionTime":"2024-03-15T03:45:53Z"}],"hostIP":"10.1.160.149","podIP":"172.20.87.130","podIPs":[{"ip":"172.20.87.130"}],"startTime":"2024-03-15T03:45:52Z","containerStatuses":[{"name":"mo-br","state":{"running":{"startedAt":"2024-03-15T03:46:42Z"}},"lastState":{},"ready":true,"restartCount":0,"image":"registry.cn-hangzhou.aliyuncs.com/mocloud/mo-backup:4fa21f1","imageID":"registry.cn-hangzhou.aliyuncs.com/mocloud/mo-backup@sha256:96b3680fe7739eb276013fba516d95a7f11f8cde92170a09d835b9f73d6f7e7b","containerID":"containerd://5e28da92e75da0968262af37e7c688c097e78a2312947729f62dfb222b66b132","started":true}],"qosClass":"Guaranteed"}}

DEBUG    src.tests.upgrade.test_mo_upgrade:test_mo_upgrade.py:219 wait for the conditions by '<lambda>' with args: ('restore-restore-freetier-02', 'moc-upgrade-test'), {}
DEBUG    kubernetes.client.rest:rest.py:235 response body: {"kind":"Pod","apiVersion":"v1","metadata":{"name":"restore-restore-freetier-02","namespace":"moc-upgrade-test","uid":"e16f2157-ce81-46db-a035-d4ceba7cfb90","resourceVersion":"96284589","creationTimestamp":"2024-03-15T03:44:29Z","managedFields":[{"manager":"OpenAPI-Generator","operation":"Update","apiVersion":"v1","time":"2024-03-15T03:44:29Z","fieldsType":"FieldsV1","fieldsV1":{"f:spec":{"f:containers":{"k:{\"name\":\"mo-br\"}":{".":{},"f:args":{},"f:command":{},"f:env":{".":{},"k:{\"name\":\"AWS_ACCESS_KEY_ID\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}},"k:{\"name\":\"AWS_SECRET_ACCESS_KEY\"}":{".":{},"f:name":{},"f:valueFrom":{".":{},"f:secretKeyRef":{}}}},"f:image":{},"f:imagePullPolicy":{},"f:name":{},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:terminationMessagePath":{},"f:terminationMessagePolicy":{}}},"f:dnsPolicy":{},"f:enableServiceLinks":{},"f:imagePullSecrets":{".":{},"k:{\"name\":\"acr-credential-0cd66774c2e1635329078c8ad94a7d92\"}":{},"k:{\"name\":\"acr-credential-518dfd1883737c2a6bde99ed6fee583c\"}":{},"k:{\"name\":\"acr-credential-90a511cb8249950d96ce0336cae093f0\"}":{},"k:{\"name\":\"acr-credential-91029a2c549212d737cbd7e40e1a6ebb\"}":{},"k:{\"name\":\"acr-credential-bbec27b1dbdc90bb0f27dbd225b24e17\"}":{}},"f:restartPolicy":{},"f:schedulerName":{},"f:securityContext":{},"f:terminationGracePeriodSeconds":{},"f:tolerations":{}}}},{"manager":"kube-scheduler","operation":"Update","apiVersion":"v1","time":"2024-03-15T03:44:29Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:conditions":{".":{},"k:{\"type\":\"PodScheduled\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:message":{},"f:reason":{},"f:status":{},"f:type":{}}}}},"subresource":"status"},{"manager":"kubelet","operation":"Update","apiVersion":"v1","time":"2024-03-15T05:25:45Z","fieldsType":"FieldsV1","fieldsV1":{"f:status":{"f:conditions":{"k:{\"type\":\"ContainersReady\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:reason":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Initialized\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:reason":{},"f:status":{},"f:type":{}},"k:{\"type\":\"Ready\"}":{".":{},"f:lastProbeTime":{},"f:lastTransitionTime":{},"f:reason":{},"f:status":{},"f:type":{}}},"f:containerStatuses":{},"f:hostIP":{},"f:phase":{},"f:podIP":{},"f:podIPs":{".":{},"k:{\"ip\":\"172.20.87.130\"}":{".":{},"f:ip":{}}},"f:startTime":{}}},"subresource":"status"}]},"spec":{"volumes":[{"name":"kube-api-access-kcbh4","projected":{"sources":[{"serviceAccountToken":{"expirationSeconds":3607,"path":"token"}},{"configMap":{"name":"kube-root-ca.crt","items":[{"key":"ca.crt","path":"ca.crt"}]}},{"downwardAPI":{"items":[{"path":"namespace","fieldRef":{"apiVersion":"v1","fieldPath":"metadata.namespace"}}]}}],"defaultMode":420}}],"containers":[{"name":"mo-br","image":"registry.cn-hangzhou.aliyuncs.com/mocloud/mo-backup:4fa21f1","command":["/mo_br","restore"],"args":["--backup_dir","s3","--backup_endpoint","http://oss-cn-hangzhou-internal.aliyuncs.com","--backup_bucket","moc-backup-test","--backup_filepath","backup-freetier-02-20240315021618","--backup_region","cn-hangzhou","--backup_access_key_id","$(AWS_ACCESS_KEY_ID)","--backup_secret_access_key","$(AWS_SECRET_ACCESS_KEY)","--restore_dir","s3","--restore_endpoint","http://oss-cn-hangzhou-internal.aliyuncs.com","--restore_access_key_id","$(AWS_ACCESS_KEY_ID)","--restore_secret_access_key","$(AWS_SECRET_ACCESS_KEY)","--restore_bucket","moc-backup-test","--restore_filepath","restore-freetier-02-20240315021618","--restore_region","cn-hangzhou","--log_level","debug"],"env":[{"name":"AWS_ACCESS_KEY_ID","valueFrom":{"secretKeyRef":{"name":"aliyun-moc-backup-test","key":"AWS_ACCESS_KEY_ID"}}},{"name":"AWS_SECRET_ACCESS_KEY","valueFrom":{"secretKeyRef":{"name":"aliyun-moc-backup-test","key":"AWS_SECRET_ACCESS_KEY"}}}],"resources":{"limits":{"cpu":"7","memory":"13Gi"},"requests":{"cpu":"7","memory":"13Gi"}},"volumeMounts":[{"name":"kube-api-access-kcbh4","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Never","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"default","serviceAccount":"default","nodeName":"cn-hangzhou.10.1.160.149","securityContext":{},"imagePullSecrets":[{"name":"acr-credential-0cd66774c2e1635329078c8ad94a7d92"},{"name":"acr-credential-90a511cb8249950d96ce0336cae093f0"},{"name":"acr-credential-518dfd1883737c2a6bde99ed6fee583c"},{"name":"acr-credential-91029a2c549212d737cbd7e40e1a6ebb"},{"name":"acr-credential-bbec27b1dbdc90bb0f27dbd225b24e17"}],"schedulerName":"default-scheduler","tolerations":[{"operator":"Exists","effect":"NoSchedule"},{"key":"node.kubernetes.io/not-ready","operator":"Exists","effect":"NoExecute","tolerationSeconds":300},{"key":"node.kubernetes.io/unreachable","operator":"Exists","effect":"NoExecute","tolerationSeconds":300}],"priority":0,"enableServiceLinks":true,"preemptionPolicy":"PreemptLowerPriority"},"status":{"phase":"Succeeded","conditions":[{"type":"Initialized","status":"True","lastProbeTime":null,"lastTransitionTime":"2024-03-15T03:45:52Z","reason":"PodCompleted"},{"type":"Ready","status":"False","lastProbeTime":null,"lastTransitionTime":"2024-03-15T05:25:43Z","reason":"PodCompleted"},{"type":"ContainersReady","status":"False","lastProbeTime":null,"lastTransitionTime":"2024-03-15T05:25:43Z","reason":"PodCompleted"},{"type":"PodScheduled","status":"True","lastProbeTime":null,"lastTransitionTime":"2024-03-15T03:45:53Z"}],"hostIP":"10.1.160.149","podIP":"172.20.87.130","podIPs":[{"ip":"172.20.87.130"}],"startTime":"2024-03-15T03:45:52Z","containerStatuses":[{"name":"mo-br","state":{"terminated":{"exitCode":0,"reason":"Completed","startedAt":"2024-03-15T03:46:42Z","finishedAt":"2024-03-15T05:25:42Z","containerID":"containerd://5e28da92e75da0968262af37e7c688c097e78a2312947729f62dfb222b66b132"}},"lastState":{},"ready":false,"restartCount":0,"image":"registry.cn-hangzhou.aliyuncs.com/mocloud/mo-backup:4fa21f1","imageID":"registry.cn-hangzhou.aliyuncs.com/mocloud/mo-backup@sha256:96b3680fe7739eb276013fba516d95a7f11f8cde92170a09d835b9f73d6f7e7b","containerID":"containerd://5e28da92e75da0968262af37e7c688c097e78a2312947729f62dfb222b66b132","started":false}],"qosClass":"Guaranteed"}}