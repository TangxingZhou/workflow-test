DEBUG    pytest_dependency:pytest_dependency.py:87 check dependencies of test_restore_cluster in module scope ...
DEBUG    pytest_dependency:pytest_dependency.py:92 ... UpgradeMOTestSuite::test_restore_mo_data succeeded
DEBUG    kubernetes.client.rest:rest.py:235 response body: {"apiVersion":"core.matrixone-cloud/v1alpha1","kind":"Cluster","metadata":{"annotations":{"matrixone.cloud/enable-aksk-authorize":"true"},"creationTimestamp":"2024-03-15T05:26:57Z","generation":1,"labels":{"matrixone.cloud/cordoned":"Y","matrixone.cloud/role":"root"},"managedFields":[{"apiVersion":"core.matrixone-cloud/v1alpha1","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:matrixone.cloud/enable-aksk-authorize":{}},"f:labels":{".":{},"f:matrixone.cloud/cordoned":{},"f:matrixone.cloud/role":{}}},"f:spec":{".":{},"f:cnPools":{".":{},"k:{\"name\":\"limited\"}":{".":{},"f:managed":{".":{},"f:config":{},"f:nodeSelector":{".":{},"f:matrixone.cloud/cluster-pool":{},"f:matrixone.cloud/profile":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:sharedStorageCache":{".":{},"f:memoryCacheSize":{}},"f:storageClassName":{},"f:storageSize":{},"f:toleratedTaints":{}},"f:name":{},"f:poolStrategy":{".":{},"f:scaleStrategy":{".":{},"f:maxIdle":{}},"f:updateStrategy":{".":{},"f:reclaimTimeout":{}}},"f:profile":{}},"k:{\"name\":\"pool\"}":{".":{},"f:managed":{".":{},"f:config":{},"f:nodeSelector":{".":{},"f:matrixone.cloud/cluster-pool":{},"f:matrixone.cloud/profile":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:sharedStorageCache":{".":{},"f:memoryCacheSize":{}},"f:storageClassName":{},"f:storageSize":{},"f:toleratedTaints":{}},"f:name":{},"f:poolStrategy":{".":{},"f:scaleStrategy":{".":{},"f:maxIdle":{}},"f:updateStrategy":{".":{},"f:reclaimTimeout":{}}},"f:profile":{}}},"f:cnSets":{".":{},"k:{\"name\":\"default\"}":{".":{},"f:managed":{".":{},"f:componentBackend":{},"f:config":{},"f:nodeSelector":{".":{},"f:matrixone.cloud/cluster-pool":{},"f:matrixone.cloud/profile":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:sharedStorageCache":{".":{},"f:memoryCacheSize":{}},"f:storageClassName":{},"f:storageSize":{},"f:toleratedTaints":{}},"f:name":{},"f:profile":{},"f:replicas":{},"f:scalingConfig":{".":{},"f:maxReplicas":{},"f:minReplicas":{},"f:policy":{}}}},"f:dnSets":{".":{},"k:{\"name\":\"default\"}":{".":{},"f:managed":{".":{},"f:config":{},"f:nodeSelector":{".":{},"f:matrixone.cloud/cluster-pool":{},"f:matrixone.cloud/profile":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:sharedStorageCache":{".":{},"f:memoryCacheSize":{}},"f:storageClassName":{},"f:storageSize":{},"f:toleratedTaints":{}},"f:name":{},"f:profile":{},"f:replicas":{}}},"f:endpoint":{".":{},"f:mode":{},"f:proxySpec":{".":{},"f:image":{},"f:managed":{".":{},"f:config":{},"f:profile":{}},"f:pluginImage":{},"f:replicas":{}},"f:whitelistIPRanges":{}},"f:logSet":{".":{},"f:managed":{".":{},"f:config":{},"f:nodeSelector":{".":{},"f:matrixone.cloud/cluster-pool":{},"f:matrixone.cloud/profile":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:storageClassName":{},"f:storageSize":{},"f:toleratedTaints":{}},"f:name":{},"f:profile":{},"f:replicas":{}},"f:managed":{".":{},"f:imageRepository":{},"f:localServiceRef":{".":{},"f:name":{}},"f:objectStorage":{".":{},"f:path":{},"f:region":{},"f:restored":{}}},"f:state":{},"f:unitName":{},"f:unitSelector":{},"f:version":{}},"f:state":{}},"manager":"OpenAPI-Generator","operation":"Update","time":"2024-03-15T05:26:57Z"}],"name":"restore-freetier-02","resourceVersion":"58633811","uid":"e9b381cd-d562-40a5-b42a-3a09f985b0be"},"spec":{"cnPools":[{"managed":{"config":"[cn.frontend]\nsaveQueryResult = \"on\"\nqueryResultTimeout = 72\nlengthOfQueryPrinted = 10000\ndisable-select-into = true\n[cn.txn]\nenable-leak-check = 1\nmax-active-ages = \"20m\"\n[observability]\nmetricUpdateStorageUsageInterval = \"15m\"\nenableStmtMerge = true\nenableMetricToProm = true\n","nodeSelector":{"matrixone.cloud/cluster-pool":"restore-freetier-02","matrixone.cloud/profile":"cn.standard"},"resources":{"limits":{"cpu":"7","memory":"13Gi"},"requests":{"cpu":"7","memory":"13Gi"}},"sharedStorageCache":{"memoryCacheSize":"1Gi"},"storageClassName":"alicloud-disk-essd-pl1","storageSize":"300Gi","toleratedTaints":["profile.matrixone.cloud/cn.standard","cluster-pool.matrixone.cloud/restore-freetier-02"]},"name":"pool","poolStrategy":{"scaleStrategy":{"maxIdle":2},"updateStrategy":{"reclaimTimeout":"24h0m0s"}},"profile":"cn.standard"},{"managed":{"config":"[cn.frontend]\nsaveQueryResult = \"on\"\nqueryResultTimeout = 72\nlengthOfQueryPrinted = 10000\ndisable-select-into = true\n[cn.txn]\nenable-leak-check = 1\nmax-active-ages = \"20m\"\n[observability]\nmetricUpdateStorageUsageInterval = \"15m\"\nenableStmtMerge = true\nenableMetricToProm = true\n","nodeSelector":{"matrixone.cloud/cluster-pool":"restore-freetier-02","matrixone.cloud/profile":"cn.tiny"},"resources":{"limits":{"cpu":"1","memory":"2Gi"},"requests":{"cpu":"1","memory":"2Gi"}},"sharedStorageCache":{"memoryCacheSize":"128Mi"},"storageClassName":"alicloud-disk-essd-pl1","storageSize":"300Gi","toleratedTaints":["profile.matrixone.cloud/cn.tiny","cluster-pool.matrixone.cloud/restore-freetier-02"]},"name":"limited","poolStrategy":{"scaleStrategy":{"maxIdle":0},"updateStrategy":{"reclaimTimeout":"24h0m0s"}},"profile":"cn.tiny"}],"cnSets":[{"managed":{"componentBackend":"Pod","config":"[cn]\ninit-work-state = \"Draining\"\n[cn.frontend]\nsaveQueryResult = \"on\"\nqueryResultTimeout = 72\nlengthOfQueryPrinted = 10000\ndisable-select-into = true\n[cn.txn]\nenable-leak-check = 1\nmax-active-ages = \"20m\"\n[observability]\nmetricUpdateStorageUsageInterval = \"15m\"\nenableStmtMerge = true\nenableMetricToProm = true\n","nodeSelector":{"matrixone.cloud/cluster-pool":"restore-freetier-02","matrixone.cloud/profile":"cn.standard"},"resources":{"limits":{"cpu":"7","memory":"13Gi"},"requests":{"cpu":"7","memory":"13Gi"}},"sharedStorageCache":{"memoryCacheSize":"1Gi"},"storageClassName":"alicloud-disk-essd-pl1","storageSize":"300Gi","toleratedTaints":["profile.matrixone.cloud/cn.standard","cluster-pool.matrixone.cloud/restore-freetier-02"]},"name":"default","profile":"cn.standard","replicas":2,"scalingConfig":{"maxReplicas":10,"minReplicas":2,"policy":"AutoScaling"}}],"dnSets":[{"managed":{"config":"[log]\nlevel = \"info\"\n","nodeSelector":{"matrixone.cloud/cluster-pool":"restore-freetier-02","matrixone.cloud/profile":"dn.standard"},"resources":{"limits":{"cpu":"15","memory":"29184Mi"},"requests":{"cpu":"15","memory":"29184Mi"}},"sharedStorageCache":{"memoryCacheSize":"5Gi"},"storageClassName":"alicloud-disk-essd-pl1","storageSize":"100Gi","toleratedTaints":["profile.matrixone.cloud/dn.standard","cluster-pool.matrixone.cloud/restore-freetier-02"]},"name":"default","profile":"dn.standard","replicas":1}],"endpoint":{"mode":"Dedicated","proxySpec":{"image":"registry.cn-shanghai.aliyuncs.com/matrixorigin/matrixone:nightly-e94ba155","managed":{"config":"[proxy.plugin]\ntimeout = \"3s\"\n","profile":"proxy.standard"},"pluginImage":"registry.cn-hangzhou.aliyuncs.com/ack-cos/plugin:49e2ffd8-20240201","replicas":2},"whitelistIPRanges":["0.0.0.0/0"]},"logSet":{"managed":{"config":"[log]\nlevel = \"info\"\n","nodeSelector":{"matrixone.cloud/cluster-pool":"restore-freetier-02","matrixone.cloud/profile":"log.standard"},"resources":{"limits":{"cpu":"3","memory":"6Gi"},"requests":{"cpu":"3","memory":"6Gi"}},"storageClassName":"alicloud-disk-essd-pl1","storageSize":"100Gi","toleratedTaints":["profile.matrixone.cloud/log.standard","cluster-pool.matrixone.cloud/restore-freetier-02"]},"name":"default","profile":"log.standard","replicas":3},"managed":{"imageRepository":"registry.cn-shanghai.aliyuncs.com/matrixorigin/matrixone","localServiceRef":{"name":"local-service"},"objectStorage":{"path":"moc-backup-test/restore-freetier-02-20240315021618","region":"cn-hangzhou","restored":true}},"state":"Active","unitName":"qa-unit-cn-hangzhou","unitSelector":{"matchLabels":{"matrixone.cloud/cloud":"aliyun","matrixone.cloud/region":"cn-hangzhou"}},"version":"nightly-e94ba155"},"state":{}}

DEBUG    kubernetes.client.rest:rest.py:235 response body: {"kind":"Namespace","apiVersion":"v1","metadata":{"name":"restore-freetier-02","uid":"f0662edb-f825-4c31-88ac-8d5c52d10834","resourceVersion":"96285441","creationTimestamp":"2024-03-15T05:26:57Z","labels":{"elbv2.k8s.aws/pod-readiness-gate-inject":"enabled","kubernetes.io/metadata.name":"restore-freetier-02"},"managedFields":[{"manager":"Go-http-client","operation":"Update","apiVersion":"v1","time":"2024-03-15T05:26:57Z","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:labels":{".":{},"f:elbv2.k8s.aws/pod-readiness-gate-inject":{},"f:kubernetes.io/metadata.name":{}}}}}]},"spec":{"finalizers":["kubernetes"]},"status":{"phase":"Active"}}

DEBUG    kubernetes.client.rest:rest.py:235 response body: {"kind":"SecretList","apiVersion":"v1","metadata":{"resourceVersion":"96285461"},"items":[{"metadata":{"name":"acr-credential-0cd66774c2e1635329078c8ad94a7d92","namespace":"restore-freetier-02","uid":"49e9f722-c69b-41b5-8b42-85b7074efd9c","resourceVersion":"96285445","creationTimestamp":"2024-03-15T05:26:57Z","managedFields":[{"manager":"aliyun-acr-credential-helper","operation":"Update","apiVersion":"v1","time":"2024-03-15T05:26:57Z","fieldsType":"FieldsV1","fieldsV1":{"f:data":{".":{},"f:.dockerconfigjson":{}},"f:type":{}}}]},"data":{".dockerconfigjson":"eyJhdXRocyI6eyJyZWdpc3RyeS5jbi1oYW5nemhvdS5hbGl5dW5jcy5jb20iOnsiVXNlcm5hbWUiOiJjcl90ZW1wX3VzZXIiLCJQYXNzd29yZCI6ImV5SmhkWFJvVkc5clpXNUpaR1Z1ZEdsbWFXVnlJam9pWkdJek16SmtNelUyWVRVeE5HTXpaamswWmpZNVlURmtNbUV6TW1Jd1kyUWlMQ0owYVcxbElqb2lNVGN4TURVeE5qTTNNekF3TUNJc0luUjVjR1VpT2lKemRITWlMQ0oxYzJWeVNXUWlPaUl4T0RrMU5qazRNekF6TXpZeU5UVXdJbjA6NTk0NGUzYzMwMDg3ZTgwMTc5OWRmZjdjMmY0ZWIxMTRhZTRmYTQ1OCIsIkVtYWlsIjoiY3NAYWxpeXVuY3MuY29tIiwiUHJvdmlkZXIiOm51bGx9fX0="},"type":"kubernetes.io/dockerconfigjson"},{"metadata":{"name":"acr-credential-518dfd1883737c2a6bde99ed6fee583c","namespace":"restore-freetier-02","uid":"7fc11534-3199-4ae4-b033-be3c3ea02f31","resourceVersion":"96285448","creationTimestamp":"2024-03-15T05:26:57Z","managedFields":[{"manager":"aliyun-acr-credential-helper","operation":"Update","apiVersion":"v1","time":"2024-03-15T05:26:57Z","fieldsType":"FieldsV1","fieldsV1":{"f:data":{".":{},"f:.dockerconfigjson":{}},"f:type":{}}}]},"data":{".dockerconfigjson":"eyJhdXRocyI6eyJyZWdpc3RyeS1pbnRlcm5hbC5jbi1oYW5nemhvdS5hbGl5dW5jcy5jb20iOnsiVXNlcm5hbWUiOiJjcl90ZW1wX3VzZXIiLCJQYXNzd29yZCI6ImV5SmhkWFJvVkc5clpXNUpaR1Z1ZEdsbWFXVnlJam9pWkdJek16SmtNelUyWVRVeE5HTXpaamswWmpZNVlURmtNbUV6TW1Jd1kyUWlMQ0owYVcxbElqb2lNVGN4TURVeE5qTTNNekF3TUNJc0luUjVjR1VpT2lKemRITWlMQ0oxYzJWeVNXUWlPaUl4T0RrMU5qazRNekF6TXpZeU5UVXdJbjA6NTk0NGUzYzMwMDg3ZTgwMTc5OWRmZjdjMmY0ZWIxMTRhZTRmYTQ1OCIsIkVtYWlsIjoiY3NAYWxpeXVuY3MuY29tIiwiUHJvdmlkZXIiOm51bGx9fX0="},"type":"kubernetes.io/dockerconfigjson"},{"metadata":{"name":"acr-credential-90a511cb8249950d96ce0336cae093f0","namespace":"restore-freetier-02","uid":"1405c7f8-cda2-409b-9ed9-49bd0d0a690a","resourceVersion":"96285447","creationTimestamp":"2024-03-15T05:26:57Z","managedFields":[{"manager":"aliyun-acr-credential-helper","operation":"Update","apiVersion":"v1","time":"2024-03-15T05:26:57Z","fieldsType":"FieldsV1","fieldsV1":{"f:data":{".":{},"f:.dockerconfigjson":{}},"f:type":{}}}]},"data":{".dockerconfigjson":"eyJhdXRocyI6eyJyZWdpc3RyeS12cGMuY24taGFuZ3pob3UuYWxpeXVuY3MuY29tIjp7IlVzZXJuYW1lIjoiY3JfdGVtcF91c2VyIiwiUGFzc3dvcmQiOiJleUpoZFhSb1ZHOXJaVzVKWkdWdWRHbG1hV1Z5SWpvaVpHSXpNekprTXpVMllUVXhOR016WmprMFpqWTVZVEZrTW1Fek1tSXdZMlFpTENKMGFXMWxJam9pTVRjeE1EVXhOak0zTXpBd01DSXNJblI1Y0dVaU9pSnpkSE1pTENKMWMyVnlTV1FpT2lJeE9EazFOams0TXpBek16WXlOVFV3SW4wOjU5NDRlM2MzMDA4N2U4MDE3OTlkZmY3YzJmNGViMTE0YWU0ZmE0NTgiLCJFbWFpbCI6ImNzQGFsaXl1bmNzLmNvbSIsIlByb3ZpZGVyIjpudWxsfX19"},"type":"kubernetes.io/dockerconfigjson"},{"metadata":{"name":"acr-credential-91029a2c549212d737cbd7e40e1a6ebb","namespace":"restore-freetier-02","uid":"e91e376c-7686-4da9-8451-c7e2bbd4181c","resourceVersion":"96285449","creationTimestamp":"2024-03-15T05:26:57Z","managedFields":[{"manager":"aliyun-acr-credential-helper","operation":"Update","apiVersion":"v1","time":"2024-03-15T05:26:57Z","fieldsType":"FieldsV1","fieldsV1":{"f:data":{".":{},"f:.dockerconfigjson":{}},"f:type":{}}}]},"data":{".dockerconfigjson":"eyJhdXRocyI6eyJyZWdpc3RyeS1pbnRsLmNuLWhhbmd6aG91LmFsaXl1bmNzLmNvbSI6eyJVc2VybmFtZSI6ImNyX3RlbXBfdXNlciIsIlBhc3N3b3JkIjoiZXlKaGRYUm9WRzlyWlc1SlpHVnVkR2xtYVdWeUlqb2laR0l6TXpKa016VTJZVFV4TkdNelpqazBaalk1WVRGa01tRXpNbUl3WTJRaUxDSjBhVzFsSWpvaU1UY3hNRFV4TmpNM016QXdNQ0lzSW5SNWNHVWlPaUp6ZEhNaUxDSjFjMlZ5U1dRaU9pSXhPRGsxTmprNE16QXpNell5TlRVd0luMDo1OTQ0ZTNjMzAwODdlODAxNzk5ZGZmN2MyZjRlYjExNGFlNGZhNDU4IiwiRW1haWwiOiJjc0BhbGl5dW5jcy5jb20iLCJQcm92aWRlciI6bnVsbH19fQ=="},"type":"kubernetes.io/dockerconfigjson"},{"metadata":{"name":"acr-credential-bbec27b1dbdc90bb0f27dbd225b24e17","namespace":"restore-freetier-02","uid":"f245977a-0b87-46ba-b6bd-ea5f7221a33e","resourceVersion":"96285450","creationTimestamp":"2024-03-15T05:26:57Z","managedFields":[{"manager":"aliyun-acr-credential-helper","operation":"Update","apiVersion":"v1","time":"2024-03-15T05:26:57Z","fieldsType":"FieldsV1","fieldsV1":{"f:data":{".":{},"f:.dockerconfigjson":{}},"f:type":{}}}]},"data":{".dockerconfigjson":"eyJhdXRocyI6eyJyZWdpc3RyeS1pbnRsLXZwYy5jbi1oYW5nemhvdS5hbGl5dW5jcy5jb20iOnsiVXNlcm5hbWUiOiJjcl90ZW1wX3VzZXIiLCJQYXNzd29yZCI6ImV5SmhkWFJvVkc5clpXNUpaR1Z1ZEdsbWFXVnlJam9pWkdJek16SmtNelUyWVRVeE5HTXpaamswWmpZNVlURmtNbUV6TW1Jd1kyUWlMQ0owYVcxbElqb2lNVGN4TURVeE5qTTNNekF3TUNJc0luUjVjR1VpT2lKemRITWlMQ0oxYzJWeVNXUWlPaUl4T0RrMU5qazRNekF6TXpZeU5UVXdJbjA6NTk0NGUzYzMwMDg3ZTgwMTc5OWRmZjdjMmY0ZWIxMTRhZTRmYTQ1OCIsIkVtYWlsIjoiY3NAYWxpeXVuY3MuY29tIiwiUHJvdmlkZXIiOm51bGx9fX0="},"type":"kubernetes.io/dockerconfigjson"}]}

DEBUG    kubernetes.client.rest:rest.py:235 response body: {"kind":"Secret","apiVersion":"v1","metadata":{"name":"root","namespace":"restore-freetier-02","uid":"090cae51-2bed-4772-ac2c-76f2d97381ee","resourceVersion":"96285463","creationTimestamp":"2024-03-15T05:26:58Z","managedFields":[{"manager":"OpenAPI-Generator","operation":"Update","apiVersion":"v1","time":"2024-03-15T05:26:58Z","fieldsType":"FieldsV1","fieldsV1":{"f:data":{".":{},"f:password":{},"f:username":{}},"f:type":{}}}]},"data":{"password":"V29WbWltVjlCYko2","username":"ZHVtcA=="},"type":"Opaque"}

DEBUG    kubernetes.client.rest:rest.py:235 response body: {"apiVersion":"core.matrixone-cloud/v1alpha1","kind":"Cluster","metadata":{"annotations":{"matrixone.cloud/enable-aksk-authorize":"true"},"creationTimestamp":"2024-03-15T05:26:57Z","generation":1,"labels":{"matrixone.cloud/cordoned":"Y","matrixone.cloud/role":"root"},"managedFields":[{"apiVersion":"core.matrixone-cloud/v1alpha1","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:matrixone.cloud/enable-aksk-authorize":{}},"f:labels":{".":{},"f:matrixone.cloud/cordoned":{},"f:matrixone.cloud/role":{}}},"f:spec":{".":{},"f:cnPools":{".":{},"k:{\"name\":\"limited\"}":{".":{},"f:managed":{".":{},"f:config":{},"f:nodeSelector":{".":{},"f:matrixone.cloud/cluster-pool":{},"f:matrixone.cloud/profile":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:sharedStorageCache":{".":{},"f:memoryCacheSize":{}},"f:storageClassName":{},"f:storageSize":{},"f:toleratedTaints":{}},"f:name":{},"f:poolStrategy":{".":{},"f:scaleStrategy":{".":{},"f:maxIdle":{}},"f:updateStrategy":{".":{},"f:reclaimTimeout":{}}},"f:profile":{}},"k:{\"name\":\"pool\"}":{".":{},"f:managed":{".":{},"f:config":{},"f:nodeSelector":{".":{},"f:matrixone.cloud/cluster-pool":{},"f:matrixone.cloud/profile":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:sharedStorageCache":{".":{},"f:memoryCacheSize":{}},"f:storageClassName":{},"f:storageSize":{},"f:toleratedTaints":{}},"f:name":{},"f:poolStrategy":{".":{},"f:scaleStrategy":{".":{},"f:maxIdle":{}},"f:updateStrategy":{".":{},"f:reclaimTimeout":{}}},"f:profile":{}}},"f:cnSets":{".":{},"k:{\"name\":\"default\"}":{".":{},"f:managed":{".":{},"f:componentBackend":{},"f:config":{},"f:nodeSelector":{".":{},"f:matrixone.cloud/cluster-pool":{},"f:matrixone.cloud/profile":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:sharedStorageCache":{".":{},"f:memoryCacheSize":{}},"f:storageClassName":{},"f:storageSize":{},"f:toleratedTaints":{}},"f:name":{},"f:profile":{},"f:replicas":{},"f:scalingConfig":{".":{},"f:maxReplicas":{},"f:minReplicas":{},"f:policy":{}}}},"f:dnSets":{".":{},"k:{\"name\":\"default\"}":{".":{},"f:managed":{".":{},"f:config":{},"f:nodeSelector":{".":{},"f:matrixone.cloud/cluster-pool":{},"f:matrixone.cloud/profile":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:sharedStorageCache":{".":{},"f:memoryCacheSize":{}},"f:storageClassName":{},"f:storageSize":{},"f:toleratedTaints":{}},"f:name":{},"f:profile":{},"f:replicas":{}}},"f:endpoint":{".":{},"f:mode":{},"f:proxySpec":{".":{},"f:image":{},"f:managed":{".":{},"f:config":{},"f:profile":{}},"f:pluginImage":{},"f:replicas":{}},"f:whitelistIPRanges":{}},"f:logSet":{".":{},"f:managed":{".":{},"f:config":{},"f:nodeSelector":{".":{},"f:matrixone.cloud/cluster-pool":{},"f:matrixone.cloud/profile":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:storageClassName":{},"f:storageSize":{},"f:toleratedTaints":{}},"f:name":{},"f:profile":{},"f:replicas":{}},"f:managed":{".":{},"f:imageRepository":{},"f:localServiceRef":{".":{},"f:name":{}},"f:objectStorage":{".":{},"f:path":{},"f:region":{},"f:restored":{}}},"f:state":{},"f:unitName":{},"f:unitSelector":{},"f:version":{}},"f:state":{}},"manager":"Go-http-client","operation":"Update","time":"2024-03-15T05:26:57Z"},{"apiVersion":"core.matrixone-cloud/v1alpha1","fieldsType":"FieldsV1","fieldsV1":{"f:status":{".":{},"f:conditions":{},"f:endpoint":{},"f:phase":{}}},"manager":"Go-http-client","operation":"Update","subresource":"status","time":"2024-03-15T05:26:57Z"}],"name":"restore-freetier-02","resourceVersion":"96285442","uid":"958654b6-6428-4caa-b525-f346074db6df"},"spec":{"cnPools":[{"managed":{"config":"[cn.frontend]\nsaveQueryResult = \"on\"\nqueryResultTimeout = 72\nlengthOfQueryPrinted = 10000\ndisable-select-into = true\n[cn.txn]\nenable-leak-check = 1\nmax-active-ages = \"20m\"\n[observability]\nmetricUpdateStorageUsageInterval = \"15m\"\nenableStmtMerge = true\nenableMetricToProm = true\n","nodeSelector":{"matrixone.cloud/cluster-pool":"restore-freetier-02","matrixone.cloud/profile":"cn.standard"},"resources":{"limits":{"cpu":"7","memory":"13Gi"},"requests":{"cpu":"7","memory":"13Gi"}},"sharedStorageCache":{"memoryCacheSize":"1Gi"},"storageClassName":"alicloud-disk-essd-pl1","storageSize":"300Gi","toleratedTaints":["profile.matrixone.cloud/cn.standard","cluster-pool.matrixone.cloud/restore-freetier-02"]},"name":"pool","poolStrategy":{"scaleStrategy":{"maxIdle":2},"updateStrategy":{"reclaimTimeout":"24h0m0s"}},"profile":"cn.standard"},{"managed":{"config":"[cn.frontend]\nsaveQueryResult = \"on\"\nqueryResultTimeout = 72\nlengthOfQueryPrinted = 10000\ndisable-select-into = true\n[cn.txn]\nenable-leak-check = 1\nmax-active-ages = \"20m\"\n[observability]\nmetricUpdateStorageUsageInterval = \"15m\"\nenableStmtMerge = true\nenableMetricToProm = true\n","nodeSelector":{"matrixone.cloud/cluster-pool":"restore-freetier-02","matrixone.cloud/profile":"cn.tiny"},"resources":{"limits":{"cpu":"1","memory":"2Gi"},"requests":{"cpu":"1","memory":"2Gi"}},"sharedStorageCache":{"memoryCacheSize":"128Mi"},"storageClassName":"alicloud-disk-essd-pl1","storageSize":"300Gi","toleratedTaints":["profile.matrixone.cloud/cn.tiny","cluster-pool.matrixone.cloud/restore-freetier-02"]},"name":"limited","poolStrategy":{"scaleStrategy":{"maxIdle":0},"updateStrategy":{"reclaimTimeout":"24h0m0s"}},"profile":"cn.tiny"}],"cnSets":[{"managed":{"componentBackend":"Pod","config":"[cn]\ninit-work-state = \"Draining\"\n[cn.frontend]\nsaveQueryResult = \"on\"\nqueryResultTimeout = 72\nlengthOfQueryPrinted = 10000\ndisable-select-into = true\n[cn.txn]\nenable-leak-check = 1\nmax-active-ages = \"20m\"\n[observability]\nmetricUpdateStorageUsageInterval = \"15m\"\nenableStmtMerge = true\nenableMetricToProm = true\n","nodeSelector":{"matrixone.cloud/cluster-pool":"restore-freetier-02","matrixone.cloud/profile":"cn.standard"},"resources":{"limits":{"cpu":"7","memory":"13Gi"},"requests":{"cpu":"7","memory":"13Gi"}},"sharedStorageCache":{"memoryCacheSize":"1Gi"},"storageClassName":"alicloud-disk-essd-pl1","storageSize":"300Gi","toleratedTaints":["profile.matrixone.cloud/cn.standard","cluster-pool.matrixone.cloud/restore-freetier-02"]},"name":"default","profile":"cn.standard","replicas":2,"scalingConfig":{"maxReplicas":10,"minReplicas":2,"policy":"AutoScaling"}}],"dnSets":[{"managed":{"config":"[log]\nlevel = \"info\"\n","nodeSelector":{"matrixone.cloud/cluster-pool":"restore-freetier-02","matrixone.cloud/profile":"dn.standard"},"resources":{"limits":{"cpu":"15","memory":"29184Mi"},"requests":{"cpu":"15","memory":"29184Mi"}},"sharedStorageCache":{"memoryCacheSize":"5Gi"},"storageClassName":"alicloud-disk-essd-pl1","storageSize":"100Gi","toleratedTaints":["profile.matrixone.cloud/dn.standard","cluster-pool.matrixone.cloud/restore-freetier-02"]},"name":"default","profile":"dn.standard","replicas":1}],"endpoint":{"mode":"Dedicated","proxySpec":{"image":"registry.cn-shanghai.aliyuncs.com/matrixorigin/matrixone:nightly-e94ba155","managed":{"config":"[proxy.plugin]\ntimeout = \"3s\"\n","profile":"proxy.standard"},"pluginImage":"registry.cn-hangzhou.aliyuncs.com/ack-cos/plugin:49e2ffd8-20240201","replicas":2},"whitelistIPRanges":["0.0.0.0/0"]},"logSet":{"managed":{"config":"[log]\nlevel = \"info\"\n","nodeSelector":{"matrixone.cloud/cluster-pool":"restore-freetier-02","matrixone.cloud/profile":"log.standard"},"resources":{"limits":{"cpu":"3","memory":"6Gi"},"requests":{"cpu":"3","memory":"6Gi"}},"storageClassName":"alicloud-disk-essd-pl1","storageSize":"100Gi","toleratedTaints":["profile.matrixone.cloud/log.standard","cluster-pool.matrixone.cloud/restore-freetier-02"]},"name":"default","profile":"log.standard","replicas":3},"managed":{"imageRepository":"registry.cn-shanghai.aliyuncs.com/matrixorigin/matrixone","localServiceRef":{"name":"local-service"},"objectStorage":{"path":"moc-backup-test/restore-freetier-02-20240315021618","region":"cn-hangzhou","restored":true}},"state":"Active","unitName":"qa-unit-cn-hangzhou","unitSelector":{"matchLabels":{"matrixone.cloud/cloud":"aliyun","matrixone.cloud/region":"cn-hangzhou"}},"version":"nightly-e94ba155"},"state":{},"status":{"conditions":[{"lastTransitionTime":"2024-03-15T05:26:57Z","message":"the object is reconciling","reason":"empty","status":"False","type":"Synced"}],"endpoint":{},"phase":"Creating"}}

DEBUG    src.tests.upgrade.test_mo_upgrade:test_mo_upgrade.py:219 wait for the conditions by '<lambda>' with args: ('restore-freetier-02',), {}
DEBUG    kubernetes.client.rest:rest.py:235 response body: {"apiVersion":"core.matrixone-cloud/v1alpha1","kind":"Cluster","metadata":{"annotations":{"matrixone.cloud/enable-aksk-authorize":"true"},"creationTimestamp":"2024-03-15T05:26:57Z","generation":1,"labels":{"matrixone.cloud/cordoned":"Y","matrixone.cloud/role":"root"},"managedFields":[{"apiVersion":"core.matrixone-cloud/v1alpha1","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:matrixone.cloud/enable-aksk-authorize":{}},"f:labels":{".":{},"f:matrixone.cloud/cordoned":{},"f:matrixone.cloud/role":{}}},"f:spec":{".":{},"f:cnPools":{".":{},"k:{\"name\":\"limited\"}":{".":{},"f:managed":{".":{},"f:config":{},"f:nodeSelector":{".":{},"f:matrixone.cloud/cluster-pool":{},"f:matrixone.cloud/profile":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:sharedStorageCache":{".":{},"f:memoryCacheSize":{}},"f:storageClassName":{},"f:storageSize":{},"f:toleratedTaints":{}},"f:name":{},"f:poolStrategy":{".":{},"f:scaleStrategy":{".":{},"f:maxIdle":{}},"f:updateStrategy":{".":{},"f:reclaimTimeout":{}}},"f:profile":{}},"k:{\"name\":\"pool\"}":{".":{},"f:managed":{".":{},"f:config":{},"f:nodeSelector":{".":{},"f:matrixone.cloud/cluster-pool":{},"f:matrixone.cloud/profile":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:sharedStorageCache":{".":{},"f:memoryCacheSize":{}},"f:storageClassName":{},"f:storageSize":{},"f:toleratedTaints":{}},"f:name":{},"f:poolStrategy":{".":{},"f:scaleStrategy":{".":{},"f:maxIdle":{}},"f:updateStrategy":{".":{},"f:reclaimTimeout":{}}},"f:profile":{}}},"f:cnSets":{".":{},"k:{\"name\":\"default\"}":{".":{},"f:managed":{".":{},"f:componentBackend":{},"f:config":{},"f:nodeSelector":{".":{},"f:matrixone.cloud/cluster-pool":{},"f:matrixone.cloud/profile":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:sharedStorageCache":{".":{},"f:memoryCacheSize":{}},"f:storageClassName":{},"f:storageSize":{},"f:toleratedTaints":{}},"f:name":{},"f:profile":{},"f:replicas":{},"f:scalingConfig":{".":{},"f:maxReplicas":{},"f:minReplicas":{},"f:policy":{}}}},"f:dnSets":{".":{},"k:{\"name\":\"default\"}":{".":{},"f:managed":{".":{},"f:config":{},"f:nodeSelector":{".":{},"f:matrixone.cloud/cluster-pool":{},"f:matrixone.cloud/profile":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:sharedStorageCache":{".":{},"f:memoryCacheSize":{}},"f:storageClassName":{},"f:storageSize":{},"f:toleratedTaints":{}},"f:name":{},"f:profile":{},"f:replicas":{}}},"f:endpoint":{".":{},"f:mode":{},"f:proxySpec":{".":{},"f:image":{},"f:managed":{".":{},"f:config":{},"f:profile":{}},"f:pluginImage":{},"f:replicas":{}},"f:whitelistIPRanges":{}},"f:logSet":{".":{},"f:managed":{".":{},"f:config":{},"f:nodeSelector":{".":{},"f:matrixone.cloud/cluster-pool":{},"f:matrixone.cloud/profile":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:storageClassName":{},"f:storageSize":{},"f:toleratedTaints":{}},"f:name":{},"f:profile":{},"f:replicas":{}},"f:managed":{".":{},"f:imageRepository":{},"f:localServiceRef":{".":{},"f:name":{}},"f:objectStorage":{".":{},"f:path":{},"f:region":{},"f:restored":{}}},"f:state":{},"f:unitName":{},"f:unitSelector":{},"f:version":{}},"f:state":{}},"manager":"Go-http-client","operation":"Update","time":"2024-03-15T05:26:57Z"},{"apiVersion":"core.matrixone-cloud/v1alpha1","fieldsType":"FieldsV1","fieldsV1":{"f:status":{".":{},"f:conditions":{},"f:endpoint":{},"f:phase":{}}},"manager":"Go-http-client","operation":"Update","subresource":"status","time":"2024-03-15T05:26:57Z"}],"name":"restore-freetier-02","resourceVersion":"96285442","uid":"958654b6-6428-4caa-b525-f346074db6df"},"spec":{"cnPools":[{"managed":{"config":"[cn.frontend]\nsaveQueryResult = \"on\"\nqueryResultTimeout = 72\nlengthOfQueryPrinted = 10000\ndisable-select-into = true\n[cn.txn]\nenable-leak-check = 1\nmax-active-ages = \"20m\"\n[observability]\nmetricUpdateStorageUsageInterval = \"15m\"\nenableStmtMerge = true\nenableMetricToProm = true\n","nodeSelector":{"matrixone.cloud/cluster-pool":"restore-freetier-02","matrixone.cloud/profile":"cn.standard"},"resources":{"limits":{"cpu":"7","memory":"13Gi"},"requests":{"cpu":"7","memory":"13Gi"}},"sharedStorageCache":{"memoryCacheSize":"1Gi"},"storageClassName":"alicloud-disk-essd-pl1","storageSize":"300Gi","toleratedTaints":["profile.matrixone.cloud/cn.standard","cluster-pool.matrixone.cloud/restore-freetier-02"]},"name":"pool","poolStrategy":{"scaleStrategy":{"maxIdle":2},"updateStrategy":{"reclaimTimeout":"24h0m0s"}},"profile":"cn.standard"},{"managed":{"config":"[cn.frontend]\nsaveQueryResult = \"on\"\nqueryResultTimeout = 72\nlengthOfQueryPrinted = 10000\ndisable-select-into = true\n[cn.txn]\nenable-leak-check = 1\nmax-active-ages = \"20m\"\n[observability]\nmetricUpdateStorageUsageInterval = \"15m\"\nenableStmtMerge = true\nenableMetricToProm = true\n","nodeSelector":{"matrixone.cloud/cluster-pool":"restore-freetier-02","matrixone.cloud/profile":"cn.tiny"},"resources":{"limits":{"cpu":"1","memory":"2Gi"},"requests":{"cpu":"1","memory":"2Gi"}},"sharedStorageCache":{"memoryCacheSize":"128Mi"},"storageClassName":"alicloud-disk-essd-pl1","storageSize":"300Gi","toleratedTaints":["profile.matrixone.cloud/cn.tiny","cluster-pool.matrixone.cloud/restore-freetier-02"]},"name":"limited","poolStrategy":{"scaleStrategy":{"maxIdle":0},"updateStrategy":{"reclaimTimeout":"24h0m0s"}},"profile":"cn.tiny"}],"cnSets":[{"managed":{"componentBackend":"Pod","config":"[cn]\ninit-work-state = \"Draining\"\n[cn.frontend]\nsaveQueryResult = \"on\"\nqueryResultTimeout = 72\nlengthOfQueryPrinted = 10000\ndisable-select-into = true\n[cn.txn]\nenable-leak-check = 1\nmax-active-ages = \"20m\"\n[observability]\nmetricUpdateStorageUsageInterval = \"15m\"\nenableStmtMerge = true\nenableMetricToProm = true\n","nodeSelector":{"matrixone.cloud/cluster-pool":"restore-freetier-02","matrixone.cloud/profile":"cn.standard"},"resources":{"limits":{"cpu":"7","memory":"13Gi"},"requests":{"cpu":"7","memory":"13Gi"}},"sharedStorageCache":{"memoryCacheSize":"1Gi"},"storageClassName":"alicloud-disk-essd-pl1","storageSize":"300Gi","toleratedTaints":["profile.matrixone.cloud/cn.standard","cluster-pool.matrixone.cloud/restore-freetier-02"]},"name":"default","profile":"cn.standard","replicas":2,"scalingConfig":{"maxReplicas":10,"minReplicas":2,"policy":"AutoScaling"}}],"dnSets":[{"managed":{"config":"[log]\nlevel = \"info\"\n","nodeSelector":{"matrixone.cloud/cluster-pool":"restore-freetier-02","matrixone.cloud/profile":"dn.standard"},"resources":{"limits":{"cpu":"15","memory":"29184Mi"},"requests":{"cpu":"15","memory":"29184Mi"}},"sharedStorageCache":{"memoryCacheSize":"5Gi"},"storageClassName":"alicloud-disk-essd-pl1","storageSize":"100Gi","toleratedTaints":["profile.matrixone.cloud/dn.standard","cluster-pool.matrixone.cloud/restore-freetier-02"]},"name":"default","profile":"dn.standard","replicas":1}],"endpoint":{"mode":"Dedicated","proxySpec":{"image":"registry.cn-shanghai.aliyuncs.com/matrixorigin/matrixone:nightly-e94ba155","managed":{"config":"[proxy.plugin]\ntimeout = \"3s\"\n","profile":"proxy.standard"},"pluginImage":"registry.cn-hangzhou.aliyuncs.com/ack-cos/plugin:49e2ffd8-20240201","replicas":2},"whitelistIPRanges":["0.0.0.0/0"]},"logSet":{"managed":{"config":"[log]\nlevel = \"info\"\n","nodeSelector":{"matrixone.cloud/cluster-pool":"restore-freetier-02","matrixone.cloud/profile":"log.standard"},"resources":{"limits":{"cpu":"3","memory":"6Gi"},"requests":{"cpu":"3","memory":"6Gi"}},"storageClassName":"alicloud-disk-essd-pl1","storageSize":"100Gi","toleratedTaints":["profile.matrixone.cloud/log.standard","cluster-pool.matrixone.cloud/restore-freetier-02"]},"name":"default","profile":"log.standard","replicas":3},"managed":{"imageRepository":"registry.cn-shanghai.aliyuncs.com/matrixorigin/matrixone","localServiceRef":{"name":"local-service"},"objectStorage":{"path":"moc-backup-test/restore-freetier-02-20240315021618","region":"cn-hangzhou","restored":true}},"state":"Active","unitName":"qa-unit-cn-hangzhou","unitSelector":{"matchLabels":{"matrixone.cloud/cloud":"aliyun","matrixone.cloud/region":"cn-hangzhou"}},"version":"nightly-e94ba155"},"state":{},"status":{"conditions":[{"lastTransitionTime":"2024-03-15T05:26:57Z","message":"the object is reconciling","reason":"empty","status":"False","type":"Synced"}],"endpoint":{},"phase":"Creating"}}

DEBUG    src.tests.upgrade.test_mo_upgrade:test_mo_upgrade.py:219 wait for the conditions by '<lambda>' with args: ('restore-freetier-02',), {}
DEBUG    kubernetes.client.rest:rest.py:235 response body: {"apiVersion":"core.matrixone-cloud/v1alpha1","kind":"Cluster","metadata":{"annotations":{"matrixone.cloud/enable-aksk-authorize":"true"},"creationTimestamp":"2024-03-15T05:26:57Z","generation":1,"labels":{"matrixone.cloud/cordoned":"Y","matrixone.cloud/role":"root"},"managedFields":[{"apiVersion":"core.matrixone-cloud/v1alpha1","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:matrixone.cloud/enable-aksk-authorize":{}},"f:labels":{".":{},"f:matrixone.cloud/cordoned":{},"f:matrixone.cloud/role":{}}},"f:spec":{".":{},"f:cnPools":{".":{},"k:{\"name\":\"limited\"}":{".":{},"f:managed":{".":{},"f:config":{},"f:nodeSelector":{".":{},"f:matrixone.cloud/cluster-pool":{},"f:matrixone.cloud/profile":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:sharedStorageCache":{".":{},"f:memoryCacheSize":{}},"f:storageClassName":{},"f:storageSize":{},"f:toleratedTaints":{}},"f:name":{},"f:poolStrategy":{".":{},"f:scaleStrategy":{".":{},"f:maxIdle":{}},"f:updateStrategy":{".":{},"f:reclaimTimeout":{}}},"f:profile":{}},"k:{\"name\":\"pool\"}":{".":{},"f:managed":{".":{},"f:config":{},"f:nodeSelector":{".":{},"f:matrixone.cloud/cluster-pool":{},"f:matrixone.cloud/profile":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:sharedStorageCache":{".":{},"f:memoryCacheSize":{}},"f:storageClassName":{},"f:storageSize":{},"f:toleratedTaints":{}},"f:name":{},"f:poolStrategy":{".":{},"f:scaleStrategy":{".":{},"f:maxIdle":{}},"f:updateStrategy":{".":{},"f:reclaimTimeout":{}}},"f:profile":{}}},"f:cnSets":{".":{},"k:{\"name\":\"default\"}":{".":{},"f:managed":{".":{},"f:componentBackend":{},"f:config":{},"f:nodeSelector":{".":{},"f:matrixone.cloud/cluster-pool":{},"f:matrixone.cloud/profile":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:sharedStorageCache":{".":{},"f:memoryCacheSize":{}},"f:storageClassName":{},"f:storageSize":{},"f:toleratedTaints":{}},"f:name":{},"f:profile":{},"f:replicas":{},"f:scalingConfig":{".":{},"f:maxReplicas":{},"f:minReplicas":{},"f:policy":{}}}},"f:dnSets":{".":{},"k:{\"name\":\"default\"}":{".":{},"f:managed":{".":{},"f:config":{},"f:nodeSelector":{".":{},"f:matrixone.cloud/cluster-pool":{},"f:matrixone.cloud/profile":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:sharedStorageCache":{".":{},"f:memoryCacheSize":{}},"f:storageClassName":{},"f:storageSize":{},"f:toleratedTaints":{}},"f:name":{},"f:profile":{},"f:replicas":{}}},"f:endpoint":{".":{},"f:mode":{},"f:proxySpec":{".":{},"f:image":{},"f:managed":{".":{},"f:config":{},"f:profile":{}},"f:pluginImage":{},"f:replicas":{}},"f:whitelistIPRanges":{}},"f:logSet":{".":{},"f:managed":{".":{},"f:config":{},"f:nodeSelector":{".":{},"f:matrixone.cloud/cluster-pool":{},"f:matrixone.cloud/profile":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:storageClassName":{},"f:storageSize":{},"f:toleratedTaints":{}},"f:name":{},"f:profile":{},"f:replicas":{}},"f:managed":{".":{},"f:imageRepository":{},"f:localServiceRef":{".":{},"f:name":{}},"f:objectStorage":{".":{},"f:path":{},"f:region":{},"f:restored":{}}},"f:state":{},"f:unitName":{},"f:unitSelector":{},"f:version":{}},"f:state":{}},"manager":"Go-http-client","operation":"Update","time":"2024-03-15T05:26:57Z"},{"apiVersion":"core.matrixone-cloud/v1alpha1","fieldsType":"FieldsV1","fieldsV1":{"f:status":{".":{},"f:conditions":{},"f:endpoint":{},"f:phase":{}}},"manager":"Go-http-client","operation":"Update","subresource":"status","time":"2024-03-15T05:26:57Z"}],"name":"restore-freetier-02","resourceVersion":"96285442","uid":"958654b6-6428-4caa-b525-f346074db6df"},"spec":{"cnPools":[{"managed":{"config":"[cn.frontend]\nsaveQueryResult = \"on\"\nqueryResultTimeout = 72\nlengthOfQueryPrinted = 10000\ndisable-select-into = true\n[cn.txn]\nenable-leak-check = 1\nmax-active-ages = \"20m\"\n[observability]\nmetricUpdateStorageUsageInterval = \"15m\"\nenableStmtMerge = true\nenableMetricToProm = true\n","nodeSelector":{"matrixone.cloud/cluster-pool":"restore-freetier-02","matrixone.cloud/profile":"cn.standard"},"resources":{"limits":{"cpu":"7","memory":"13Gi"},"requests":{"cpu":"7","memory":"13Gi"}},"sharedStorageCache":{"memoryCacheSize":"1Gi"},"storageClassName":"alicloud-disk-essd-pl1","storageSize":"300Gi","toleratedTaints":["profile.matrixone.cloud/cn.standard","cluster-pool.matrixone.cloud/restore-freetier-02"]},"name":"pool","poolStrategy":{"scaleStrategy":{"maxIdle":2},"updateStrategy":{"reclaimTimeout":"24h0m0s"}},"profile":"cn.standard"},{"managed":{"config":"[cn.frontend]\nsaveQueryResult = \"on\"\nqueryResultTimeout = 72\nlengthOfQueryPrinted = 10000\ndisable-select-into = true\n[cn.txn]\nenable-leak-check = 1\nmax-active-ages = \"20m\"\n[observability]\nmetricUpdateStorageUsageInterval = \"15m\"\nenableStmtMerge = true\nenableMetricToProm = true\n","nodeSelector":{"matrixone.cloud/cluster-pool":"restore-freetier-02","matrixone.cloud/profile":"cn.tiny"},"resources":{"limits":{"cpu":"1","memory":"2Gi"},"requests":{"cpu":"1","memory":"2Gi"}},"sharedStorageCache":{"memoryCacheSize":"128Mi"},"storageClassName":"alicloud-disk-essd-pl1","storageSize":"300Gi","toleratedTaints":["profile.matrixone.cloud/cn.tiny","cluster-pool.matrixone.cloud/restore-freetier-02"]},"name":"limited","poolStrategy":{"scaleStrategy":{"maxIdle":0},"updateStrategy":{"reclaimTimeout":"24h0m0s"}},"profile":"cn.tiny"}],"cnSets":[{"managed":{"componentBackend":"Pod","config":"[cn]\ninit-work-state = \"Draining\"\n[cn.frontend]\nsaveQueryResult = \"on\"\nqueryResultTimeout = 72\nlengthOfQueryPrinted = 10000\ndisable-select-into = true\n[cn.txn]\nenable-leak-check = 1\nmax-active-ages = \"20m\"\n[observability]\nmetricUpdateStorageUsageInterval = \"15m\"\nenableStmtMerge = true\nenableMetricToProm = true\n","nodeSelector":{"matrixone.cloud/cluster-pool":"restore-freetier-02","matrixone.cloud/profile":"cn.standard"},"resources":{"limits":{"cpu":"7","memory":"13Gi"},"requests":{"cpu":"7","memory":"13Gi"}},"sharedStorageCache":{"memoryCacheSize":"1Gi"},"storageClassName":"alicloud-disk-essd-pl1","storageSize":"300Gi","toleratedTaints":["profile.matrixone.cloud/cn.standard","cluster-pool.matrixone.cloud/restore-freetier-02"]},"name":"default","profile":"cn.standard","replicas":2,"scalingConfig":{"maxReplicas":10,"minReplicas":2,"policy":"AutoScaling"}}],"dnSets":[{"managed":{"config":"[log]\nlevel = \"info\"\n","nodeSelector":{"matrixone.cloud/cluster-pool":"restore-freetier-02","matrixone.cloud/profile":"dn.standard"},"resources":{"limits":{"cpu":"15","memory":"29184Mi"},"requests":{"cpu":"15","memory":"29184Mi"}},"sharedStorageCache":{"memoryCacheSize":"5Gi"},"storageClassName":"alicloud-disk-essd-pl1","storageSize":"100Gi","toleratedTaints":["profile.matrixone.cloud/dn.standard","cluster-pool.matrixone.cloud/restore-freetier-02"]},"name":"default","profile":"dn.standard","replicas":1}],"endpoint":{"mode":"Dedicated","proxySpec":{"image":"registry.cn-shanghai.aliyuncs.com/matrixorigin/matrixone:nightly-e94ba155","managed":{"config":"[proxy.plugin]\ntimeout = \"3s\"\n","profile":"proxy.standard"},"pluginImage":"registry.cn-hangzhou.aliyuncs.com/ack-cos/plugin:49e2ffd8-20240201","replicas":2},"whitelistIPRanges":["0.0.0.0/0"]},"logSet":{"managed":{"config":"[log]\nlevel = \"info\"\n","nodeSelector":{"matrixone.cloud/cluster-pool":"restore-freetier-02","matrixone.cloud/profile":"log.standard"},"resources":{"limits":{"cpu":"3","memory":"6Gi"},"requests":{"cpu":"3","memory":"6Gi"}},"storageClassName":"alicloud-disk-essd-pl1","storageSize":"100Gi","toleratedTaints":["profile.matrixone.cloud/log.standard","cluster-pool.matrixone.cloud/restore-freetier-02"]},"name":"default","profile":"log.standard","replicas":3},"managed":{"imageRepository":"registry.cn-shanghai.aliyuncs.com/matrixorigin/matrixone","localServiceRef":{"name":"local-service"},"objectStorage":{"path":"moc-backup-test/restore-freetier-02-20240315021618","region":"cn-hangzhou","restored":true}},"state":"Active","unitName":"qa-unit-cn-hangzhou","unitSelector":{"matchLabels":{"matrixone.cloud/cloud":"aliyun","matrixone.cloud/region":"cn-hangzhou"}},"version":"nightly-e94ba155"},"state":{},"status":{"conditions":[{"lastTransitionTime":"2024-03-15T05:26:57Z","message":"the object is reconciling","reason":"empty","status":"False","type":"Synced"}],"endpoint":{},"phase":"Creating"}}

DEBUG    src.tests.upgrade.test_mo_upgrade:test_mo_upgrade.py:219 wait for the conditions by '<lambda>' with args: ('restore-freetier-02',), {}
DEBUG    kubernetes.client.rest:rest.py:235 response body: {"apiVersion":"core.matrixone-cloud/v1alpha1","kind":"Cluster","metadata":{"annotations":{"matrixone.cloud/enable-aksk-authorize":"true"},"creationTimestamp":"2024-03-15T05:26:57Z","generation":1,"labels":{"matrixone.cloud/cordoned":"Y","matrixone.cloud/role":"root"},"managedFields":[{"apiVersion":"core.matrixone-cloud/v1alpha1","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:matrixone.cloud/enable-aksk-authorize":{}},"f:labels":{".":{},"f:matrixone.cloud/cordoned":{},"f:matrixone.cloud/role":{}}},"f:spec":{".":{},"f:cnPools":{".":{},"k:{\"name\":\"limited\"}":{".":{},"f:managed":{".":{},"f:config":{},"f:nodeSelector":{".":{},"f:matrixone.cloud/cluster-pool":{},"f:matrixone.cloud/profile":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:sharedStorageCache":{".":{},"f:memoryCacheSize":{}},"f:storageClassName":{},"f:storageSize":{},"f:toleratedTaints":{}},"f:name":{},"f:poolStrategy":{".":{},"f:scaleStrategy":{".":{},"f:maxIdle":{}},"f:updateStrategy":{".":{},"f:reclaimTimeout":{}}},"f:profile":{}},"k:{\"name\":\"pool\"}":{".":{},"f:managed":{".":{},"f:config":{},"f:nodeSelector":{".":{},"f:matrixone.cloud/cluster-pool":{},"f:matrixone.cloud/profile":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:sharedStorageCache":{".":{},"f:memoryCacheSize":{}},"f:storageClassName":{},"f:storageSize":{},"f:toleratedTaints":{}},"f:name":{},"f:poolStrategy":{".":{},"f:scaleStrategy":{".":{},"f:maxIdle":{}},"f:updateStrategy":{".":{},"f:reclaimTimeout":{}}},"f:profile":{}}},"f:cnSets":{".":{},"k:{\"name\":\"default\"}":{".":{},"f:managed":{".":{},"f:componentBackend":{},"f:config":{},"f:nodeSelector":{".":{},"f:matrixone.cloud/cluster-pool":{},"f:matrixone.cloud/profile":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:sharedStorageCache":{".":{},"f:memoryCacheSize":{}},"f:storageClassName":{},"f:storageSize":{},"f:toleratedTaints":{}},"f:name":{},"f:profile":{},"f:replicas":{},"f:scalingConfig":{".":{},"f:maxReplicas":{},"f:minReplicas":{},"f:policy":{}}}},"f:dnSets":{".":{},"k:{\"name\":\"default\"}":{".":{},"f:managed":{".":{},"f:config":{},"f:nodeSelector":{".":{},"f:matrixone.cloud/cluster-pool":{},"f:matrixone.cloud/profile":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:sharedStorageCache":{".":{},"f:memoryCacheSize":{}},"f:storageClassName":{},"f:storageSize":{},"f:toleratedTaints":{}},"f:name":{},"f:profile":{},"f:replicas":{}}},"f:endpoint":{".":{},"f:mode":{},"f:proxySpec":{".":{},"f:image":{},"f:managed":{".":{},"f:config":{},"f:profile":{}},"f:pluginImage":{},"f:replicas":{}},"f:whitelistIPRanges":{}},"f:logSet":{".":{},"f:managed":{".":{},"f:config":{},"f:nodeSelector":{".":{},"f:matrixone.cloud/cluster-pool":{},"f:matrixone.cloud/profile":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:storageClassName":{},"f:storageSize":{},"f:toleratedTaints":{}},"f:name":{},"f:profile":{},"f:replicas":{}},"f:managed":{".":{},"f:imageRepository":{},"f:localServiceRef":{".":{},"f:name":{}},"f:objectStorage":{".":{},"f:path":{},"f:region":{},"f:restored":{}}},"f:state":{},"f:unitName":{},"f:unitSelector":{},"f:version":{}},"f:state":{}},"manager":"Go-http-client","operation":"Update","time":"2024-03-15T05:26:57Z"},{"apiVersion":"core.matrixone-cloud/v1alpha1","fieldsType":"FieldsV1","fieldsV1":{"f:status":{".":{},"f:conditions":{},"f:endpoint":{},"f:phase":{}}},"manager":"Go-http-client","operation":"Update","subresource":"status","time":"2024-03-15T05:26:57Z"}],"name":"restore-freetier-02","resourceVersion":"96285442","uid":"958654b6-6428-4caa-b525-f346074db6df"},"spec":{"cnPools":[{"managed":{"config":"[cn.frontend]\nsaveQueryResult = \"on\"\nqueryResultTimeout = 72\nlengthOfQueryPrinted = 10000\ndisable-select-into = true\n[cn.txn]\nenable-leak-check = 1\nmax-active-ages = \"20m\"\n[observability]\nmetricUpdateStorageUsageInterval = \"15m\"\nenableStmtMerge = true\nenableMetricToProm = true\n","nodeSelector":{"matrixone.cloud/cluster-pool":"restore-freetier-02","matrixone.cloud/profile":"cn.standard"},"resources":{"limits":{"cpu":"7","memory":"13Gi"},"requests":{"cpu":"7","memory":"13Gi"}},"sharedStorageCache":{"memoryCacheSize":"1Gi"},"storageClassName":"alicloud-disk-essd-pl1","storageSize":"300Gi","toleratedTaints":["profile.matrixone.cloud/cn.standard","cluster-pool.matrixone.cloud/restore-freetier-02"]},"name":"pool","poolStrategy":{"scaleStrategy":{"maxIdle":2},"updateStrategy":{"reclaimTimeout":"24h0m0s"}},"profile":"cn.standard"},{"managed":{"config":"[cn.frontend]\nsaveQueryResult = \"on\"\nqueryResultTimeout = 72\nlengthOfQueryPrinted = 10000\ndisable-select-into = true\n[cn.txn]\nenable-leak-check = 1\nmax-active-ages = \"20m\"\n[observability]\nmetricUpdateStorageUsageInterval = \"15m\"\nenableStmtMerge = true\nenableMetricToProm = true\n","nodeSelector":{"matrixone.cloud/cluster-pool":"restore-freetier-02","matrixone.cloud/profile":"cn.tiny"},"resources":{"limits":{"cpu":"1","memory":"2Gi"},"requests":{"cpu":"1","memory":"2Gi"}},"sharedStorageCache":{"memoryCacheSize":"128Mi"},"storageClassName":"alicloud-disk-essd-pl1","storageSize":"300Gi","toleratedTaints":["profile.matrixone.cloud/cn.tiny","cluster-pool.matrixone.cloud/restore-freetier-02"]},"name":"limited","poolStrategy":{"scaleStrategy":{"maxIdle":0},"updateStrategy":{"reclaimTimeout":"24h0m0s"}},"profile":"cn.tiny"}],"cnSets":[{"managed":{"componentBackend":"Pod","config":"[cn]\ninit-work-state = \"Draining\"\n[cn.frontend]\nsaveQueryResult = \"on\"\nqueryResultTimeout = 72\nlengthOfQueryPrinted = 10000\ndisable-select-into = true\n[cn.txn]\nenable-leak-check = 1\nmax-active-ages = \"20m\"\n[observability]\nmetricUpdateStorageUsageInterval = \"15m\"\nenableStmtMerge = true\nenableMetricToProm = true\n","nodeSelector":{"matrixone.cloud/cluster-pool":"restore-freetier-02","matrixone.cloud/profile":"cn.standard"},"resources":{"limits":{"cpu":"7","memory":"13Gi"},"requests":{"cpu":"7","memory":"13Gi"}},"sharedStorageCache":{"memoryCacheSize":"1Gi"},"storageClassName":"alicloud-disk-essd-pl1","storageSize":"300Gi","toleratedTaints":["profile.matrixone.cloud/cn.standard","cluster-pool.matrixone.cloud/restore-freetier-02"]},"name":"default","profile":"cn.standard","replicas":2,"scalingConfig":{"maxReplicas":10,"minReplicas":2,"policy":"AutoScaling"}}],"dnSets":[{"managed":{"config":"[log]\nlevel = \"info\"\n","nodeSelector":{"matrixone.cloud/cluster-pool":"restore-freetier-02","matrixone.cloud/profile":"dn.standard"},"resources":{"limits":{"cpu":"15","memory":"29184Mi"},"requests":{"cpu":"15","memory":"29184Mi"}},"sharedStorageCache":{"memoryCacheSize":"5Gi"},"storageClassName":"alicloud-disk-essd-pl1","storageSize":"100Gi","toleratedTaints":["profile.matrixone.cloud/dn.standard","cluster-pool.matrixone.cloud/restore-freetier-02"]},"name":"default","profile":"dn.standard","replicas":1}],"endpoint":{"mode":"Dedicated","proxySpec":{"image":"registry.cn-shanghai.aliyuncs.com/matrixorigin/matrixone:nightly-e94ba155","managed":{"config":"[proxy.plugin]\ntimeout = \"3s\"\n","profile":"proxy.standard"},"pluginImage":"registry.cn-hangzhou.aliyuncs.com/ack-cos/plugin:49e2ffd8-20240201","replicas":2},"whitelistIPRanges":["0.0.0.0/0"]},"logSet":{"managed":{"config":"[log]\nlevel = \"info\"\n","nodeSelector":{"matrixone.cloud/cluster-pool":"restore-freetier-02","matrixone.cloud/profile":"log.standard"},"resources":{"limits":{"cpu":"3","memory":"6Gi"},"requests":{"cpu":"3","memory":"6Gi"}},"storageClassName":"alicloud-disk-essd-pl1","storageSize":"100Gi","toleratedTaints":["profile.matrixone.cloud/log.standard","cluster-pool.matrixone.cloud/restore-freetier-02"]},"name":"default","profile":"log.standard","replicas":3},"managed":{"imageRepository":"registry.cn-shanghai.aliyuncs.com/matrixorigin/matrixone","localServiceRef":{"name":"local-service"},"objectStorage":{"path":"moc-backup-test/restore-freetier-02-20240315021618","region":"cn-hangzhou","restored":true}},"state":"Active","unitName":"qa-unit-cn-hangzhou","unitSelector":{"matchLabels":{"matrixone.cloud/cloud":"aliyun","matrixone.cloud/region":"cn-hangzhou"}},"version":"nightly-e94ba155"},"state":{},"status":{"conditions":[{"lastTransitionTime":"2024-03-15T05:26:57Z","message":"the object is reconciling","reason":"empty","status":"False","type":"Synced"}],"endpoint":{},"phase":"Creating"}}

DEBUG    src.tests.upgrade.test_mo_upgrade:test_mo_upgrade.py:219 wait for the conditions by '<lambda>' with args: ('restore-freetier-02',), {}
DEBUG    kubernetes.client.rest:rest.py:235 response body: {"apiVersion":"core.matrixone-cloud/v1alpha1","kind":"Cluster","metadata":{"annotations":{"matrixone.cloud/enable-aksk-authorize":"true"},"creationTimestamp":"2024-03-15T05:26:57Z","generation":1,"labels":{"matrixone.cloud/cordoned":"Y","matrixone.cloud/role":"root"},"managedFields":[{"apiVersion":"core.matrixone-cloud/v1alpha1","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:matrixone.cloud/enable-aksk-authorize":{}},"f:labels":{".":{},"f:matrixone.cloud/cordoned":{},"f:matrixone.cloud/role":{}}},"f:spec":{".":{},"f:cnPools":{".":{},"k:{\"name\":\"limited\"}":{".":{},"f:managed":{".":{},"f:config":{},"f:nodeSelector":{".":{},"f:matrixone.cloud/cluster-pool":{},"f:matrixone.cloud/profile":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:sharedStorageCache":{".":{},"f:memoryCacheSize":{}},"f:storageClassName":{},"f:storageSize":{},"f:toleratedTaints":{}},"f:name":{},"f:poolStrategy":{".":{},"f:scaleStrategy":{".":{},"f:maxIdle":{}},"f:updateStrategy":{".":{},"f:reclaimTimeout":{}}},"f:profile":{}},"k:{\"name\":\"pool\"}":{".":{},"f:managed":{".":{},"f:config":{},"f:nodeSelector":{".":{},"f:matrixone.cloud/cluster-pool":{},"f:matrixone.cloud/profile":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:sharedStorageCache":{".":{},"f:memoryCacheSize":{}},"f:storageClassName":{},"f:storageSize":{},"f:toleratedTaints":{}},"f:name":{},"f:poolStrategy":{".":{},"f:scaleStrategy":{".":{},"f:maxIdle":{}},"f:updateStrategy":{".":{},"f:reclaimTimeout":{}}},"f:profile":{}}},"f:cnSets":{".":{},"k:{\"name\":\"default\"}":{".":{},"f:managed":{".":{},"f:componentBackend":{},"f:config":{},"f:nodeSelector":{".":{},"f:matrixone.cloud/cluster-pool":{},"f:matrixone.cloud/profile":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:sharedStorageCache":{".":{},"f:memoryCacheSize":{}},"f:storageClassName":{},"f:storageSize":{},"f:toleratedTaints":{}},"f:name":{},"f:profile":{},"f:replicas":{},"f:scalingConfig":{".":{},"f:maxReplicas":{},"f:minReplicas":{},"f:policy":{}}}},"f:dnSets":{".":{},"k:{\"name\":\"default\"}":{".":{},"f:managed":{".":{},"f:config":{},"f:nodeSelector":{".":{},"f:matrixone.cloud/cluster-pool":{},"f:matrixone.cloud/profile":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:sharedStorageCache":{".":{},"f:memoryCacheSize":{}},"f:storageClassName":{},"f:storageSize":{},"f:toleratedTaints":{}},"f:name":{},"f:profile":{},"f:replicas":{}}},"f:endpoint":{".":{},"f:mode":{},"f:proxySpec":{".":{},"f:image":{},"f:managed":{".":{},"f:config":{},"f:profile":{}},"f:pluginImage":{},"f:replicas":{}},"f:whitelistIPRanges":{}},"f:logSet":{".":{},"f:managed":{".":{},"f:config":{},"f:nodeSelector":{".":{},"f:matrixone.cloud/cluster-pool":{},"f:matrixone.cloud/profile":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:storageClassName":{},"f:storageSize":{},"f:toleratedTaints":{}},"f:name":{},"f:profile":{},"f:replicas":{}},"f:managed":{".":{},"f:imageRepository":{},"f:localServiceRef":{".":{},"f:name":{}},"f:objectStorage":{".":{},"f:path":{},"f:region":{},"f:restored":{}}},"f:state":{},"f:unitName":{},"f:unitSelector":{},"f:version":{}},"f:state":{}},"manager":"Go-http-client","operation":"Update","time":"2024-03-15T05:26:57Z"},{"apiVersion":"core.matrixone-cloud/v1alpha1","fieldsType":"FieldsV1","fieldsV1":{"f:status":{".":{},"f:conditions":{},"f:endpoint":{},"f:phase":{}}},"manager":"Go-http-client","operation":"Update","subresource":"status","time":"2024-03-15T05:26:57Z"}],"name":"restore-freetier-02","resourceVersion":"96285442","uid":"958654b6-6428-4caa-b525-f346074db6df"},"spec":{"cnPools":[{"managed":{"config":"[cn.frontend]\nsaveQueryResult = \"on\"\nqueryResultTimeout = 72\nlengthOfQueryPrinted = 10000\ndisable-select-into = true\n[cn.txn]\nenable-leak-check = 1\nmax-active-ages = \"20m\"\n[observability]\nmetricUpdateStorageUsageInterval = \"15m\"\nenableStmtMerge = true\nenableMetricToProm = true\n","nodeSelector":{"matrixone.cloud/cluster-pool":"restore-freetier-02","matrixone.cloud/profile":"cn.standard"},"resources":{"limits":{"cpu":"7","memory":"13Gi"},"requests":{"cpu":"7","memory":"13Gi"}},"sharedStorageCache":{"memoryCacheSize":"1Gi"},"storageClassName":"alicloud-disk-essd-pl1","storageSize":"300Gi","toleratedTaints":["profile.matrixone.cloud/cn.standard","cluster-pool.matrixone.cloud/restore-freetier-02"]},"name":"pool","poolStrategy":{"scaleStrategy":{"maxIdle":2},"updateStrategy":{"reclaimTimeout":"24h0m0s"}},"profile":"cn.standard"},{"managed":{"config":"[cn.frontend]\nsaveQueryResult = \"on\"\nqueryResultTimeout = 72\nlengthOfQueryPrinted = 10000\ndisable-select-into = true\n[cn.txn]\nenable-leak-check = 1\nmax-active-ages = \"20m\"\n[observability]\nmetricUpdateStorageUsageInterval = \"15m\"\nenableStmtMerge = true\nenableMetricToProm = true\n","nodeSelector":{"matrixone.cloud/cluster-pool":"restore-freetier-02","matrixone.cloud/profile":"cn.tiny"},"resources":{"limits":{"cpu":"1","memory":"2Gi"},"requests":{"cpu":"1","memory":"2Gi"}},"sharedStorageCache":{"memoryCacheSize":"128Mi"},"storageClassName":"alicloud-disk-essd-pl1","storageSize":"300Gi","toleratedTaints":["profile.matrixone.cloud/cn.tiny","cluster-pool.matrixone.cloud/restore-freetier-02"]},"name":"limited","poolStrategy":{"scaleStrategy":{"maxIdle":0},"updateStrategy":{"reclaimTimeout":"24h0m0s"}},"profile":"cn.tiny"}],"cnSets":[{"managed":{"componentBackend":"Pod","config":"[cn]\ninit-work-state = \"Draining\"\n[cn.frontend]\nsaveQueryResult = \"on\"\nqueryResultTimeout = 72\nlengthOfQueryPrinted = 10000\ndisable-select-into = true\n[cn.txn]\nenable-leak-check = 1\nmax-active-ages = \"20m\"\n[observability]\nmetricUpdateStorageUsageInterval = \"15m\"\nenableStmtMerge = true\nenableMetricToProm = true\n","nodeSelector":{"matrixone.cloud/cluster-pool":"restore-freetier-02","matrixone.cloud/profile":"cn.standard"},"resources":{"limits":{"cpu":"7","memory":"13Gi"},"requests":{"cpu":"7","memory":"13Gi"}},"sharedStorageCache":{"memoryCacheSize":"1Gi"},"storageClassName":"alicloud-disk-essd-pl1","storageSize":"300Gi","toleratedTaints":["profile.matrixone.cloud/cn.standard","cluster-pool.matrixone.cloud/restore-freetier-02"]},"name":"default","profile":"cn.standard","replicas":2,"scalingConfig":{"maxReplicas":10,"minReplicas":2,"policy":"AutoScaling"}}],"dnSets":[{"managed":{"config":"[log]\nlevel = \"info\"\n","nodeSelector":{"matrixone.cloud/cluster-pool":"restore-freetier-02","matrixone.cloud/profile":"dn.standard"},"resources":{"limits":{"cpu":"15","memory":"29184Mi"},"requests":{"cpu":"15","memory":"29184Mi"}},"sharedStorageCache":{"memoryCacheSize":"5Gi"},"storageClassName":"alicloud-disk-essd-pl1","storageSize":"100Gi","toleratedTaints":["profile.matrixone.cloud/dn.standard","cluster-pool.matrixone.cloud/restore-freetier-02"]},"name":"default","profile":"dn.standard","replicas":1}],"endpoint":{"mode":"Dedicated","proxySpec":{"image":"registry.cn-shanghai.aliyuncs.com/matrixorigin/matrixone:nightly-e94ba155","managed":{"config":"[proxy.plugin]\ntimeout = \"3s\"\n","profile":"proxy.standard"},"pluginImage":"registry.cn-hangzhou.aliyuncs.com/ack-cos/plugin:49e2ffd8-20240201","replicas":2},"whitelistIPRanges":["0.0.0.0/0"]},"logSet":{"managed":{"config":"[log]\nlevel = \"info\"\n","nodeSelector":{"matrixone.cloud/cluster-pool":"restore-freetier-02","matrixone.cloud/profile":"log.standard"},"resources":{"limits":{"cpu":"3","memory":"6Gi"},"requests":{"cpu":"3","memory":"6Gi"}},"storageClassName":"alicloud-disk-essd-pl1","storageSize":"100Gi","toleratedTaints":["profile.matrixone.cloud/log.standard","cluster-pool.matrixone.cloud/restore-freetier-02"]},"name":"default","profile":"log.standard","replicas":3},"managed":{"imageRepository":"registry.cn-shanghai.aliyuncs.com/matrixorigin/matrixone","localServiceRef":{"name":"local-service"},"objectStorage":{"path":"moc-backup-test/restore-freetier-02-20240315021618","region":"cn-hangzhou","restored":true}},"state":"Active","unitName":"qa-unit-cn-hangzhou","unitSelector":{"matchLabels":{"matrixone.cloud/cloud":"aliyun","matrixone.cloud/region":"cn-hangzhou"}},"version":"nightly-e94ba155"},"state":{},"status":{"conditions":[{"lastTransitionTime":"2024-03-15T05:26:57Z","message":"the object is reconciling","reason":"empty","status":"False","type":"Synced"}],"endpoint":{},"phase":"Creating"}}

DEBUG    src.tests.upgrade.test_mo_upgrade:test_mo_upgrade.py:219 wait for the conditions by '<lambda>' with args: ('restore-freetier-02',), {}
DEBUG    kubernetes.client.rest:rest.py:235 response body: {"apiVersion":"core.matrixone-cloud/v1alpha1","kind":"Cluster","metadata":{"annotations":{"matrixone.cloud/enable-aksk-authorize":"true"},"creationTimestamp":"2024-03-15T05:26:57Z","generation":1,"labels":{"matrixone.cloud/cordoned":"Y","matrixone.cloud/role":"root"},"managedFields":[{"apiVersion":"core.matrixone-cloud/v1alpha1","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:matrixone.cloud/enable-aksk-authorize":{}},"f:labels":{".":{},"f:matrixone.cloud/cordoned":{},"f:matrixone.cloud/role":{}}},"f:spec":{".":{},"f:cnPools":{".":{},"k:{\"name\":\"limited\"}":{".":{},"f:managed":{".":{},"f:config":{},"f:nodeSelector":{".":{},"f:matrixone.cloud/cluster-pool":{},"f:matrixone.cloud/profile":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:sharedStorageCache":{".":{},"f:memoryCacheSize":{}},"f:storageClassName":{},"f:storageSize":{},"f:toleratedTaints":{}},"f:name":{},"f:poolStrategy":{".":{},"f:scaleStrategy":{".":{},"f:maxIdle":{}},"f:updateStrategy":{".":{},"f:reclaimTimeout":{}}},"f:profile":{}},"k:{\"name\":\"pool\"}":{".":{},"f:managed":{".":{},"f:config":{},"f:nodeSelector":{".":{},"f:matrixone.cloud/cluster-pool":{},"f:matrixone.cloud/profile":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:sharedStorageCache":{".":{},"f:memoryCacheSize":{}},"f:storageClassName":{},"f:storageSize":{},"f:toleratedTaints":{}},"f:name":{},"f:poolStrategy":{".":{},"f:scaleStrategy":{".":{},"f:maxIdle":{}},"f:updateStrategy":{".":{},"f:reclaimTimeout":{}}},"f:profile":{}}},"f:cnSets":{".":{},"k:{\"name\":\"default\"}":{".":{},"f:managed":{".":{},"f:componentBackend":{},"f:config":{},"f:nodeSelector":{".":{},"f:matrixone.cloud/cluster-pool":{},"f:matrixone.cloud/profile":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:sharedStorageCache":{".":{},"f:memoryCacheSize":{}},"f:storageClassName":{},"f:storageSize":{},"f:toleratedTaints":{}},"f:name":{},"f:profile":{},"f:replicas":{},"f:scalingConfig":{".":{},"f:maxReplicas":{},"f:minReplicas":{},"f:policy":{}}}},"f:dnSets":{".":{},"k:{\"name\":\"default\"}":{".":{},"f:managed":{".":{},"f:config":{},"f:nodeSelector":{".":{},"f:matrixone.cloud/cluster-pool":{},"f:matrixone.cloud/profile":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:sharedStorageCache":{".":{},"f:memoryCacheSize":{}},"f:storageClassName":{},"f:storageSize":{},"f:toleratedTaints":{}},"f:name":{},"f:profile":{},"f:replicas":{}}},"f:endpoint":{".":{},"f:mode":{},"f:proxySpec":{".":{},"f:image":{},"f:managed":{".":{},"f:config":{},"f:profile":{}},"f:pluginImage":{},"f:replicas":{}},"f:whitelistIPRanges":{}},"f:logSet":{".":{},"f:managed":{".":{},"f:config":{},"f:nodeSelector":{".":{},"f:matrixone.cloud/cluster-pool":{},"f:matrixone.cloud/profile":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:storageClassName":{},"f:storageSize":{},"f:toleratedTaints":{}},"f:name":{},"f:profile":{},"f:replicas":{}},"f:managed":{".":{},"f:imageRepository":{},"f:localServiceRef":{".":{},"f:name":{}},"f:objectStorage":{".":{},"f:path":{},"f:region":{},"f:restored":{}}},"f:state":{},"f:unitName":{},"f:unitSelector":{},"f:version":{}},"f:state":{}},"manager":"Go-http-client","operation":"Update","time":"2024-03-15T05:26:57Z"},{"apiVersion":"core.matrixone-cloud/v1alpha1","fieldsType":"FieldsV1","fieldsV1":{"f:status":{".":{},"f:conditions":{},"f:endpoint":{},"f:phase":{}}},"manager":"Go-http-client","operation":"Update","subresource":"status","time":"2024-03-15T05:29:26Z"}],"name":"restore-freetier-02","resourceVersion":"96287707","uid":"958654b6-6428-4caa-b525-f346074db6df"},"spec":{"cnPools":[{"managed":{"config":"[cn.frontend]\nsaveQueryResult = \"on\"\nqueryResultTimeout = 72\nlengthOfQueryPrinted = 10000\ndisable-select-into = true\n[cn.txn]\nenable-leak-check = 1\nmax-active-ages = \"20m\"\n[observability]\nmetricUpdateStorageUsageInterval = \"15m\"\nenableStmtMerge = true\nenableMetricToProm = true\n","nodeSelector":{"matrixone.cloud/cluster-pool":"restore-freetier-02","matrixone.cloud/profile":"cn.standard"},"resources":{"limits":{"cpu":"7","memory":"13Gi"},"requests":{"cpu":"7","memory":"13Gi"}},"sharedStorageCache":{"memoryCacheSize":"1Gi"},"storageClassName":"alicloud-disk-essd-pl1","storageSize":"300Gi","toleratedTaints":["profile.matrixone.cloud/cn.standard","cluster-pool.matrixone.cloud/restore-freetier-02"]},"name":"pool","poolStrategy":{"scaleStrategy":{"maxIdle":2},"updateStrategy":{"reclaimTimeout":"24h0m0s"}},"profile":"cn.standard"},{"managed":{"config":"[cn.frontend]\nsaveQueryResult = \"on\"\nqueryResultTimeout = 72\nlengthOfQueryPrinted = 10000\ndisable-select-into = true\n[cn.txn]\nenable-leak-check = 1\nmax-active-ages = \"20m\"\n[observability]\nmetricUpdateStorageUsageInterval = \"15m\"\nenableStmtMerge = true\nenableMetricToProm = true\n","nodeSelector":{"matrixone.cloud/cluster-pool":"restore-freetier-02","matrixone.cloud/profile":"cn.tiny"},"resources":{"limits":{"cpu":"1","memory":"2Gi"},"requests":{"cpu":"1","memory":"2Gi"}},"sharedStorageCache":{"memoryCacheSize":"128Mi"},"storageClassName":"alicloud-disk-essd-pl1","storageSize":"300Gi","toleratedTaints":["profile.matrixone.cloud/cn.tiny","cluster-pool.matrixone.cloud/restore-freetier-02"]},"name":"limited","poolStrategy":{"scaleStrategy":{"maxIdle":0},"updateStrategy":{"reclaimTimeout":"24h0m0s"}},"profile":"cn.tiny"}],"cnSets":[{"managed":{"componentBackend":"Pod","config":"[cn]\ninit-work-state = \"Draining\"\n[cn.frontend]\nsaveQueryResult = \"on\"\nqueryResultTimeout = 72\nlengthOfQueryPrinted = 10000\ndisable-select-into = true\n[cn.txn]\nenable-leak-check = 1\nmax-active-ages = \"20m\"\n[observability]\nmetricUpdateStorageUsageInterval = \"15m\"\nenableStmtMerge = true\nenableMetricToProm = true\n","nodeSelector":{"matrixone.cloud/cluster-pool":"restore-freetier-02","matrixone.cloud/profile":"cn.standard"},"resources":{"limits":{"cpu":"7","memory":"13Gi"},"requests":{"cpu":"7","memory":"13Gi"}},"sharedStorageCache":{"memoryCacheSize":"1Gi"},"storageClassName":"alicloud-disk-essd-pl1","storageSize":"300Gi","toleratedTaints":["profile.matrixone.cloud/cn.standard","cluster-pool.matrixone.cloud/restore-freetier-02"]},"name":"default","profile":"cn.standard","replicas":2,"scalingConfig":{"maxReplicas":10,"minReplicas":2,"policy":"AutoScaling"}}],"dnSets":[{"managed":{"config":"[log]\nlevel = \"info\"\n","nodeSelector":{"matrixone.cloud/cluster-pool":"restore-freetier-02","matrixone.cloud/profile":"dn.standard"},"resources":{"limits":{"cpu":"15","memory":"29184Mi"},"requests":{"cpu":"15","memory":"29184Mi"}},"sharedStorageCache":{"memoryCacheSize":"5Gi"},"storageClassName":"alicloud-disk-essd-pl1","storageSize":"100Gi","toleratedTaints":["profile.matrixone.cloud/dn.standard","cluster-pool.matrixone.cloud/restore-freetier-02"]},"name":"default","profile":"dn.standard","replicas":1}],"endpoint":{"mode":"Dedicated","proxySpec":{"image":"registry.cn-shanghai.aliyuncs.com/matrixorigin/matrixone:nightly-e94ba155","managed":{"config":"[proxy.plugin]\ntimeout = \"3s\"\n","profile":"proxy.standard"},"pluginImage":"registry.cn-hangzhou.aliyuncs.com/ack-cos/plugin:49e2ffd8-20240201","replicas":2},"whitelistIPRanges":["0.0.0.0/0"]},"logSet":{"managed":{"config":"[log]\nlevel = \"info\"\n","nodeSelector":{"matrixone.cloud/cluster-pool":"restore-freetier-02","matrixone.cloud/profile":"log.standard"},"resources":{"limits":{"cpu":"3","memory":"6Gi"},"requests":{"cpu":"3","memory":"6Gi"}},"storageClassName":"alicloud-disk-essd-pl1","storageSize":"100Gi","toleratedTaints":["profile.matrixone.cloud/log.standard","cluster-pool.matrixone.cloud/restore-freetier-02"]},"name":"default","profile":"log.standard","replicas":3},"managed":{"imageRepository":"registry.cn-shanghai.aliyuncs.com/matrixorigin/matrixone","localServiceRef":{"name":"local-service"},"objectStorage":{"path":"moc-backup-test/restore-freetier-02-20240315021618","region":"cn-hangzhou","restored":true}},"state":"Active","unitName":"qa-unit-cn-hangzhou","unitSelector":{"matchLabels":{"matrixone.cloud/cloud":"aliyun","matrixone.cloud/region":"cn-hangzhou"}},"version":"nightly-e94ba155"},"state":{},"status":{"conditions":[{"lastTransitionTime":"2024-03-15T05:26:57Z","message":"Last error: reconcile error: cluster has unready set, wait all desired set ready, requeue after 5s","reason":"empty","status":"False","type":"Synced"}],"endpoint":{},"phase":"Creating"}}

DEBUG    src.tests.upgrade.test_mo_upgrade:test_mo_upgrade.py:219 wait for the conditions by '<lambda>' with args: ('restore-freetier-02',), {}
DEBUG    kubernetes.client.rest:rest.py:235 response body: {"apiVersion":"core.matrixone-cloud/v1alpha1","kind":"Cluster","metadata":{"annotations":{"matrixone.cloud/enable-aksk-authorize":"true"},"creationTimestamp":"2024-03-15T05:26:57Z","generation":1,"labels":{"matrixone.cloud/cordoned":"Y","matrixone.cloud/role":"root"},"managedFields":[{"apiVersion":"core.matrixone-cloud/v1alpha1","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:matrixone.cloud/enable-aksk-authorize":{}},"f:labels":{".":{},"f:matrixone.cloud/cordoned":{},"f:matrixone.cloud/role":{}}},"f:spec":{".":{},"f:cnPools":{".":{},"k:{\"name\":\"limited\"}":{".":{},"f:managed":{".":{},"f:config":{},"f:nodeSelector":{".":{},"f:matrixone.cloud/cluster-pool":{},"f:matrixone.cloud/profile":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:sharedStorageCache":{".":{},"f:memoryCacheSize":{}},"f:storageClassName":{},"f:storageSize":{},"f:toleratedTaints":{}},"f:name":{},"f:poolStrategy":{".":{},"f:scaleStrategy":{".":{},"f:maxIdle":{}},"f:updateStrategy":{".":{},"f:reclaimTimeout":{}}},"f:profile":{}},"k:{\"name\":\"pool\"}":{".":{},"f:managed":{".":{},"f:config":{},"f:nodeSelector":{".":{},"f:matrixone.cloud/cluster-pool":{},"f:matrixone.cloud/profile":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:sharedStorageCache":{".":{},"f:memoryCacheSize":{}},"f:storageClassName":{},"f:storageSize":{},"f:toleratedTaints":{}},"f:name":{},"f:poolStrategy":{".":{},"f:scaleStrategy":{".":{},"f:maxIdle":{}},"f:updateStrategy":{".":{},"f:reclaimTimeout":{}}},"f:profile":{}}},"f:cnSets":{".":{},"k:{\"name\":\"default\"}":{".":{},"f:managed":{".":{},"f:componentBackend":{},"f:config":{},"f:nodeSelector":{".":{},"f:matrixone.cloud/cluster-pool":{},"f:matrixone.cloud/profile":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:sharedStorageCache":{".":{},"f:memoryCacheSize":{}},"f:storageClassName":{},"f:storageSize":{},"f:toleratedTaints":{}},"f:name":{},"f:profile":{},"f:replicas":{},"f:scalingConfig":{".":{},"f:maxReplicas":{},"f:minReplicas":{},"f:policy":{}}}},"f:dnSets":{".":{},"k:{\"name\":\"default\"}":{".":{},"f:managed":{".":{},"f:config":{},"f:nodeSelector":{".":{},"f:matrixone.cloud/cluster-pool":{},"f:matrixone.cloud/profile":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:sharedStorageCache":{".":{},"f:memoryCacheSize":{}},"f:storageClassName":{},"f:storageSize":{},"f:toleratedTaints":{}},"f:name":{},"f:profile":{},"f:replicas":{}}},"f:endpoint":{".":{},"f:mode":{},"f:proxySpec":{".":{},"f:image":{},"f:managed":{".":{},"f:config":{},"f:profile":{}},"f:pluginImage":{},"f:replicas":{}},"f:whitelistIPRanges":{}},"f:logSet":{".":{},"f:managed":{".":{},"f:config":{},"f:nodeSelector":{".":{},"f:matrixone.cloud/cluster-pool":{},"f:matrixone.cloud/profile":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:storageClassName":{},"f:storageSize":{},"f:toleratedTaints":{}},"f:name":{},"f:profile":{},"f:replicas":{}},"f:managed":{".":{},"f:imageRepository":{},"f:localServiceRef":{".":{},"f:name":{}},"f:objectStorage":{".":{},"f:path":{},"f:region":{},"f:restored":{}}},"f:state":{},"f:unitName":{},"f:unitSelector":{},"f:version":{}},"f:state":{}},"manager":"Go-http-client","operation":"Update","time":"2024-03-15T05:26:57Z"},{"apiVersion":"core.matrixone-cloud/v1alpha1","fieldsType":"FieldsV1","fieldsV1":{"f:status":{".":{},"f:conditions":{},"f:endpoint":{},"f:phase":{}}},"manager":"Go-http-client","operation":"Update","subresource":"status","time":"2024-03-15T05:29:47Z"}],"name":"restore-freetier-02","resourceVersion":"96288080","uid":"958654b6-6428-4caa-b525-f346074db6df"},"spec":{"cnPools":[{"managed":{"config":"[cn.frontend]\nsaveQueryResult = \"on\"\nqueryResultTimeout = 72\nlengthOfQueryPrinted = 10000\ndisable-select-into = true\n[cn.txn]\nenable-leak-check = 1\nmax-active-ages = \"20m\"\n[observability]\nmetricUpdateStorageUsageInterval = \"15m\"\nenableStmtMerge = true\nenableMetricToProm = true\n","nodeSelector":{"matrixone.cloud/cluster-pool":"restore-freetier-02","matrixone.cloud/profile":"cn.standard"},"resources":{"limits":{"cpu":"7","memory":"13Gi"},"requests":{"cpu":"7","memory":"13Gi"}},"sharedStorageCache":{"memoryCacheSize":"1Gi"},"storageClassName":"alicloud-disk-essd-pl1","storageSize":"300Gi","toleratedTaints":["profile.matrixone.cloud/cn.standard","cluster-pool.matrixone.cloud/restore-freetier-02"]},"name":"pool","poolStrategy":{"scaleStrategy":{"maxIdle":2},"updateStrategy":{"reclaimTimeout":"24h0m0s"}},"profile":"cn.standard"},{"managed":{"config":"[cn.frontend]\nsaveQueryResult = \"on\"\nqueryResultTimeout = 72\nlengthOfQueryPrinted = 10000\ndisable-select-into = true\n[cn.txn]\nenable-leak-check = 1\nmax-active-ages = \"20m\"\n[observability]\nmetricUpdateStorageUsageInterval = \"15m\"\nenableStmtMerge = true\nenableMetricToProm = true\n","nodeSelector":{"matrixone.cloud/cluster-pool":"restore-freetier-02","matrixone.cloud/profile":"cn.tiny"},"resources":{"limits":{"cpu":"1","memory":"2Gi"},"requests":{"cpu":"1","memory":"2Gi"}},"sharedStorageCache":{"memoryCacheSize":"128Mi"},"storageClassName":"alicloud-disk-essd-pl1","storageSize":"300Gi","toleratedTaints":["profile.matrixone.cloud/cn.tiny","cluster-pool.matrixone.cloud/restore-freetier-02"]},"name":"limited","poolStrategy":{"scaleStrategy":{"maxIdle":0},"updateStrategy":{"reclaimTimeout":"24h0m0s"}},"profile":"cn.tiny"}],"cnSets":[{"managed":{"componentBackend":"Pod","config":"[cn]\ninit-work-state = \"Draining\"\n[cn.frontend]\nsaveQueryResult = \"on\"\nqueryResultTimeout = 72\nlengthOfQueryPrinted = 10000\ndisable-select-into = true\n[cn.txn]\nenable-leak-check = 1\nmax-active-ages = \"20m\"\n[observability]\nmetricUpdateStorageUsageInterval = \"15m\"\nenableStmtMerge = true\nenableMetricToProm = true\n","nodeSelector":{"matrixone.cloud/cluster-pool":"restore-freetier-02","matrixone.cloud/profile":"cn.standard"},"resources":{"limits":{"cpu":"7","memory":"13Gi"},"requests":{"cpu":"7","memory":"13Gi"}},"sharedStorageCache":{"memoryCacheSize":"1Gi"},"storageClassName":"alicloud-disk-essd-pl1","storageSize":"300Gi","toleratedTaints":["profile.matrixone.cloud/cn.standard","cluster-pool.matrixone.cloud/restore-freetier-02"]},"name":"default","profile":"cn.standard","replicas":2,"scalingConfig":{"maxReplicas":10,"minReplicas":2,"policy":"AutoScaling"}}],"dnSets":[{"managed":{"config":"[log]\nlevel = \"info\"\n","nodeSelector":{"matrixone.cloud/cluster-pool":"restore-freetier-02","matrixone.cloud/profile":"dn.standard"},"resources":{"limits":{"cpu":"15","memory":"29184Mi"},"requests":{"cpu":"15","memory":"29184Mi"}},"sharedStorageCache":{"memoryCacheSize":"5Gi"},"storageClassName":"alicloud-disk-essd-pl1","storageSize":"100Gi","toleratedTaints":["profile.matrixone.cloud/dn.standard","cluster-pool.matrixone.cloud/restore-freetier-02"]},"name":"default","profile":"dn.standard","replicas":1}],"endpoint":{"mode":"Dedicated","proxySpec":{"image":"registry.cn-shanghai.aliyuncs.com/matrixorigin/matrixone:nightly-e94ba155","managed":{"config":"[proxy.plugin]\ntimeout = \"3s\"\n","profile":"proxy.standard"},"pluginImage":"registry.cn-hangzhou.aliyuncs.com/ack-cos/plugin:49e2ffd8-20240201","replicas":2},"whitelistIPRanges":["0.0.0.0/0"]},"logSet":{"managed":{"config":"[log]\nlevel = \"info\"\n","nodeSelector":{"matrixone.cloud/cluster-pool":"restore-freetier-02","matrixone.cloud/profile":"log.standard"},"resources":{"limits":{"cpu":"3","memory":"6Gi"},"requests":{"cpu":"3","memory":"6Gi"}},"storageClassName":"alicloud-disk-essd-pl1","storageSize":"100Gi","toleratedTaints":["profile.matrixone.cloud/log.standard","cluster-pool.matrixone.cloud/restore-freetier-02"]},"name":"default","profile":"log.standard","replicas":3},"managed":{"imageRepository":"registry.cn-shanghai.aliyuncs.com/matrixorigin/matrixone","localServiceRef":{"name":"local-service"},"objectStorage":{"path":"moc-backup-test/restore-freetier-02-20240315021618","region":"cn-hangzhou","restored":true}},"state":"Active","unitName":"qa-unit-cn-hangzhou","unitSelector":{"matchLabels":{"matrixone.cloud/cloud":"aliyun","matrixone.cloud/region":"cn-hangzhou"}},"version":"nightly-e94ba155"},"state":{},"status":{"conditions":[{"lastTransitionTime":"2024-03-15T05:26:57Z","message":"Last error: reconcile error: cluster has unready set, wait all desired set ready, requeue after 5s","reason":"empty","status":"False","type":"Synced"}],"endpoint":{},"phase":"Creating"}}

DEBUG    src.tests.upgrade.test_mo_upgrade:test_mo_upgrade.py:219 wait for the conditions by '<lambda>' with args: ('restore-freetier-02',), {}
DEBUG    kubernetes.client.rest:rest.py:235 response body: {"apiVersion":"core.matrixone-cloud/v1alpha1","kind":"Cluster","metadata":{"annotations":{"matrixone.cloud/enable-aksk-authorize":"true"},"creationTimestamp":"2024-03-15T05:26:57Z","generation":1,"labels":{"matrixone.cloud/cordoned":"Y","matrixone.cloud/role":"root"},"managedFields":[{"apiVersion":"core.matrixone-cloud/v1alpha1","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:matrixone.cloud/enable-aksk-authorize":{}},"f:labels":{".":{},"f:matrixone.cloud/cordoned":{},"f:matrixone.cloud/role":{}}},"f:spec":{".":{},"f:cnPools":{".":{},"k:{\"name\":\"limited\"}":{".":{},"f:managed":{".":{},"f:config":{},"f:nodeSelector":{".":{},"f:matrixone.cloud/cluster-pool":{},"f:matrixone.cloud/profile":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:sharedStorageCache":{".":{},"f:memoryCacheSize":{}},"f:storageClassName":{},"f:storageSize":{},"f:toleratedTaints":{}},"f:name":{},"f:poolStrategy":{".":{},"f:scaleStrategy":{".":{},"f:maxIdle":{}},"f:updateStrategy":{".":{},"f:reclaimTimeout":{}}},"f:profile":{}},"k:{\"name\":\"pool\"}":{".":{},"f:managed":{".":{},"f:config":{},"f:nodeSelector":{".":{},"f:matrixone.cloud/cluster-pool":{},"f:matrixone.cloud/profile":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:sharedStorageCache":{".":{},"f:memoryCacheSize":{}},"f:storageClassName":{},"f:storageSize":{},"f:toleratedTaints":{}},"f:name":{},"f:poolStrategy":{".":{},"f:scaleStrategy":{".":{},"f:maxIdle":{}},"f:updateStrategy":{".":{},"f:reclaimTimeout":{}}},"f:profile":{}}},"f:cnSets":{".":{},"k:{\"name\":\"default\"}":{".":{},"f:managed":{".":{},"f:componentBackend":{},"f:config":{},"f:nodeSelector":{".":{},"f:matrixone.cloud/cluster-pool":{},"f:matrixone.cloud/profile":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:sharedStorageCache":{".":{},"f:memoryCacheSize":{}},"f:storageClassName":{},"f:storageSize":{},"f:toleratedTaints":{}},"f:name":{},"f:profile":{},"f:replicas":{},"f:scalingConfig":{".":{},"f:maxReplicas":{},"f:minReplicas":{},"f:policy":{}}}},"f:dnSets":{".":{},"k:{\"name\":\"default\"}":{".":{},"f:managed":{".":{},"f:config":{},"f:nodeSelector":{".":{},"f:matrixone.cloud/cluster-pool":{},"f:matrixone.cloud/profile":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:sharedStorageCache":{".":{},"f:memoryCacheSize":{}},"f:storageClassName":{},"f:storageSize":{},"f:toleratedTaints":{}},"f:name":{},"f:profile":{},"f:replicas":{}}},"f:endpoint":{".":{},"f:mode":{},"f:proxySpec":{".":{},"f:image":{},"f:managed":{".":{},"f:config":{},"f:profile":{}},"f:pluginImage":{},"f:replicas":{}},"f:whitelistIPRanges":{}},"f:logSet":{".":{},"f:managed":{".":{},"f:config":{},"f:nodeSelector":{".":{},"f:matrixone.cloud/cluster-pool":{},"f:matrixone.cloud/profile":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:storageClassName":{},"f:storageSize":{},"f:toleratedTaints":{}},"f:name":{},"f:profile":{},"f:replicas":{}},"f:managed":{".":{},"f:imageRepository":{},"f:localServiceRef":{".":{},"f:name":{}},"f:objectStorage":{".":{},"f:path":{},"f:region":{},"f:restored":{}}},"f:state":{},"f:unitName":{},"f:unitSelector":{},"f:version":{}},"f:state":{}},"manager":"Go-http-client","operation":"Update","time":"2024-03-15T05:26:57Z"},{"apiVersion":"core.matrixone-cloud/v1alpha1","fieldsType":"FieldsV1","fieldsV1":{"f:status":{".":{},"f:conditions":{},"f:endpoint":{},"f:phase":{}}},"manager":"Go-http-client","operation":"Update","subresource":"status","time":"2024-03-15T05:30:13Z"}],"name":"restore-freetier-02","resourceVersion":"96288460","uid":"958654b6-6428-4caa-b525-f346074db6df"},"spec":{"cnPools":[{"managed":{"config":"[cn.frontend]\nsaveQueryResult = \"on\"\nqueryResultTimeout = 72\nlengthOfQueryPrinted = 10000\ndisable-select-into = true\n[cn.txn]\nenable-leak-check = 1\nmax-active-ages = \"20m\"\n[observability]\nmetricUpdateStorageUsageInterval = \"15m\"\nenableStmtMerge = true\nenableMetricToProm = true\n","nodeSelector":{"matrixone.cloud/cluster-pool":"restore-freetier-02","matrixone.cloud/profile":"cn.standard"},"resources":{"limits":{"cpu":"7","memory":"13Gi"},"requests":{"cpu":"7","memory":"13Gi"}},"sharedStorageCache":{"memoryCacheSize":"1Gi"},"storageClassName":"alicloud-disk-essd-pl1","storageSize":"300Gi","toleratedTaints":["profile.matrixone.cloud/cn.standard","cluster-pool.matrixone.cloud/restore-freetier-02"]},"name":"pool","poolStrategy":{"scaleStrategy":{"maxIdle":2},"updateStrategy":{"reclaimTimeout":"24h0m0s"}},"profile":"cn.standard"},{"managed":{"config":"[cn.frontend]\nsaveQueryResult = \"on\"\nqueryResultTimeout = 72\nlengthOfQueryPrinted = 10000\ndisable-select-into = true\n[cn.txn]\nenable-leak-check = 1\nmax-active-ages = \"20m\"\n[observability]\nmetricUpdateStorageUsageInterval = \"15m\"\nenableStmtMerge = true\nenableMetricToProm = true\n","nodeSelector":{"matrixone.cloud/cluster-pool":"restore-freetier-02","matrixone.cloud/profile":"cn.tiny"},"resources":{"limits":{"cpu":"1","memory":"2Gi"},"requests":{"cpu":"1","memory":"2Gi"}},"sharedStorageCache":{"memoryCacheSize":"128Mi"},"storageClassName":"alicloud-disk-essd-pl1","storageSize":"300Gi","toleratedTaints":["profile.matrixone.cloud/cn.tiny","cluster-pool.matrixone.cloud/restore-freetier-02"]},"name":"limited","poolStrategy":{"scaleStrategy":{"maxIdle":0},"updateStrategy":{"reclaimTimeout":"24h0m0s"}},"profile":"cn.tiny"}],"cnSets":[{"managed":{"componentBackend":"Pod","config":"[cn]\ninit-work-state = \"Draining\"\n[cn.frontend]\nsaveQueryResult = \"on\"\nqueryResultTimeout = 72\nlengthOfQueryPrinted = 10000\ndisable-select-into = true\n[cn.txn]\nenable-leak-check = 1\nmax-active-ages = \"20m\"\n[observability]\nmetricUpdateStorageUsageInterval = \"15m\"\nenableStmtMerge = true\nenableMetricToProm = true\n","nodeSelector":{"matrixone.cloud/cluster-pool":"restore-freetier-02","matrixone.cloud/profile":"cn.standard"},"resources":{"limits":{"cpu":"7","memory":"13Gi"},"requests":{"cpu":"7","memory":"13Gi"}},"sharedStorageCache":{"memoryCacheSize":"1Gi"},"storageClassName":"alicloud-disk-essd-pl1","storageSize":"300Gi","toleratedTaints":["profile.matrixone.cloud/cn.standard","cluster-pool.matrixone.cloud/restore-freetier-02"]},"name":"default","profile":"cn.standard","replicas":2,"scalingConfig":{"maxReplicas":10,"minReplicas":2,"policy":"AutoScaling"}}],"dnSets":[{"managed":{"config":"[log]\nlevel = \"info\"\n","nodeSelector":{"matrixone.cloud/cluster-pool":"restore-freetier-02","matrixone.cloud/profile":"dn.standard"},"resources":{"limits":{"cpu":"15","memory":"29184Mi"},"requests":{"cpu":"15","memory":"29184Mi"}},"sharedStorageCache":{"memoryCacheSize":"5Gi"},"storageClassName":"alicloud-disk-essd-pl1","storageSize":"100Gi","toleratedTaints":["profile.matrixone.cloud/dn.standard","cluster-pool.matrixone.cloud/restore-freetier-02"]},"name":"default","profile":"dn.standard","replicas":1}],"endpoint":{"mode":"Dedicated","proxySpec":{"image":"registry.cn-shanghai.aliyuncs.com/matrixorigin/matrixone:nightly-e94ba155","managed":{"config":"[proxy.plugin]\ntimeout = \"3s\"\n","profile":"proxy.standard"},"pluginImage":"registry.cn-hangzhou.aliyuncs.com/ack-cos/plugin:49e2ffd8-20240201","replicas":2},"whitelistIPRanges":["0.0.0.0/0"]},"logSet":{"managed":{"config":"[log]\nlevel = \"info\"\n","nodeSelector":{"matrixone.cloud/cluster-pool":"restore-freetier-02","matrixone.cloud/profile":"log.standard"},"resources":{"limits":{"cpu":"3","memory":"6Gi"},"requests":{"cpu":"3","memory":"6Gi"}},"storageClassName":"alicloud-disk-essd-pl1","storageSize":"100Gi","toleratedTaints":["profile.matrixone.cloud/log.standard","cluster-pool.matrixone.cloud/restore-freetier-02"]},"name":"default","profile":"log.standard","replicas":3},"managed":{"imageRepository":"registry.cn-shanghai.aliyuncs.com/matrixorigin/matrixone","localServiceRef":{"name":"local-service"},"objectStorage":{"path":"moc-backup-test/restore-freetier-02-20240315021618","region":"cn-hangzhou","restored":true}},"state":"Active","unitName":"qa-unit-cn-hangzhou","unitSelector":{"matchLabels":{"matrixone.cloud/cloud":"aliyun","matrixone.cloud/region":"cn-hangzhou"}},"version":"nightly-e94ba155"},"state":{},"status":{"conditions":[{"lastTransitionTime":"2024-03-15T05:26:57Z","message":"Last error: reconcile error: cluster has unready set, wait all desired set ready, requeue after 5s","reason":"empty","status":"False","type":"Synced"}],"endpoint":{},"phase":"Creating"}}

DEBUG    src.tests.upgrade.test_mo_upgrade:test_mo_upgrade.py:219 wait for the conditions by '<lambda>' with args: ('restore-freetier-02',), {}
DEBUG    kubernetes.client.rest:rest.py:235 response body: {"apiVersion":"core.matrixone-cloud/v1alpha1","kind":"Cluster","metadata":{"annotations":{"matrixone.cloud/enable-aksk-authorize":"true"},"creationTimestamp":"2024-03-15T05:26:57Z","generation":1,"labels":{"matrixone.cloud/cordoned":"Y","matrixone.cloud/role":"root"},"managedFields":[{"apiVersion":"core.matrixone-cloud/v1alpha1","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:matrixone.cloud/enable-aksk-authorize":{}},"f:labels":{".":{},"f:matrixone.cloud/cordoned":{},"f:matrixone.cloud/role":{}}},"f:spec":{".":{},"f:cnPools":{".":{},"k:{\"name\":\"limited\"}":{".":{},"f:managed":{".":{},"f:config":{},"f:nodeSelector":{".":{},"f:matrixone.cloud/cluster-pool":{},"f:matrixone.cloud/profile":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:sharedStorageCache":{".":{},"f:memoryCacheSize":{}},"f:storageClassName":{},"f:storageSize":{},"f:toleratedTaints":{}},"f:name":{},"f:poolStrategy":{".":{},"f:scaleStrategy":{".":{},"f:maxIdle":{}},"f:updateStrategy":{".":{},"f:reclaimTimeout":{}}},"f:profile":{}},"k:{\"name\":\"pool\"}":{".":{},"f:managed":{".":{},"f:config":{},"f:nodeSelector":{".":{},"f:matrixone.cloud/cluster-pool":{},"f:matrixone.cloud/profile":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:sharedStorageCache":{".":{},"f:memoryCacheSize":{}},"f:storageClassName":{},"f:storageSize":{},"f:toleratedTaints":{}},"f:name":{},"f:poolStrategy":{".":{},"f:scaleStrategy":{".":{},"f:maxIdle":{}},"f:updateStrategy":{".":{},"f:reclaimTimeout":{}}},"f:profile":{}}},"f:cnSets":{".":{},"k:{\"name\":\"default\"}":{".":{},"f:managed":{".":{},"f:componentBackend":{},"f:config":{},"f:nodeSelector":{".":{},"f:matrixone.cloud/cluster-pool":{},"f:matrixone.cloud/profile":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:sharedStorageCache":{".":{},"f:memoryCacheSize":{}},"f:storageClassName":{},"f:storageSize":{},"f:toleratedTaints":{}},"f:name":{},"f:profile":{},"f:replicas":{},"f:scalingConfig":{".":{},"f:maxReplicas":{},"f:minReplicas":{},"f:policy":{}}}},"f:dnSets":{".":{},"k:{\"name\":\"default\"}":{".":{},"f:managed":{".":{},"f:config":{},"f:nodeSelector":{".":{},"f:matrixone.cloud/cluster-pool":{},"f:matrixone.cloud/profile":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:sharedStorageCache":{".":{},"f:memoryCacheSize":{}},"f:storageClassName":{},"f:storageSize":{},"f:toleratedTaints":{}},"f:name":{},"f:profile":{},"f:replicas":{}}},"f:endpoint":{".":{},"f:mode":{},"f:proxySpec":{".":{},"f:image":{},"f:managed":{".":{},"f:config":{},"f:profile":{}},"f:pluginImage":{},"f:replicas":{}},"f:whitelistIPRanges":{}},"f:logSet":{".":{},"f:managed":{".":{},"f:config":{},"f:nodeSelector":{".":{},"f:matrixone.cloud/cluster-pool":{},"f:matrixone.cloud/profile":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:storageClassName":{},"f:storageSize":{},"f:toleratedTaints":{}},"f:name":{},"f:profile":{},"f:replicas":{}},"f:managed":{".":{},"f:imageRepository":{},"f:localServiceRef":{".":{},"f:name":{}},"f:objectStorage":{".":{},"f:path":{},"f:region":{},"f:restored":{}}},"f:state":{},"f:unitName":{},"f:unitSelector":{},"f:version":{}},"f:state":{}},"manager":"Go-http-client","operation":"Update","time":"2024-03-15T05:26:57Z"},{"apiVersion":"core.matrixone-cloud/v1alpha1","fieldsType":"FieldsV1","fieldsV1":{"f:status":{".":{},"f:conditions":{},"f:endpoint":{},"f:phase":{}}},"manager":"Go-http-client","operation":"Update","subresource":"status","time":"2024-03-15T05:30:44Z"}],"name":"restore-freetier-02","resourceVersion":"96288881","uid":"958654b6-6428-4caa-b525-f346074db6df"},"spec":{"cnPools":[{"managed":{"config":"[cn.frontend]\nsaveQueryResult = \"on\"\nqueryResultTimeout = 72\nlengthOfQueryPrinted = 10000\ndisable-select-into = true\n[cn.txn]\nenable-leak-check = 1\nmax-active-ages = \"20m\"\n[observability]\nmetricUpdateStorageUsageInterval = \"15m\"\nenableStmtMerge = true\nenableMetricToProm = true\n","nodeSelector":{"matrixone.cloud/cluster-pool":"restore-freetier-02","matrixone.cloud/profile":"cn.standard"},"resources":{"limits":{"cpu":"7","memory":"13Gi"},"requests":{"cpu":"7","memory":"13Gi"}},"sharedStorageCache":{"memoryCacheSize":"1Gi"},"storageClassName":"alicloud-disk-essd-pl1","storageSize":"300Gi","toleratedTaints":["profile.matrixone.cloud/cn.standard","cluster-pool.matrixone.cloud/restore-freetier-02"]},"name":"pool","poolStrategy":{"scaleStrategy":{"maxIdle":2},"updateStrategy":{"reclaimTimeout":"24h0m0s"}},"profile":"cn.standard"},{"managed":{"config":"[cn.frontend]\nsaveQueryResult = \"on\"\nqueryResultTimeout = 72\nlengthOfQueryPrinted = 10000\ndisable-select-into = true\n[cn.txn]\nenable-leak-check = 1\nmax-active-ages = \"20m\"\n[observability]\nmetricUpdateStorageUsageInterval = \"15m\"\nenableStmtMerge = true\nenableMetricToProm = true\n","nodeSelector":{"matrixone.cloud/cluster-pool":"restore-freetier-02","matrixone.cloud/profile":"cn.tiny"},"resources":{"limits":{"cpu":"1","memory":"2Gi"},"requests":{"cpu":"1","memory":"2Gi"}},"sharedStorageCache":{"memoryCacheSize":"128Mi"},"storageClassName":"alicloud-disk-essd-pl1","storageSize":"300Gi","toleratedTaints":["profile.matrixone.cloud/cn.tiny","cluster-pool.matrixone.cloud/restore-freetier-02"]},"name":"limited","poolStrategy":{"scaleStrategy":{"maxIdle":0},"updateStrategy":{"reclaimTimeout":"24h0m0s"}},"profile":"cn.tiny"}],"cnSets":[{"managed":{"componentBackend":"Pod","config":"[cn]\ninit-work-state = \"Draining\"\n[cn.frontend]\nsaveQueryResult = \"on\"\nqueryResultTimeout = 72\nlengthOfQueryPrinted = 10000\ndisable-select-into = true\n[cn.txn]\nenable-leak-check = 1\nmax-active-ages = \"20m\"\n[observability]\nmetricUpdateStorageUsageInterval = \"15m\"\nenableStmtMerge = true\nenableMetricToProm = true\n","nodeSelector":{"matrixone.cloud/cluster-pool":"restore-freetier-02","matrixone.cloud/profile":"cn.standard"},"resources":{"limits":{"cpu":"7","memory":"13Gi"},"requests":{"cpu":"7","memory":"13Gi"}},"sharedStorageCache":{"memoryCacheSize":"1Gi"},"storageClassName":"alicloud-disk-essd-pl1","storageSize":"300Gi","toleratedTaints":["profile.matrixone.cloud/cn.standard","cluster-pool.matrixone.cloud/restore-freetier-02"]},"name":"default","profile":"cn.standard","replicas":2,"scalingConfig":{"maxReplicas":10,"minReplicas":2,"policy":"AutoScaling"}}],"dnSets":[{"managed":{"config":"[log]\nlevel = \"info\"\n","nodeSelector":{"matrixone.cloud/cluster-pool":"restore-freetier-02","matrixone.cloud/profile":"dn.standard"},"resources":{"limits":{"cpu":"15","memory":"29184Mi"},"requests":{"cpu":"15","memory":"29184Mi"}},"sharedStorageCache":{"memoryCacheSize":"5Gi"},"storageClassName":"alicloud-disk-essd-pl1","storageSize":"100Gi","toleratedTaints":["profile.matrixone.cloud/dn.standard","cluster-pool.matrixone.cloud/restore-freetier-02"]},"name":"default","profile":"dn.standard","replicas":1}],"endpoint":{"mode":"Dedicated","proxySpec":{"image":"registry.cn-shanghai.aliyuncs.com/matrixorigin/matrixone:nightly-e94ba155","managed":{"config":"[proxy.plugin]\ntimeout = \"3s\"\n","profile":"proxy.standard"},"pluginImage":"registry.cn-hangzhou.aliyuncs.com/ack-cos/plugin:49e2ffd8-20240201","replicas":2},"whitelistIPRanges":["0.0.0.0/0"]},"logSet":{"managed":{"config":"[log]\nlevel = \"info\"\n","nodeSelector":{"matrixone.cloud/cluster-pool":"restore-freetier-02","matrixone.cloud/profile":"log.standard"},"resources":{"limits":{"cpu":"3","memory":"6Gi"},"requests":{"cpu":"3","memory":"6Gi"}},"storageClassName":"alicloud-disk-essd-pl1","storageSize":"100Gi","toleratedTaints":["profile.matrixone.cloud/log.standard","cluster-pool.matrixone.cloud/restore-freetier-02"]},"name":"default","profile":"log.standard","replicas":3},"managed":{"imageRepository":"registry.cn-shanghai.aliyuncs.com/matrixorigin/matrixone","localServiceRef":{"name":"local-service"},"objectStorage":{"path":"moc-backup-test/restore-freetier-02-20240315021618","region":"cn-hangzhou","restored":true}},"state":"Active","unitName":"qa-unit-cn-hangzhou","unitSelector":{"matchLabels":{"matrixone.cloud/cloud":"aliyun","matrixone.cloud/region":"cn-hangzhou"}},"version":"nightly-e94ba155"},"state":{},"status":{"conditions":[{"lastTransitionTime":"2024-03-15T05:26:57Z","message":"Last error: reconcile error: cluster has unready set, wait all desired set ready, requeue after 5s","reason":"empty","status":"False","type":"Synced"}],"endpoint":{},"phase":"Creating"}}

DEBUG    src.tests.upgrade.test_mo_upgrade:test_mo_upgrade.py:219 wait for the conditions by '<lambda>' with args: ('restore-freetier-02',), {}
DEBUG    kubernetes.client.rest:rest.py:235 response body: {"apiVersion":"core.matrixone-cloud/v1alpha1","kind":"Cluster","metadata":{"annotations":{"matrixone.cloud/enable-aksk-authorize":"true"},"creationTimestamp":"2024-03-15T05:26:57Z","generation":1,"labels":{"matrixone.cloud/cordoned":"Y","matrixone.cloud/role":"root"},"managedFields":[{"apiVersion":"core.matrixone-cloud/v1alpha1","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:matrixone.cloud/enable-aksk-authorize":{}},"f:labels":{".":{},"f:matrixone.cloud/cordoned":{},"f:matrixone.cloud/role":{}}},"f:spec":{".":{},"f:cnPools":{".":{},"k:{\"name\":\"limited\"}":{".":{},"f:managed":{".":{},"f:config":{},"f:nodeSelector":{".":{},"f:matrixone.cloud/cluster-pool":{},"f:matrixone.cloud/profile":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:sharedStorageCache":{".":{},"f:memoryCacheSize":{}},"f:storageClassName":{},"f:storageSize":{},"f:toleratedTaints":{}},"f:name":{},"f:poolStrategy":{".":{},"f:scaleStrategy":{".":{},"f:maxIdle":{}},"f:updateStrategy":{".":{},"f:reclaimTimeout":{}}},"f:profile":{}},"k:{\"name\":\"pool\"}":{".":{},"f:managed":{".":{},"f:config":{},"f:nodeSelector":{".":{},"f:matrixone.cloud/cluster-pool":{},"f:matrixone.cloud/profile":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:sharedStorageCache":{".":{},"f:memoryCacheSize":{}},"f:storageClassName":{},"f:storageSize":{},"f:toleratedTaints":{}},"f:name":{},"f:poolStrategy":{".":{},"f:scaleStrategy":{".":{},"f:maxIdle":{}},"f:updateStrategy":{".":{},"f:reclaimTimeout":{}}},"f:profile":{}}},"f:cnSets":{".":{},"k:{\"name\":\"default\"}":{".":{},"f:managed":{".":{},"f:componentBackend":{},"f:config":{},"f:nodeSelector":{".":{},"f:matrixone.cloud/cluster-pool":{},"f:matrixone.cloud/profile":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:sharedStorageCache":{".":{},"f:memoryCacheSize":{}},"f:storageClassName":{},"f:storageSize":{},"f:toleratedTaints":{}},"f:name":{},"f:profile":{},"f:replicas":{},"f:scalingConfig":{".":{},"f:maxReplicas":{},"f:minReplicas":{},"f:policy":{}}}},"f:dnSets":{".":{},"k:{\"name\":\"default\"}":{".":{},"f:managed":{".":{},"f:config":{},"f:nodeSelector":{".":{},"f:matrixone.cloud/cluster-pool":{},"f:matrixone.cloud/profile":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:sharedStorageCache":{".":{},"f:memoryCacheSize":{}},"f:storageClassName":{},"f:storageSize":{},"f:toleratedTaints":{}},"f:name":{},"f:profile":{},"f:replicas":{}}},"f:endpoint":{".":{},"f:mode":{},"f:proxySpec":{".":{},"f:image":{},"f:managed":{".":{},"f:config":{},"f:profile":{}},"f:pluginImage":{},"f:replicas":{}},"f:whitelistIPRanges":{}},"f:logSet":{".":{},"f:managed":{".":{},"f:config":{},"f:nodeSelector":{".":{},"f:matrixone.cloud/cluster-pool":{},"f:matrixone.cloud/profile":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:storageClassName":{},"f:storageSize":{},"f:toleratedTaints":{}},"f:name":{},"f:profile":{},"f:replicas":{}},"f:managed":{".":{},"f:imageRepository":{},"f:localServiceRef":{".":{},"f:name":{}},"f:objectStorage":{".":{},"f:path":{},"f:region":{},"f:restored":{}}},"f:state":{},"f:unitName":{},"f:unitSelector":{},"f:version":{}},"f:state":{}},"manager":"Go-http-client","operation":"Update","time":"2024-03-15T05:26:57Z"},{"apiVersion":"core.matrixone-cloud/v1alpha1","fieldsType":"FieldsV1","fieldsV1":{"f:status":{".":{},"f:conditions":{},"f:endpoint":{},"f:phase":{}}},"manager":"Go-http-client","operation":"Update","subresource":"status","time":"2024-03-15T05:31:15Z"}],"name":"restore-freetier-02","resourceVersion":"96289375","uid":"958654b6-6428-4caa-b525-f346074db6df"},"spec":{"cnPools":[{"managed":{"config":"[cn.frontend]\nsaveQueryResult = \"on\"\nqueryResultTimeout = 72\nlengthOfQueryPrinted = 10000\ndisable-select-into = true\n[cn.txn]\nenable-leak-check = 1\nmax-active-ages = \"20m\"\n[observability]\nmetricUpdateStorageUsageInterval = \"15m\"\nenableStmtMerge = true\nenableMetricToProm = true\n","nodeSelector":{"matrixone.cloud/cluster-pool":"restore-freetier-02","matrixone.cloud/profile":"cn.standard"},"resources":{"limits":{"cpu":"7","memory":"13Gi"},"requests":{"cpu":"7","memory":"13Gi"}},"sharedStorageCache":{"memoryCacheSize":"1Gi"},"storageClassName":"alicloud-disk-essd-pl1","storageSize":"300Gi","toleratedTaints":["profile.matrixone.cloud/cn.standard","cluster-pool.matrixone.cloud/restore-freetier-02"]},"name":"pool","poolStrategy":{"scaleStrategy":{"maxIdle":2},"updateStrategy":{"reclaimTimeout":"24h0m0s"}},"profile":"cn.standard"},{"managed":{"config":"[cn.frontend]\nsaveQueryResult = \"on\"\nqueryResultTimeout = 72\nlengthOfQueryPrinted = 10000\ndisable-select-into = true\n[cn.txn]\nenable-leak-check = 1\nmax-active-ages = \"20m\"\n[observability]\nmetricUpdateStorageUsageInterval = \"15m\"\nenableStmtMerge = true\nenableMetricToProm = true\n","nodeSelector":{"matrixone.cloud/cluster-pool":"restore-freetier-02","matrixone.cloud/profile":"cn.tiny"},"resources":{"limits":{"cpu":"1","memory":"2Gi"},"requests":{"cpu":"1","memory":"2Gi"}},"sharedStorageCache":{"memoryCacheSize":"128Mi"},"storageClassName":"alicloud-disk-essd-pl1","storageSize":"300Gi","toleratedTaints":["profile.matrixone.cloud/cn.tiny","cluster-pool.matrixone.cloud/restore-freetier-02"]},"name":"limited","poolStrategy":{"scaleStrategy":{"maxIdle":0},"updateStrategy":{"reclaimTimeout":"24h0m0s"}},"profile":"cn.tiny"}],"cnSets":[{"managed":{"componentBackend":"Pod","config":"[cn]\ninit-work-state = \"Draining\"\n[cn.frontend]\nsaveQueryResult = \"on\"\nqueryResultTimeout = 72\nlengthOfQueryPrinted = 10000\ndisable-select-into = true\n[cn.txn]\nenable-leak-check = 1\nmax-active-ages = \"20m\"\n[observability]\nmetricUpdateStorageUsageInterval = \"15m\"\nenableStmtMerge = true\nenableMetricToProm = true\n","nodeSelector":{"matrixone.cloud/cluster-pool":"restore-freetier-02","matrixone.cloud/profile":"cn.standard"},"resources":{"limits":{"cpu":"7","memory":"13Gi"},"requests":{"cpu":"7","memory":"13Gi"}},"sharedStorageCache":{"memoryCacheSize":"1Gi"},"storageClassName":"alicloud-disk-essd-pl1","storageSize":"300Gi","toleratedTaints":["profile.matrixone.cloud/cn.standard","cluster-pool.matrixone.cloud/restore-freetier-02"]},"name":"default","profile":"cn.standard","replicas":2,"scalingConfig":{"maxReplicas":10,"minReplicas":2,"policy":"AutoScaling"}}],"dnSets":[{"managed":{"config":"[log]\nlevel = \"info\"\n","nodeSelector":{"matrixone.cloud/cluster-pool":"restore-freetier-02","matrixone.cloud/profile":"dn.standard"},"resources":{"limits":{"cpu":"15","memory":"29184Mi"},"requests":{"cpu":"15","memory":"29184Mi"}},"sharedStorageCache":{"memoryCacheSize":"5Gi"},"storageClassName":"alicloud-disk-essd-pl1","storageSize":"100Gi","toleratedTaints":["profile.matrixone.cloud/dn.standard","cluster-pool.matrixone.cloud/restore-freetier-02"]},"name":"default","profile":"dn.standard","replicas":1}],"endpoint":{"mode":"Dedicated","proxySpec":{"image":"registry.cn-shanghai.aliyuncs.com/matrixorigin/matrixone:nightly-e94ba155","managed":{"config":"[proxy.plugin]\ntimeout = \"3s\"\n","profile":"proxy.standard"},"pluginImage":"registry.cn-hangzhou.aliyuncs.com/ack-cos/plugin:49e2ffd8-20240201","replicas":2},"whitelistIPRanges":["0.0.0.0/0"]},"logSet":{"managed":{"config":"[log]\nlevel = \"info\"\n","nodeSelector":{"matrixone.cloud/cluster-pool":"restore-freetier-02","matrixone.cloud/profile":"log.standard"},"resources":{"limits":{"cpu":"3","memory":"6Gi"},"requests":{"cpu":"3","memory":"6Gi"}},"storageClassName":"alicloud-disk-essd-pl1","storageSize":"100Gi","toleratedTaints":["profile.matrixone.cloud/log.standard","cluster-pool.matrixone.cloud/restore-freetier-02"]},"name":"default","profile":"log.standard","replicas":3},"managed":{"imageRepository":"registry.cn-shanghai.aliyuncs.com/matrixorigin/matrixone","localServiceRef":{"name":"local-service"},"objectStorage":{"path":"moc-backup-test/restore-freetier-02-20240315021618","region":"cn-hangzhou","restored":true}},"state":"Active","unitName":"qa-unit-cn-hangzhou","unitSelector":{"matchLabels":{"matrixone.cloud/cloud":"aliyun","matrixone.cloud/region":"cn-hangzhou"}},"version":"nightly-e94ba155"},"state":{},"status":{"conditions":[{"lastTransitionTime":"2024-03-15T05:26:57Z","message":"Last error: reconcile error: cluster has unready set, wait all desired set ready, requeue after 5s","reason":"empty","status":"False","type":"Synced"}],"endpoint":{},"phase":"Creating"}}

DEBUG    src.tests.upgrade.test_mo_upgrade:test_mo_upgrade.py:219 wait for the conditions by '<lambda>' with args: ('restore-freetier-02',), {}
DEBUG    kubernetes.client.rest:rest.py:235 response body: {"apiVersion":"core.matrixone-cloud/v1alpha1","kind":"Cluster","metadata":{"annotations":{"matrixone.cloud/enable-aksk-authorize":"true"},"creationTimestamp":"2024-03-15T05:26:57Z","generation":1,"labels":{"matrixone.cloud/cordoned":"Y","matrixone.cloud/role":"root"},"managedFields":[{"apiVersion":"core.matrixone-cloud/v1alpha1","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:matrixone.cloud/enable-aksk-authorize":{}},"f:labels":{".":{},"f:matrixone.cloud/cordoned":{},"f:matrixone.cloud/role":{}}},"f:spec":{".":{},"f:cnPools":{".":{},"k:{\"name\":\"limited\"}":{".":{},"f:managed":{".":{},"f:config":{},"f:nodeSelector":{".":{},"f:matrixone.cloud/cluster-pool":{},"f:matrixone.cloud/profile":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:sharedStorageCache":{".":{},"f:memoryCacheSize":{}},"f:storageClassName":{},"f:storageSize":{},"f:toleratedTaints":{}},"f:name":{},"f:poolStrategy":{".":{},"f:scaleStrategy":{".":{},"f:maxIdle":{}},"f:updateStrategy":{".":{},"f:reclaimTimeout":{}}},"f:profile":{}},"k:{\"name\":\"pool\"}":{".":{},"f:managed":{".":{},"f:config":{},"f:nodeSelector":{".":{},"f:matrixone.cloud/cluster-pool":{},"f:matrixone.cloud/profile":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:sharedStorageCache":{".":{},"f:memoryCacheSize":{}},"f:storageClassName":{},"f:storageSize":{},"f:toleratedTaints":{}},"f:name":{},"f:poolStrategy":{".":{},"f:scaleStrategy":{".":{},"f:maxIdle":{}},"f:updateStrategy":{".":{},"f:reclaimTimeout":{}}},"f:profile":{}}},"f:cnSets":{".":{},"k:{\"name\":\"default\"}":{".":{},"f:managed":{".":{},"f:componentBackend":{},"f:config":{},"f:nodeSelector":{".":{},"f:matrixone.cloud/cluster-pool":{},"f:matrixone.cloud/profile":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:sharedStorageCache":{".":{},"f:memoryCacheSize":{}},"f:storageClassName":{},"f:storageSize":{},"f:toleratedTaints":{}},"f:name":{},"f:profile":{},"f:replicas":{},"f:scalingConfig":{".":{},"f:maxReplicas":{},"f:minReplicas":{},"f:policy":{}}}},"f:dnSets":{".":{},"k:{\"name\":\"default\"}":{".":{},"f:managed":{".":{},"f:config":{},"f:nodeSelector":{".":{},"f:matrixone.cloud/cluster-pool":{},"f:matrixone.cloud/profile":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:sharedStorageCache":{".":{},"f:memoryCacheSize":{}},"f:storageClassName":{},"f:storageSize":{},"f:toleratedTaints":{}},"f:name":{},"f:profile":{},"f:replicas":{}}},"f:endpoint":{".":{},"f:mode":{},"f:proxySpec":{".":{},"f:image":{},"f:managed":{".":{},"f:config":{},"f:profile":{}},"f:pluginImage":{},"f:replicas":{}},"f:whitelistIPRanges":{}},"f:logSet":{".":{},"f:managed":{".":{},"f:config":{},"f:nodeSelector":{".":{},"f:matrixone.cloud/cluster-pool":{},"f:matrixone.cloud/profile":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:storageClassName":{},"f:storageSize":{},"f:toleratedTaints":{}},"f:name":{},"f:profile":{},"f:replicas":{}},"f:managed":{".":{},"f:imageRepository":{},"f:localServiceRef":{".":{},"f:name":{}},"f:objectStorage":{".":{},"f:path":{},"f:region":{},"f:restored":{}}},"f:state":{},"f:unitName":{},"f:unitSelector":{},"f:version":{}},"f:state":{}},"manager":"Go-http-client","operation":"Update","time":"2024-03-15T05:26:57Z"},{"apiVersion":"core.matrixone-cloud/v1alpha1","fieldsType":"FieldsV1","fieldsV1":{"f:status":{".":{},"f:conditions":{},"f:endpoint":{},"f:phase":{}}},"manager":"Go-http-client","operation":"Update","subresource":"status","time":"2024-03-15T05:31:47Z"}],"name":"restore-freetier-02","resourceVersion":"96289760","uid":"958654b6-6428-4caa-b525-f346074db6df"},"spec":{"cnPools":[{"managed":{"config":"[cn.frontend]\nsaveQueryResult = \"on\"\nqueryResultTimeout = 72\nlengthOfQueryPrinted = 10000\ndisable-select-into = true\n[cn.txn]\nenable-leak-check = 1\nmax-active-ages = \"20m\"\n[observability]\nmetricUpdateStorageUsageInterval = \"15m\"\nenableStmtMerge = true\nenableMetricToProm = true\n","nodeSelector":{"matrixone.cloud/cluster-pool":"restore-freetier-02","matrixone.cloud/profile":"cn.standard"},"resources":{"limits":{"cpu":"7","memory":"13Gi"},"requests":{"cpu":"7","memory":"13Gi"}},"sharedStorageCache":{"memoryCacheSize":"1Gi"},"storageClassName":"alicloud-disk-essd-pl1","storageSize":"300Gi","toleratedTaints":["profile.matrixone.cloud/cn.standard","cluster-pool.matrixone.cloud/restore-freetier-02"]},"name":"pool","poolStrategy":{"scaleStrategy":{"maxIdle":2},"updateStrategy":{"reclaimTimeout":"24h0m0s"}},"profile":"cn.standard"},{"managed":{"config":"[cn.frontend]\nsaveQueryResult = \"on\"\nqueryResultTimeout = 72\nlengthOfQueryPrinted = 10000\ndisable-select-into = true\n[cn.txn]\nenable-leak-check = 1\nmax-active-ages = \"20m\"\n[observability]\nmetricUpdateStorageUsageInterval = \"15m\"\nenableStmtMerge = true\nenableMetricToProm = true\n","nodeSelector":{"matrixone.cloud/cluster-pool":"restore-freetier-02","matrixone.cloud/profile":"cn.tiny"},"resources":{"limits":{"cpu":"1","memory":"2Gi"},"requests":{"cpu":"1","memory":"2Gi"}},"sharedStorageCache":{"memoryCacheSize":"128Mi"},"storageClassName":"alicloud-disk-essd-pl1","storageSize":"300Gi","toleratedTaints":["profile.matrixone.cloud/cn.tiny","cluster-pool.matrixone.cloud/restore-freetier-02"]},"name":"limited","poolStrategy":{"scaleStrategy":{"maxIdle":0},"updateStrategy":{"reclaimTimeout":"24h0m0s"}},"profile":"cn.tiny"}],"cnSets":[{"managed":{"componentBackend":"Pod","config":"[cn]\ninit-work-state = \"Draining\"\n[cn.frontend]\nsaveQueryResult = \"on\"\nqueryResultTimeout = 72\nlengthOfQueryPrinted = 10000\ndisable-select-into = true\n[cn.txn]\nenable-leak-check = 1\nmax-active-ages = \"20m\"\n[observability]\nmetricUpdateStorageUsageInterval = \"15m\"\nenableStmtMerge = true\nenableMetricToProm = true\n","nodeSelector":{"matrixone.cloud/cluster-pool":"restore-freetier-02","matrixone.cloud/profile":"cn.standard"},"resources":{"limits":{"cpu":"7","memory":"13Gi"},"requests":{"cpu":"7","memory":"13Gi"}},"sharedStorageCache":{"memoryCacheSize":"1Gi"},"storageClassName":"alicloud-disk-essd-pl1","storageSize":"300Gi","toleratedTaints":["profile.matrixone.cloud/cn.standard","cluster-pool.matrixone.cloud/restore-freetier-02"]},"name":"default","profile":"cn.standard","replicas":2,"scalingConfig":{"maxReplicas":10,"minReplicas":2,"policy":"AutoScaling"}}],"dnSets":[{"managed":{"config":"[log]\nlevel = \"info\"\n","nodeSelector":{"matrixone.cloud/cluster-pool":"restore-freetier-02","matrixone.cloud/profile":"dn.standard"},"resources":{"limits":{"cpu":"15","memory":"29184Mi"},"requests":{"cpu":"15","memory":"29184Mi"}},"sharedStorageCache":{"memoryCacheSize":"5Gi"},"storageClassName":"alicloud-disk-essd-pl1","storageSize":"100Gi","toleratedTaints":["profile.matrixone.cloud/dn.standard","cluster-pool.matrixone.cloud/restore-freetier-02"]},"name":"default","profile":"dn.standard","replicas":1}],"endpoint":{"mode":"Dedicated","proxySpec":{"image":"registry.cn-shanghai.aliyuncs.com/matrixorigin/matrixone:nightly-e94ba155","managed":{"config":"[proxy.plugin]\ntimeout = \"3s\"\n","profile":"proxy.standard"},"pluginImage":"registry.cn-hangzhou.aliyuncs.com/ack-cos/plugin:49e2ffd8-20240201","replicas":2},"whitelistIPRanges":["0.0.0.0/0"]},"logSet":{"managed":{"config":"[log]\nlevel = \"info\"\n","nodeSelector":{"matrixone.cloud/cluster-pool":"restore-freetier-02","matrixone.cloud/profile":"log.standard"},"resources":{"limits":{"cpu":"3","memory":"6Gi"},"requests":{"cpu":"3","memory":"6Gi"}},"storageClassName":"alicloud-disk-essd-pl1","storageSize":"100Gi","toleratedTaints":["profile.matrixone.cloud/log.standard","cluster-pool.matrixone.cloud/restore-freetier-02"]},"name":"default","profile":"log.standard","replicas":3},"managed":{"imageRepository":"registry.cn-shanghai.aliyuncs.com/matrixorigin/matrixone","localServiceRef":{"name":"local-service"},"objectStorage":{"path":"moc-backup-test/restore-freetier-02-20240315021618","region":"cn-hangzhou","restored":true}},"state":"Active","unitName":"qa-unit-cn-hangzhou","unitSelector":{"matchLabels":{"matrixone.cloud/cloud":"aliyun","matrixone.cloud/region":"cn-hangzhou"}},"version":"nightly-e94ba155"},"state":{},"status":{"conditions":[{"lastTransitionTime":"2024-03-15T05:26:57Z","message":"Last error: reconcile error: cluster has unready set, wait all desired set ready, requeue after 5s","reason":"empty","status":"False","type":"Synced"}],"endpoint":{},"phase":"Creating"}}

DEBUG    src.tests.upgrade.test_mo_upgrade:test_mo_upgrade.py:219 wait for the conditions by '<lambda>' with args: ('restore-freetier-02',), {}
DEBUG    kubernetes.client.rest:rest.py:235 response body: {"apiVersion":"core.matrixone-cloud/v1alpha1","kind":"Cluster","metadata":{"annotations":{"matrixone.cloud/enable-aksk-authorize":"true"},"creationTimestamp":"2024-03-15T05:26:57Z","generation":1,"labels":{"matrixone.cloud/cordoned":"Y","matrixone.cloud/role":"root"},"managedFields":[{"apiVersion":"core.matrixone-cloud/v1alpha1","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:matrixone.cloud/enable-aksk-authorize":{}},"f:labels":{".":{},"f:matrixone.cloud/cordoned":{},"f:matrixone.cloud/role":{}}},"f:spec":{".":{},"f:cnPools":{".":{},"k:{\"name\":\"limited\"}":{".":{},"f:managed":{".":{},"f:config":{},"f:nodeSelector":{".":{},"f:matrixone.cloud/cluster-pool":{},"f:matrixone.cloud/profile":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:sharedStorageCache":{".":{},"f:memoryCacheSize":{}},"f:storageClassName":{},"f:storageSize":{},"f:toleratedTaints":{}},"f:name":{},"f:poolStrategy":{".":{},"f:scaleStrategy":{".":{},"f:maxIdle":{}},"f:updateStrategy":{".":{},"f:reclaimTimeout":{}}},"f:profile":{}},"k:{\"name\":\"pool\"}":{".":{},"f:managed":{".":{},"f:config":{},"f:nodeSelector":{".":{},"f:matrixone.cloud/cluster-pool":{},"f:matrixone.cloud/profile":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:sharedStorageCache":{".":{},"f:memoryCacheSize":{}},"f:storageClassName":{},"f:storageSize":{},"f:toleratedTaints":{}},"f:name":{},"f:poolStrategy":{".":{},"f:scaleStrategy":{".":{},"f:maxIdle":{}},"f:updateStrategy":{".":{},"f:reclaimTimeout":{}}},"f:profile":{}}},"f:cnSets":{".":{},"k:{\"name\":\"default\"}":{".":{},"f:managed":{".":{},"f:componentBackend":{},"f:config":{},"f:nodeSelector":{".":{},"f:matrixone.cloud/cluster-pool":{},"f:matrixone.cloud/profile":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:sharedStorageCache":{".":{},"f:memoryCacheSize":{}},"f:storageClassName":{},"f:storageSize":{},"f:toleratedTaints":{}},"f:name":{},"f:profile":{},"f:replicas":{},"f:scalingConfig":{".":{},"f:maxReplicas":{},"f:minReplicas":{},"f:policy":{}}}},"f:dnSets":{".":{},"k:{\"name\":\"default\"}":{".":{},"f:managed":{".":{},"f:config":{},"f:nodeSelector":{".":{},"f:matrixone.cloud/cluster-pool":{},"f:matrixone.cloud/profile":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:sharedStorageCache":{".":{},"f:memoryCacheSize":{}},"f:storageClassName":{},"f:storageSize":{},"f:toleratedTaints":{}},"f:name":{},"f:profile":{},"f:replicas":{}}},"f:endpoint":{".":{},"f:mode":{},"f:proxySpec":{".":{},"f:image":{},"f:managed":{".":{},"f:config":{},"f:profile":{}},"f:pluginImage":{},"f:replicas":{}},"f:whitelistIPRanges":{}},"f:logSet":{".":{},"f:managed":{".":{},"f:config":{},"f:nodeSelector":{".":{},"f:matrixone.cloud/cluster-pool":{},"f:matrixone.cloud/profile":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:storageClassName":{},"f:storageSize":{},"f:toleratedTaints":{}},"f:name":{},"f:profile":{},"f:replicas":{}},"f:managed":{".":{},"f:imageRepository":{},"f:localServiceRef":{".":{},"f:name":{}},"f:objectStorage":{".":{},"f:path":{},"f:region":{},"f:restored":{}}},"f:state":{},"f:unitName":{},"f:unitSelector":{},"f:version":{}},"f:state":{}},"manager":"Go-http-client","operation":"Update","time":"2024-03-15T05:26:57Z"},{"apiVersion":"core.matrixone-cloud/v1alpha1","fieldsType":"FieldsV1","fieldsV1":{"f:status":{".":{},"f:conditions":{},"f:endpoint":{},"f:phase":{}}},"manager":"Go-http-client","operation":"Update","subresource":"status","time":"2024-03-15T05:32:17Z"}],"name":"restore-freetier-02","resourceVersion":"96290280","uid":"958654b6-6428-4caa-b525-f346074db6df"},"spec":{"cnPools":[{"managed":{"config":"[cn.frontend]\nsaveQueryResult = \"on\"\nqueryResultTimeout = 72\nlengthOfQueryPrinted = 10000\ndisable-select-into = true\n[cn.txn]\nenable-leak-check = 1\nmax-active-ages = \"20m\"\n[observability]\nmetricUpdateStorageUsageInterval = \"15m\"\nenableStmtMerge = true\nenableMetricToProm = true\n","nodeSelector":{"matrixone.cloud/cluster-pool":"restore-freetier-02","matrixone.cloud/profile":"cn.standard"},"resources":{"limits":{"cpu":"7","memory":"13Gi"},"requests":{"cpu":"7","memory":"13Gi"}},"sharedStorageCache":{"memoryCacheSize":"1Gi"},"storageClassName":"alicloud-disk-essd-pl1","storageSize":"300Gi","toleratedTaints":["profile.matrixone.cloud/cn.standard","cluster-pool.matrixone.cloud/restore-freetier-02"]},"name":"pool","poolStrategy":{"scaleStrategy":{"maxIdle":2},"updateStrategy":{"reclaimTimeout":"24h0m0s"}},"profile":"cn.standard"},{"managed":{"config":"[cn.frontend]\nsaveQueryResult = \"on\"\nqueryResultTimeout = 72\nlengthOfQueryPrinted = 10000\ndisable-select-into = true\n[cn.txn]\nenable-leak-check = 1\nmax-active-ages = \"20m\"\n[observability]\nmetricUpdateStorageUsageInterval = \"15m\"\nenableStmtMerge = true\nenableMetricToProm = true\n","nodeSelector":{"matrixone.cloud/cluster-pool":"restore-freetier-02","matrixone.cloud/profile":"cn.tiny"},"resources":{"limits":{"cpu":"1","memory":"2Gi"},"requests":{"cpu":"1","memory":"2Gi"}},"sharedStorageCache":{"memoryCacheSize":"128Mi"},"storageClassName":"alicloud-disk-essd-pl1","storageSize":"300Gi","toleratedTaints":["profile.matrixone.cloud/cn.tiny","cluster-pool.matrixone.cloud/restore-freetier-02"]},"name":"limited","poolStrategy":{"scaleStrategy":{"maxIdle":0},"updateStrategy":{"reclaimTimeout":"24h0m0s"}},"profile":"cn.tiny"}],"cnSets":[{"managed":{"componentBackend":"Pod","config":"[cn]\ninit-work-state = \"Draining\"\n[cn.frontend]\nsaveQueryResult = \"on\"\nqueryResultTimeout = 72\nlengthOfQueryPrinted = 10000\ndisable-select-into = true\n[cn.txn]\nenable-leak-check = 1\nmax-active-ages = \"20m\"\n[observability]\nmetricUpdateStorageUsageInterval = \"15m\"\nenableStmtMerge = true\nenableMetricToProm = true\n","nodeSelector":{"matrixone.cloud/cluster-pool":"restore-freetier-02","matrixone.cloud/profile":"cn.standard"},"resources":{"limits":{"cpu":"7","memory":"13Gi"},"requests":{"cpu":"7","memory":"13Gi"}},"sharedStorageCache":{"memoryCacheSize":"1Gi"},"storageClassName":"alicloud-disk-essd-pl1","storageSize":"300Gi","toleratedTaints":["profile.matrixone.cloud/cn.standard","cluster-pool.matrixone.cloud/restore-freetier-02"]},"name":"default","profile":"cn.standard","replicas":2,"scalingConfig":{"maxReplicas":10,"minReplicas":2,"policy":"AutoScaling"}}],"dnSets":[{"managed":{"config":"[log]\nlevel = \"info\"\n","nodeSelector":{"matrixone.cloud/cluster-pool":"restore-freetier-02","matrixone.cloud/profile":"dn.standard"},"resources":{"limits":{"cpu":"15","memory":"29184Mi"},"requests":{"cpu":"15","memory":"29184Mi"}},"sharedStorageCache":{"memoryCacheSize":"5Gi"},"storageClassName":"alicloud-disk-essd-pl1","storageSize":"100Gi","toleratedTaints":["profile.matrixone.cloud/dn.standard","cluster-pool.matrixone.cloud/restore-freetier-02"]},"name":"default","profile":"dn.standard","replicas":1}],"endpoint":{"mode":"Dedicated","proxySpec":{"image":"registry.cn-shanghai.aliyuncs.com/matrixorigin/matrixone:nightly-e94ba155","managed":{"config":"[proxy.plugin]\ntimeout = \"3s\"\n","profile":"proxy.standard"},"pluginImage":"registry.cn-hangzhou.aliyuncs.com/ack-cos/plugin:49e2ffd8-20240201","replicas":2},"whitelistIPRanges":["0.0.0.0/0"]},"logSet":{"managed":{"config":"[log]\nlevel = \"info\"\n","nodeSelector":{"matrixone.cloud/cluster-pool":"restore-freetier-02","matrixone.cloud/profile":"log.standard"},"resources":{"limits":{"cpu":"3","memory":"6Gi"},"requests":{"cpu":"3","memory":"6Gi"}},"storageClassName":"alicloud-disk-essd-pl1","storageSize":"100Gi","toleratedTaints":["profile.matrixone.cloud/log.standard","cluster-pool.matrixone.cloud/restore-freetier-02"]},"name":"default","profile":"log.standard","replicas":3},"managed":{"imageRepository":"registry.cn-shanghai.aliyuncs.com/matrixorigin/matrixone","localServiceRef":{"name":"local-service"},"objectStorage":{"path":"moc-backup-test/restore-freetier-02-20240315021618","region":"cn-hangzhou","restored":true}},"state":"Active","unitName":"qa-unit-cn-hangzhou","unitSelector":{"matchLabels":{"matrixone.cloud/cloud":"aliyun","matrixone.cloud/region":"cn-hangzhou"}},"version":"nightly-e94ba155"},"state":{},"status":{"conditions":[{"lastTransitionTime":"2024-03-15T05:26:57Z","message":"Last error: reconcile error: cluster has unready set, wait all desired set ready, requeue after 5s","reason":"empty","status":"False","type":"Synced"}],"endpoint":{},"phase":"Creating"}}

DEBUG    src.tests.upgrade.test_mo_upgrade:test_mo_upgrade.py:219 wait for the conditions by '<lambda>' with args: ('restore-freetier-02',), {}
DEBUG    kubernetes.client.rest:rest.py:235 response body: {"apiVersion":"core.matrixone-cloud/v1alpha1","kind":"Cluster","metadata":{"annotations":{"matrixone.cloud/enable-aksk-authorize":"true"},"creationTimestamp":"2024-03-15T05:26:57Z","generation":1,"labels":{"matrixone.cloud/cordoned":"Y","matrixone.cloud/role":"root"},"managedFields":[{"apiVersion":"core.matrixone-cloud/v1alpha1","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:matrixone.cloud/enable-aksk-authorize":{}},"f:labels":{".":{},"f:matrixone.cloud/cordoned":{},"f:matrixone.cloud/role":{}}},"f:spec":{".":{},"f:cnPools":{".":{},"k:{\"name\":\"limited\"}":{".":{},"f:managed":{".":{},"f:config":{},"f:nodeSelector":{".":{},"f:matrixone.cloud/cluster-pool":{},"f:matrixone.cloud/profile":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:sharedStorageCache":{".":{},"f:memoryCacheSize":{}},"f:storageClassName":{},"f:storageSize":{},"f:toleratedTaints":{}},"f:name":{},"f:poolStrategy":{".":{},"f:scaleStrategy":{".":{},"f:maxIdle":{}},"f:updateStrategy":{".":{},"f:reclaimTimeout":{}}},"f:profile":{}},"k:{\"name\":\"pool\"}":{".":{},"f:managed":{".":{},"f:config":{},"f:nodeSelector":{".":{},"f:matrixone.cloud/cluster-pool":{},"f:matrixone.cloud/profile":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:sharedStorageCache":{".":{},"f:memoryCacheSize":{}},"f:storageClassName":{},"f:storageSize":{},"f:toleratedTaints":{}},"f:name":{},"f:poolStrategy":{".":{},"f:scaleStrategy":{".":{},"f:maxIdle":{}},"f:updateStrategy":{".":{},"f:reclaimTimeout":{}}},"f:profile":{}}},"f:cnSets":{".":{},"k:{\"name\":\"default\"}":{".":{},"f:managed":{".":{},"f:componentBackend":{},"f:config":{},"f:nodeSelector":{".":{},"f:matrixone.cloud/cluster-pool":{},"f:matrixone.cloud/profile":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:sharedStorageCache":{".":{},"f:memoryCacheSize":{}},"f:storageClassName":{},"f:storageSize":{},"f:toleratedTaints":{}},"f:name":{},"f:profile":{},"f:replicas":{},"f:scalingConfig":{".":{},"f:maxReplicas":{},"f:minReplicas":{},"f:policy":{}}}},"f:dnSets":{".":{},"k:{\"name\":\"default\"}":{".":{},"f:managed":{".":{},"f:config":{},"f:nodeSelector":{".":{},"f:matrixone.cloud/cluster-pool":{},"f:matrixone.cloud/profile":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:sharedStorageCache":{".":{},"f:memoryCacheSize":{}},"f:storageClassName":{},"f:storageSize":{},"f:toleratedTaints":{}},"f:name":{},"f:profile":{},"f:replicas":{}}},"f:endpoint":{".":{},"f:mode":{},"f:proxySpec":{".":{},"f:image":{},"f:managed":{".":{},"f:config":{},"f:profile":{}},"f:pluginImage":{},"f:replicas":{}},"f:whitelistIPRanges":{}},"f:logSet":{".":{},"f:managed":{".":{},"f:config":{},"f:nodeSelector":{".":{},"f:matrixone.cloud/cluster-pool":{},"f:matrixone.cloud/profile":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:storageClassName":{},"f:storageSize":{},"f:toleratedTaints":{}},"f:name":{},"f:profile":{},"f:replicas":{}},"f:managed":{".":{},"f:imageRepository":{},"f:localServiceRef":{".":{},"f:name":{}},"f:objectStorage":{".":{},"f:path":{},"f:region":{},"f:restored":{}}},"f:state":{},"f:unitName":{},"f:unitSelector":{},"f:version":{}},"f:state":{}},"manager":"Go-http-client","operation":"Update","time":"2024-03-15T05:26:57Z"},{"apiVersion":"core.matrixone-cloud/v1alpha1","fieldsType":"FieldsV1","fieldsV1":{"f:status":{".":{},"f:conditions":{},"f:endpoint":{},"f:phase":{}}},"manager":"Go-http-client","operation":"Update","subresource":"status","time":"2024-03-15T05:32:48Z"}],"name":"restore-freetier-02","resourceVersion":"96290930","uid":"958654b6-6428-4caa-b525-f346074db6df"},"spec":{"cnPools":[{"managed":{"config":"[cn.frontend]\nsaveQueryResult = \"on\"\nqueryResultTimeout = 72\nlengthOfQueryPrinted = 10000\ndisable-select-into = true\n[cn.txn]\nenable-leak-check = 1\nmax-active-ages = \"20m\"\n[observability]\nmetricUpdateStorageUsageInterval = \"15m\"\nenableStmtMerge = true\nenableMetricToProm = true\n","nodeSelector":{"matrixone.cloud/cluster-pool":"restore-freetier-02","matrixone.cloud/profile":"cn.standard"},"resources":{"limits":{"cpu":"7","memory":"13Gi"},"requests":{"cpu":"7","memory":"13Gi"}},"sharedStorageCache":{"memoryCacheSize":"1Gi"},"storageClassName":"alicloud-disk-essd-pl1","storageSize":"300Gi","toleratedTaints":["profile.matrixone.cloud/cn.standard","cluster-pool.matrixone.cloud/restore-freetier-02"]},"name":"pool","poolStrategy":{"scaleStrategy":{"maxIdle":2},"updateStrategy":{"reclaimTimeout":"24h0m0s"}},"profile":"cn.standard"},{"managed":{"config":"[cn.frontend]\nsaveQueryResult = \"on\"\nqueryResultTimeout = 72\nlengthOfQueryPrinted = 10000\ndisable-select-into = true\n[cn.txn]\nenable-leak-check = 1\nmax-active-ages = \"20m\"\n[observability]\nmetricUpdateStorageUsageInterval = \"15m\"\nenableStmtMerge = true\nenableMetricToProm = true\n","nodeSelector":{"matrixone.cloud/cluster-pool":"restore-freetier-02","matrixone.cloud/profile":"cn.tiny"},"resources":{"limits":{"cpu":"1","memory":"2Gi"},"requests":{"cpu":"1","memory":"2Gi"}},"sharedStorageCache":{"memoryCacheSize":"128Mi"},"storageClassName":"alicloud-disk-essd-pl1","storageSize":"300Gi","toleratedTaints":["profile.matrixone.cloud/cn.tiny","cluster-pool.matrixone.cloud/restore-freetier-02"]},"name":"limited","poolStrategy":{"scaleStrategy":{"maxIdle":0},"updateStrategy":{"reclaimTimeout":"24h0m0s"}},"profile":"cn.tiny"}],"cnSets":[{"managed":{"componentBackend":"Pod","config":"[cn]\ninit-work-state = \"Draining\"\n[cn.frontend]\nsaveQueryResult = \"on\"\nqueryResultTimeout = 72\nlengthOfQueryPrinted = 10000\ndisable-select-into = true\n[cn.txn]\nenable-leak-check = 1\nmax-active-ages = \"20m\"\n[observability]\nmetricUpdateStorageUsageInterval = \"15m\"\nenableStmtMerge = true\nenableMetricToProm = true\n","nodeSelector":{"matrixone.cloud/cluster-pool":"restore-freetier-02","matrixone.cloud/profile":"cn.standard"},"resources":{"limits":{"cpu":"7","memory":"13Gi"},"requests":{"cpu":"7","memory":"13Gi"}},"sharedStorageCache":{"memoryCacheSize":"1Gi"},"storageClassName":"alicloud-disk-essd-pl1","storageSize":"300Gi","toleratedTaints":["profile.matrixone.cloud/cn.standard","cluster-pool.matrixone.cloud/restore-freetier-02"]},"name":"default","profile":"cn.standard","replicas":2,"scalingConfig":{"maxReplicas":10,"minReplicas":2,"policy":"AutoScaling"}}],"dnSets":[{"managed":{"config":"[log]\nlevel = \"info\"\n","nodeSelector":{"matrixone.cloud/cluster-pool":"restore-freetier-02","matrixone.cloud/profile":"dn.standard"},"resources":{"limits":{"cpu":"15","memory":"29184Mi"},"requests":{"cpu":"15","memory":"29184Mi"}},"sharedStorageCache":{"memoryCacheSize":"5Gi"},"storageClassName":"alicloud-disk-essd-pl1","storageSize":"100Gi","toleratedTaints":["profile.matrixone.cloud/dn.standard","cluster-pool.matrixone.cloud/restore-freetier-02"]},"name":"default","profile":"dn.standard","replicas":1}],"endpoint":{"mode":"Dedicated","proxySpec":{"image":"registry.cn-shanghai.aliyuncs.com/matrixorigin/matrixone:nightly-e94ba155","managed":{"config":"[proxy.plugin]\ntimeout = \"3s\"\n","profile":"proxy.standard"},"pluginImage":"registry.cn-hangzhou.aliyuncs.com/ack-cos/plugin:49e2ffd8-20240201","replicas":2},"whitelistIPRanges":["0.0.0.0/0"]},"logSet":{"managed":{"config":"[log]\nlevel = \"info\"\n","nodeSelector":{"matrixone.cloud/cluster-pool":"restore-freetier-02","matrixone.cloud/profile":"log.standard"},"resources":{"limits":{"cpu":"3","memory":"6Gi"},"requests":{"cpu":"3","memory":"6Gi"}},"storageClassName":"alicloud-disk-essd-pl1","storageSize":"100Gi","toleratedTaints":["profile.matrixone.cloud/log.standard","cluster-pool.matrixone.cloud/restore-freetier-02"]},"name":"default","profile":"log.standard","replicas":3},"managed":{"imageRepository":"registry.cn-shanghai.aliyuncs.com/matrixorigin/matrixone","localServiceRef":{"name":"local-service"},"objectStorage":{"path":"moc-backup-test/restore-freetier-02-20240315021618","region":"cn-hangzhou","restored":true}},"state":"Active","unitName":"qa-unit-cn-hangzhou","unitSelector":{"matchLabels":{"matrixone.cloud/cloud":"aliyun","matrixone.cloud/region":"cn-hangzhou"}},"version":"nightly-e94ba155"},"state":{},"status":{"conditions":[{"lastTransitionTime":"2024-03-15T05:26:57Z","message":"Last error: reconcile error: cluster has unready set, wait all desired set ready, requeue after 5s","reason":"empty","status":"False","type":"Synced"}],"endpoint":{},"phase":"Creating"}}

DEBUG    src.tests.upgrade.test_mo_upgrade:test_mo_upgrade.py:219 wait for the conditions by '<lambda>' with args: ('restore-freetier-02',), {}
DEBUG    kubernetes.client.rest:rest.py:235 response body: {"apiVersion":"core.matrixone-cloud/v1alpha1","kind":"Cluster","metadata":{"annotations":{"matrixone.cloud/enable-aksk-authorize":"true"},"creationTimestamp":"2024-03-15T05:26:57Z","generation":1,"labels":{"matrixone.cloud/cordoned":"Y","matrixone.cloud/role":"root"},"managedFields":[{"apiVersion":"core.matrixone-cloud/v1alpha1","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:matrixone.cloud/enable-aksk-authorize":{}},"f:labels":{".":{},"f:matrixone.cloud/cordoned":{},"f:matrixone.cloud/role":{}}},"f:spec":{".":{},"f:cnPools":{".":{},"k:{\"name\":\"limited\"}":{".":{},"f:managed":{".":{},"f:config":{},"f:nodeSelector":{".":{},"f:matrixone.cloud/cluster-pool":{},"f:matrixone.cloud/profile":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:sharedStorageCache":{".":{},"f:memoryCacheSize":{}},"f:storageClassName":{},"f:storageSize":{},"f:toleratedTaints":{}},"f:name":{},"f:poolStrategy":{".":{},"f:scaleStrategy":{".":{},"f:maxIdle":{}},"f:updateStrategy":{".":{},"f:reclaimTimeout":{}}},"f:profile":{}},"k:{\"name\":\"pool\"}":{".":{},"f:managed":{".":{},"f:config":{},"f:nodeSelector":{".":{},"f:matrixone.cloud/cluster-pool":{},"f:matrixone.cloud/profile":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:sharedStorageCache":{".":{},"f:memoryCacheSize":{}},"f:storageClassName":{},"f:storageSize":{},"f:toleratedTaints":{}},"f:name":{},"f:poolStrategy":{".":{},"f:scaleStrategy":{".":{},"f:maxIdle":{}},"f:updateStrategy":{".":{},"f:reclaimTimeout":{}}},"f:profile":{}}},"f:cnSets":{".":{},"k:{\"name\":\"default\"}":{".":{},"f:managed":{".":{},"f:componentBackend":{},"f:config":{},"f:nodeSelector":{".":{},"f:matrixone.cloud/cluster-pool":{},"f:matrixone.cloud/profile":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:sharedStorageCache":{".":{},"f:memoryCacheSize":{}},"f:storageClassName":{},"f:storageSize":{},"f:toleratedTaints":{}},"f:name":{},"f:profile":{},"f:replicas":{},"f:scalingConfig":{".":{},"f:maxReplicas":{},"f:minReplicas":{},"f:policy":{}}}},"f:dnSets":{".":{},"k:{\"name\":\"default\"}":{".":{},"f:managed":{".":{},"f:config":{},"f:nodeSelector":{".":{},"f:matrixone.cloud/cluster-pool":{},"f:matrixone.cloud/profile":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:sharedStorageCache":{".":{},"f:memoryCacheSize":{}},"f:storageClassName":{},"f:storageSize":{},"f:toleratedTaints":{}},"f:name":{},"f:profile":{},"f:replicas":{}}},"f:endpoint":{".":{},"f:mode":{},"f:proxySpec":{".":{},"f:image":{},"f:managed":{".":{},"f:config":{},"f:profile":{}},"f:pluginImage":{},"f:replicas":{}},"f:whitelistIPRanges":{}},"f:logSet":{".":{},"f:managed":{".":{},"f:config":{},"f:nodeSelector":{".":{},"f:matrixone.cloud/cluster-pool":{},"f:matrixone.cloud/profile":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:storageClassName":{},"f:storageSize":{},"f:toleratedTaints":{}},"f:name":{},"f:profile":{},"f:replicas":{}},"f:managed":{".":{},"f:imageRepository":{},"f:localServiceRef":{".":{},"f:name":{}},"f:objectStorage":{".":{},"f:path":{},"f:region":{},"f:restored":{}}},"f:state":{},"f:unitName":{},"f:unitSelector":{},"f:version":{}},"f:state":{}},"manager":"Go-http-client","operation":"Update","time":"2024-03-15T05:26:57Z"},{"apiVersion":"core.matrixone-cloud/v1alpha1","fieldsType":"FieldsV1","fieldsV1":{"f:status":{".":{},"f:conditions":{},"f:endpoint":{},"f:phase":{}}},"manager":"Go-http-client","operation":"Update","subresource":"status","time":"2024-03-15T05:33:31Z"}],"name":"restore-freetier-02","resourceVersion":"96291675","uid":"958654b6-6428-4caa-b525-f346074db6df"},"spec":{"cnPools":[{"managed":{"config":"[cn.frontend]\nsaveQueryResult = \"on\"\nqueryResultTimeout = 72\nlengthOfQueryPrinted = 10000\ndisable-select-into = true\n[cn.txn]\nenable-leak-check = 1\nmax-active-ages = \"20m\"\n[observability]\nmetricUpdateStorageUsageInterval = \"15m\"\nenableStmtMerge = true\nenableMetricToProm = true\n","nodeSelector":{"matrixone.cloud/cluster-pool":"restore-freetier-02","matrixone.cloud/profile":"cn.standard"},"resources":{"limits":{"cpu":"7","memory":"13Gi"},"requests":{"cpu":"7","memory":"13Gi"}},"sharedStorageCache":{"memoryCacheSize":"1Gi"},"storageClassName":"alicloud-disk-essd-pl1","storageSize":"300Gi","toleratedTaints":["profile.matrixone.cloud/cn.standard","cluster-pool.matrixone.cloud/restore-freetier-02"]},"name":"pool","poolStrategy":{"scaleStrategy":{"maxIdle":2},"updateStrategy":{"reclaimTimeout":"24h0m0s"}},"profile":"cn.standard"},{"managed":{"config":"[cn.frontend]\nsaveQueryResult = \"on\"\nqueryResultTimeout = 72\nlengthOfQueryPrinted = 10000\ndisable-select-into = true\n[cn.txn]\nenable-leak-check = 1\nmax-active-ages = \"20m\"\n[observability]\nmetricUpdateStorageUsageInterval = \"15m\"\nenableStmtMerge = true\nenableMetricToProm = true\n","nodeSelector":{"matrixone.cloud/cluster-pool":"restore-freetier-02","matrixone.cloud/profile":"cn.tiny"},"resources":{"limits":{"cpu":"1","memory":"2Gi"},"requests":{"cpu":"1","memory":"2Gi"}},"sharedStorageCache":{"memoryCacheSize":"128Mi"},"storageClassName":"alicloud-disk-essd-pl1","storageSize":"300Gi","toleratedTaints":["profile.matrixone.cloud/cn.tiny","cluster-pool.matrixone.cloud/restore-freetier-02"]},"name":"limited","poolStrategy":{"scaleStrategy":{"maxIdle":0},"updateStrategy":{"reclaimTimeout":"24h0m0s"}},"profile":"cn.tiny"}],"cnSets":[{"managed":{"componentBackend":"Pod","config":"[cn]\ninit-work-state = \"Draining\"\n[cn.frontend]\nsaveQueryResult = \"on\"\nqueryResultTimeout = 72\nlengthOfQueryPrinted = 10000\ndisable-select-into = true\n[cn.txn]\nenable-leak-check = 1\nmax-active-ages = \"20m\"\n[observability]\nmetricUpdateStorageUsageInterval = \"15m\"\nenableStmtMerge = true\nenableMetricToProm = true\n","nodeSelector":{"matrixone.cloud/cluster-pool":"restore-freetier-02","matrixone.cloud/profile":"cn.standard"},"resources":{"limits":{"cpu":"7","memory":"13Gi"},"requests":{"cpu":"7","memory":"13Gi"}},"sharedStorageCache":{"memoryCacheSize":"1Gi"},"storageClassName":"alicloud-disk-essd-pl1","storageSize":"300Gi","toleratedTaints":["profile.matrixone.cloud/cn.standard","cluster-pool.matrixone.cloud/restore-freetier-02"]},"name":"default","profile":"cn.standard","replicas":2,"scalingConfig":{"maxReplicas":10,"minReplicas":2,"policy":"AutoScaling"}}],"dnSets":[{"managed":{"config":"[log]\nlevel = \"info\"\n","nodeSelector":{"matrixone.cloud/cluster-pool":"restore-freetier-02","matrixone.cloud/profile":"dn.standard"},"resources":{"limits":{"cpu":"15","memory":"29184Mi"},"requests":{"cpu":"15","memory":"29184Mi"}},"sharedStorageCache":{"memoryCacheSize":"5Gi"},"storageClassName":"alicloud-disk-essd-pl1","storageSize":"100Gi","toleratedTaints":["profile.matrixone.cloud/dn.standard","cluster-pool.matrixone.cloud/restore-freetier-02"]},"name":"default","profile":"dn.standard","replicas":1}],"endpoint":{"mode":"Dedicated","proxySpec":{"image":"registry.cn-shanghai.aliyuncs.com/matrixorigin/matrixone:nightly-e94ba155","managed":{"config":"[proxy.plugin]\ntimeout = \"3s\"\n","profile":"proxy.standard"},"pluginImage":"registry.cn-hangzhou.aliyuncs.com/ack-cos/plugin:49e2ffd8-20240201","replicas":2},"whitelistIPRanges":["0.0.0.0/0"]},"logSet":{"managed":{"config":"[log]\nlevel = \"info\"\n","nodeSelector":{"matrixone.cloud/cluster-pool":"restore-freetier-02","matrixone.cloud/profile":"log.standard"},"resources":{"limits":{"cpu":"3","memory":"6Gi"},"requests":{"cpu":"3","memory":"6Gi"}},"storageClassName":"alicloud-disk-essd-pl1","storageSize":"100Gi","toleratedTaints":["profile.matrixone.cloud/log.standard","cluster-pool.matrixone.cloud/restore-freetier-02"]},"name":"default","profile":"log.standard","replicas":3},"managed":{"imageRepository":"registry.cn-shanghai.aliyuncs.com/matrixorigin/matrixone","localServiceRef":{"name":"local-service"},"objectStorage":{"path":"moc-backup-test/restore-freetier-02-20240315021618","region":"cn-hangzhou","restored":true}},"state":"Active","unitName":"qa-unit-cn-hangzhou","unitSelector":{"matchLabels":{"matrixone.cloud/cloud":"aliyun","matrixone.cloud/region":"cn-hangzhou"}},"version":"nightly-e94ba155"},"state":{},"status":{"conditions":[{"lastTransitionTime":"2024-03-15T05:26:57Z","message":"the object is reconciling","reason":"empty","status":"False","type":"Synced"}],"endpoint":{},"phase":"Creating"}}

DEBUG    src.tests.upgrade.test_mo_upgrade:test_mo_upgrade.py:219 wait for the conditions by '<lambda>' with args: ('restore-freetier-02',), {}
DEBUG    kubernetes.client.rest:rest.py:235 response body: {"apiVersion":"core.matrixone-cloud/v1alpha1","kind":"Cluster","metadata":{"annotations":{"matrixone.cloud/enable-aksk-authorize":"true"},"creationTimestamp":"2024-03-15T05:26:57Z","generation":1,"labels":{"matrixone.cloud/cordoned":"Y","matrixone.cloud/role":"root"},"managedFields":[{"apiVersion":"core.matrixone-cloud/v1alpha1","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:matrixone.cloud/enable-aksk-authorize":{}},"f:labels":{".":{},"f:matrixone.cloud/cordoned":{},"f:matrixone.cloud/role":{}}},"f:spec":{".":{},"f:cnPools":{".":{},"k:{\"name\":\"limited\"}":{".":{},"f:managed":{".":{},"f:config":{},"f:nodeSelector":{".":{},"f:matrixone.cloud/cluster-pool":{},"f:matrixone.cloud/profile":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:sharedStorageCache":{".":{},"f:memoryCacheSize":{}},"f:storageClassName":{},"f:storageSize":{},"f:toleratedTaints":{}},"f:name":{},"f:poolStrategy":{".":{},"f:scaleStrategy":{".":{},"f:maxIdle":{}},"f:updateStrategy":{".":{},"f:reclaimTimeout":{}}},"f:profile":{}},"k:{\"name\":\"pool\"}":{".":{},"f:managed":{".":{},"f:config":{},"f:nodeSelector":{".":{},"f:matrixone.cloud/cluster-pool":{},"f:matrixone.cloud/profile":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:sharedStorageCache":{".":{},"f:memoryCacheSize":{}},"f:storageClassName":{},"f:storageSize":{},"f:toleratedTaints":{}},"f:name":{},"f:poolStrategy":{".":{},"f:scaleStrategy":{".":{},"f:maxIdle":{}},"f:updateStrategy":{".":{},"f:reclaimTimeout":{}}},"f:profile":{}}},"f:cnSets":{".":{},"k:{\"name\":\"default\"}":{".":{},"f:managed":{".":{},"f:componentBackend":{},"f:config":{},"f:nodeSelector":{".":{},"f:matrixone.cloud/cluster-pool":{},"f:matrixone.cloud/profile":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:sharedStorageCache":{".":{},"f:memoryCacheSize":{}},"f:storageClassName":{},"f:storageSize":{},"f:toleratedTaints":{}},"f:name":{},"f:profile":{},"f:replicas":{},"f:scalingConfig":{".":{},"f:maxReplicas":{},"f:minReplicas":{},"f:policy":{}}}},"f:dnSets":{".":{},"k:{\"name\":\"default\"}":{".":{},"f:managed":{".":{},"f:config":{},"f:nodeSelector":{".":{},"f:matrixone.cloud/cluster-pool":{},"f:matrixone.cloud/profile":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:sharedStorageCache":{".":{},"f:memoryCacheSize":{}},"f:storageClassName":{},"f:storageSize":{},"f:toleratedTaints":{}},"f:name":{},"f:profile":{},"f:replicas":{}}},"f:endpoint":{".":{},"f:mode":{},"f:proxySpec":{".":{},"f:image":{},"f:managed":{".":{},"f:config":{},"f:profile":{}},"f:pluginImage":{},"f:replicas":{}},"f:whitelistIPRanges":{}},"f:logSet":{".":{},"f:managed":{".":{},"f:config":{},"f:nodeSelector":{".":{},"f:matrixone.cloud/cluster-pool":{},"f:matrixone.cloud/profile":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:storageClassName":{},"f:storageSize":{},"f:toleratedTaints":{}},"f:name":{},"f:profile":{},"f:replicas":{}},"f:managed":{".":{},"f:imageRepository":{},"f:localServiceRef":{".":{},"f:name":{}},"f:objectStorage":{".":{},"f:path":{},"f:region":{},"f:restored":{}}},"f:state":{},"f:unitName":{},"f:unitSelector":{},"f:version":{}},"f:state":{}},"manager":"Go-http-client","operation":"Update","time":"2024-03-15T05:26:57Z"},{"apiVersion":"core.matrixone-cloud/v1alpha1","fieldsType":"FieldsV1","fieldsV1":{"f:status":{".":{},"f:conditions":{},"f:endpoint":{},"f:phase":{}}},"manager":"Go-http-client","operation":"Update","subresource":"status","time":"2024-03-15T05:33:57Z"}],"name":"restore-freetier-02","resourceVersion":"96292049","uid":"958654b6-6428-4caa-b525-f346074db6df"},"spec":{"cnPools":[{"managed":{"config":"[cn.frontend]\nsaveQueryResult = \"on\"\nqueryResultTimeout = 72\nlengthOfQueryPrinted = 10000\ndisable-select-into = true\n[cn.txn]\nenable-leak-check = 1\nmax-active-ages = \"20m\"\n[observability]\nmetricUpdateStorageUsageInterval = \"15m\"\nenableStmtMerge = true\nenableMetricToProm = true\n","nodeSelector":{"matrixone.cloud/cluster-pool":"restore-freetier-02","matrixone.cloud/profile":"cn.standard"},"resources":{"limits":{"cpu":"7","memory":"13Gi"},"requests":{"cpu":"7","memory":"13Gi"}},"sharedStorageCache":{"memoryCacheSize":"1Gi"},"storageClassName":"alicloud-disk-essd-pl1","storageSize":"300Gi","toleratedTaints":["profile.matrixone.cloud/cn.standard","cluster-pool.matrixone.cloud/restore-freetier-02"]},"name":"pool","poolStrategy":{"scaleStrategy":{"maxIdle":2},"updateStrategy":{"reclaimTimeout":"24h0m0s"}},"profile":"cn.standard"},{"managed":{"config":"[cn.frontend]\nsaveQueryResult = \"on\"\nqueryResultTimeout = 72\nlengthOfQueryPrinted = 10000\ndisable-select-into = true\n[cn.txn]\nenable-leak-check = 1\nmax-active-ages = \"20m\"\n[observability]\nmetricUpdateStorageUsageInterval = \"15m\"\nenableStmtMerge = true\nenableMetricToProm = true\n","nodeSelector":{"matrixone.cloud/cluster-pool":"restore-freetier-02","matrixone.cloud/profile":"cn.tiny"},"resources":{"limits":{"cpu":"1","memory":"2Gi"},"requests":{"cpu":"1","memory":"2Gi"}},"sharedStorageCache":{"memoryCacheSize":"128Mi"},"storageClassName":"alicloud-disk-essd-pl1","storageSize":"300Gi","toleratedTaints":["profile.matrixone.cloud/cn.tiny","cluster-pool.matrixone.cloud/restore-freetier-02"]},"name":"limited","poolStrategy":{"scaleStrategy":{"maxIdle":0},"updateStrategy":{"reclaimTimeout":"24h0m0s"}},"profile":"cn.tiny"}],"cnSets":[{"managed":{"componentBackend":"Pod","config":"[cn]\ninit-work-state = \"Draining\"\n[cn.frontend]\nsaveQueryResult = \"on\"\nqueryResultTimeout = 72\nlengthOfQueryPrinted = 10000\ndisable-select-into = true\n[cn.txn]\nenable-leak-check = 1\nmax-active-ages = \"20m\"\n[observability]\nmetricUpdateStorageUsageInterval = \"15m\"\nenableStmtMerge = true\nenableMetricToProm = true\n","nodeSelector":{"matrixone.cloud/cluster-pool":"restore-freetier-02","matrixone.cloud/profile":"cn.standard"},"resources":{"limits":{"cpu":"7","memory":"13Gi"},"requests":{"cpu":"7","memory":"13Gi"}},"sharedStorageCache":{"memoryCacheSize":"1Gi"},"storageClassName":"alicloud-disk-essd-pl1","storageSize":"300Gi","toleratedTaints":["profile.matrixone.cloud/cn.standard","cluster-pool.matrixone.cloud/restore-freetier-02"]},"name":"default","profile":"cn.standard","replicas":2,"scalingConfig":{"maxReplicas":10,"minReplicas":2,"policy":"AutoScaling"}}],"dnSets":[{"managed":{"config":"[log]\nlevel = \"info\"\n","nodeSelector":{"matrixone.cloud/cluster-pool":"restore-freetier-02","matrixone.cloud/profile":"dn.standard"},"resources":{"limits":{"cpu":"15","memory":"29184Mi"},"requests":{"cpu":"15","memory":"29184Mi"}},"sharedStorageCache":{"memoryCacheSize":"5Gi"},"storageClassName":"alicloud-disk-essd-pl1","storageSize":"100Gi","toleratedTaints":["profile.matrixone.cloud/dn.standard","cluster-pool.matrixone.cloud/restore-freetier-02"]},"name":"default","profile":"dn.standard","replicas":1}],"endpoint":{"mode":"Dedicated","proxySpec":{"image":"registry.cn-shanghai.aliyuncs.com/matrixorigin/matrixone:nightly-e94ba155","managed":{"config":"[proxy.plugin]\ntimeout = \"3s\"\n","profile":"proxy.standard"},"pluginImage":"registry.cn-hangzhou.aliyuncs.com/ack-cos/plugin:49e2ffd8-20240201","replicas":2},"whitelistIPRanges":["0.0.0.0/0"]},"logSet":{"managed":{"config":"[log]\nlevel = \"info\"\n","nodeSelector":{"matrixone.cloud/cluster-pool":"restore-freetier-02","matrixone.cloud/profile":"log.standard"},"resources":{"limits":{"cpu":"3","memory":"6Gi"},"requests":{"cpu":"3","memory":"6Gi"}},"storageClassName":"alicloud-disk-essd-pl1","storageSize":"100Gi","toleratedTaints":["profile.matrixone.cloud/log.standard","cluster-pool.matrixone.cloud/restore-freetier-02"]},"name":"default","profile":"log.standard","replicas":3},"managed":{"imageRepository":"registry.cn-shanghai.aliyuncs.com/matrixorigin/matrixone","localServiceRef":{"name":"local-service"},"objectStorage":{"path":"moc-backup-test/restore-freetier-02-20240315021618","region":"cn-hangzhou","restored":true}},"state":"Active","unitName":"qa-unit-cn-hangzhou","unitSelector":{"matchLabels":{"matrixone.cloud/cloud":"aliyun","matrixone.cloud/region":"cn-hangzhou"}},"version":"nightly-e94ba155"},"state":{},"status":{"conditions":[{"lastTransitionTime":"2024-03-15T05:26:57Z","message":"Last error: reconcile error: cluster has unready set, wait all desired set ready, requeue after 5s","reason":"empty","status":"False","type":"Synced"}],"endpoint":{},"phase":"Creating"}}

DEBUG    src.tests.upgrade.test_mo_upgrade:test_mo_upgrade.py:219 wait for the conditions by '<lambda>' with args: ('restore-freetier-02',), {}
DEBUG    kubernetes.client.rest:rest.py:235 response body: {"apiVersion":"core.matrixone-cloud/v1alpha1","kind":"Cluster","metadata":{"annotations":{"matrixone.cloud/enable-aksk-authorize":"true"},"creationTimestamp":"2024-03-15T05:26:57Z","generation":1,"labels":{"matrixone.cloud/cordoned":"Y","matrixone.cloud/role":"root"},"managedFields":[{"apiVersion":"core.matrixone-cloud/v1alpha1","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:matrixone.cloud/enable-aksk-authorize":{}},"f:labels":{".":{},"f:matrixone.cloud/cordoned":{},"f:matrixone.cloud/role":{}}},"f:spec":{".":{},"f:cnPools":{".":{},"k:{\"name\":\"limited\"}":{".":{},"f:managed":{".":{},"f:config":{},"f:nodeSelector":{".":{},"f:matrixone.cloud/cluster-pool":{},"f:matrixone.cloud/profile":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:sharedStorageCache":{".":{},"f:memoryCacheSize":{}},"f:storageClassName":{},"f:storageSize":{},"f:toleratedTaints":{}},"f:name":{},"f:poolStrategy":{".":{},"f:scaleStrategy":{".":{},"f:maxIdle":{}},"f:updateStrategy":{".":{},"f:reclaimTimeout":{}}},"f:profile":{}},"k:{\"name\":\"pool\"}":{".":{},"f:managed":{".":{},"f:config":{},"f:nodeSelector":{".":{},"f:matrixone.cloud/cluster-pool":{},"f:matrixone.cloud/profile":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:sharedStorageCache":{".":{},"f:memoryCacheSize":{}},"f:storageClassName":{},"f:storageSize":{},"f:toleratedTaints":{}},"f:name":{},"f:poolStrategy":{".":{},"f:scaleStrategy":{".":{},"f:maxIdle":{}},"f:updateStrategy":{".":{},"f:reclaimTimeout":{}}},"f:profile":{}}},"f:cnSets":{".":{},"k:{\"name\":\"default\"}":{".":{},"f:managed":{".":{},"f:componentBackend":{},"f:config":{},"f:nodeSelector":{".":{},"f:matrixone.cloud/cluster-pool":{},"f:matrixone.cloud/profile":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:sharedStorageCache":{".":{},"f:memoryCacheSize":{}},"f:storageClassName":{},"f:storageSize":{},"f:toleratedTaints":{}},"f:name":{},"f:profile":{},"f:replicas":{},"f:scalingConfig":{".":{},"f:maxReplicas":{},"f:minReplicas":{},"f:policy":{}}}},"f:dnSets":{".":{},"k:{\"name\":\"default\"}":{".":{},"f:managed":{".":{},"f:config":{},"f:nodeSelector":{".":{},"f:matrixone.cloud/cluster-pool":{},"f:matrixone.cloud/profile":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:sharedStorageCache":{".":{},"f:memoryCacheSize":{}},"f:storageClassName":{},"f:storageSize":{},"f:toleratedTaints":{}},"f:name":{},"f:profile":{},"f:replicas":{}}},"f:endpoint":{".":{},"f:mode":{},"f:proxySpec":{".":{},"f:image":{},"f:managed":{".":{},"f:config":{},"f:profile":{}},"f:pluginImage":{},"f:replicas":{}},"f:whitelistIPRanges":{}},"f:logSet":{".":{},"f:managed":{".":{},"f:config":{},"f:nodeSelector":{".":{},"f:matrixone.cloud/cluster-pool":{},"f:matrixone.cloud/profile":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:storageClassName":{},"f:storageSize":{},"f:toleratedTaints":{}},"f:name":{},"f:profile":{},"f:replicas":{}},"f:managed":{".":{},"f:imageRepository":{},"f:localServiceRef":{".":{},"f:name":{}},"f:objectStorage":{".":{},"f:path":{},"f:region":{},"f:restored":{}}},"f:state":{},"f:unitName":{},"f:unitSelector":{},"f:version":{}},"f:state":{}},"manager":"Go-http-client","operation":"Update","time":"2024-03-15T05:26:57Z"},{"apiVersion":"core.matrixone-cloud/v1alpha1","fieldsType":"FieldsV1","fieldsV1":{"f:status":{".":{},"f:conditions":{},"f:endpoint":{},"f:phase":{}}},"manager":"Go-http-client","operation":"Update","subresource":"status","time":"2024-03-15T05:34:23Z"}],"name":"restore-freetier-02","resourceVersion":"96292414","uid":"958654b6-6428-4caa-b525-f346074db6df"},"spec":{"cnPools":[{"managed":{"config":"[cn.frontend]\nsaveQueryResult = \"on\"\nqueryResultTimeout = 72\nlengthOfQueryPrinted = 10000\ndisable-select-into = true\n[cn.txn]\nenable-leak-check = 1\nmax-active-ages = \"20m\"\n[observability]\nmetricUpdateStorageUsageInterval = \"15m\"\nenableStmtMerge = true\nenableMetricToProm = true\n","nodeSelector":{"matrixone.cloud/cluster-pool":"restore-freetier-02","matrixone.cloud/profile":"cn.standard"},"resources":{"limits":{"cpu":"7","memory":"13Gi"},"requests":{"cpu":"7","memory":"13Gi"}},"sharedStorageCache":{"memoryCacheSize":"1Gi"},"storageClassName":"alicloud-disk-essd-pl1","storageSize":"300Gi","toleratedTaints":["profile.matrixone.cloud/cn.standard","cluster-pool.matrixone.cloud/restore-freetier-02"]},"name":"pool","poolStrategy":{"scaleStrategy":{"maxIdle":2},"updateStrategy":{"reclaimTimeout":"24h0m0s"}},"profile":"cn.standard"},{"managed":{"config":"[cn.frontend]\nsaveQueryResult = \"on\"\nqueryResultTimeout = 72\nlengthOfQueryPrinted = 10000\ndisable-select-into = true\n[cn.txn]\nenable-leak-check = 1\nmax-active-ages = \"20m\"\n[observability]\nmetricUpdateStorageUsageInterval = \"15m\"\nenableStmtMerge = true\nenableMetricToProm = true\n","nodeSelector":{"matrixone.cloud/cluster-pool":"restore-freetier-02","matrixone.cloud/profile":"cn.tiny"},"resources":{"limits":{"cpu":"1","memory":"2Gi"},"requests":{"cpu":"1","memory":"2Gi"}},"sharedStorageCache":{"memoryCacheSize":"128Mi"},"storageClassName":"alicloud-disk-essd-pl1","storageSize":"300Gi","toleratedTaints":["profile.matrixone.cloud/cn.tiny","cluster-pool.matrixone.cloud/restore-freetier-02"]},"name":"limited","poolStrategy":{"scaleStrategy":{"maxIdle":0},"updateStrategy":{"reclaimTimeout":"24h0m0s"}},"profile":"cn.tiny"}],"cnSets":[{"managed":{"componentBackend":"Pod","config":"[cn]\ninit-work-state = \"Draining\"\n[cn.frontend]\nsaveQueryResult = \"on\"\nqueryResultTimeout = 72\nlengthOfQueryPrinted = 10000\ndisable-select-into = true\n[cn.txn]\nenable-leak-check = 1\nmax-active-ages = \"20m\"\n[observability]\nmetricUpdateStorageUsageInterval = \"15m\"\nenableStmtMerge = true\nenableMetricToProm = true\n","nodeSelector":{"matrixone.cloud/cluster-pool":"restore-freetier-02","matrixone.cloud/profile":"cn.standard"},"resources":{"limits":{"cpu":"7","memory":"13Gi"},"requests":{"cpu":"7","memory":"13Gi"}},"sharedStorageCache":{"memoryCacheSize":"1Gi"},"storageClassName":"alicloud-disk-essd-pl1","storageSize":"300Gi","toleratedTaints":["profile.matrixone.cloud/cn.standard","cluster-pool.matrixone.cloud/restore-freetier-02"]},"name":"default","profile":"cn.standard","replicas":2,"scalingConfig":{"maxReplicas":10,"minReplicas":2,"policy":"AutoScaling"}}],"dnSets":[{"managed":{"config":"[log]\nlevel = \"info\"\n","nodeSelector":{"matrixone.cloud/cluster-pool":"restore-freetier-02","matrixone.cloud/profile":"dn.standard"},"resources":{"limits":{"cpu":"15","memory":"29184Mi"},"requests":{"cpu":"15","memory":"29184Mi"}},"sharedStorageCache":{"memoryCacheSize":"5Gi"},"storageClassName":"alicloud-disk-essd-pl1","storageSize":"100Gi","toleratedTaints":["profile.matrixone.cloud/dn.standard","cluster-pool.matrixone.cloud/restore-freetier-02"]},"name":"default","profile":"dn.standard","replicas":1}],"endpoint":{"mode":"Dedicated","proxySpec":{"image":"registry.cn-shanghai.aliyuncs.com/matrixorigin/matrixone:nightly-e94ba155","managed":{"config":"[proxy.plugin]\ntimeout = \"3s\"\n","profile":"proxy.standard"},"pluginImage":"registry.cn-hangzhou.aliyuncs.com/ack-cos/plugin:49e2ffd8-20240201","replicas":2},"whitelistIPRanges":["0.0.0.0/0"]},"logSet":{"managed":{"config":"[log]\nlevel = \"info\"\n","nodeSelector":{"matrixone.cloud/cluster-pool":"restore-freetier-02","matrixone.cloud/profile":"log.standard"},"resources":{"limits":{"cpu":"3","memory":"6Gi"},"requests":{"cpu":"3","memory":"6Gi"}},"storageClassName":"alicloud-disk-essd-pl1","storageSize":"100Gi","toleratedTaints":["profile.matrixone.cloud/log.standard","cluster-pool.matrixone.cloud/restore-freetier-02"]},"name":"default","profile":"log.standard","replicas":3},"managed":{"imageRepository":"registry.cn-shanghai.aliyuncs.com/matrixorigin/matrixone","localServiceRef":{"name":"local-service"},"objectStorage":{"path":"moc-backup-test/restore-freetier-02-20240315021618","region":"cn-hangzhou","restored":true}},"state":"Active","unitName":"qa-unit-cn-hangzhou","unitSelector":{"matchLabels":{"matrixone.cloud/cloud":"aliyun","matrixone.cloud/region":"cn-hangzhou"}},"version":"nightly-e94ba155"},"state":{},"status":{"conditions":[{"lastTransitionTime":"2024-03-15T05:26:57Z","message":"Last error: reconcile error: cluster has unready set, wait all desired set ready, requeue after 5s","reason":"empty","status":"False","type":"Synced"}],"endpoint":{},"phase":"Creating"}}

DEBUG    src.tests.upgrade.test_mo_upgrade:test_mo_upgrade.py:219 wait for the conditions by '<lambda>' with args: ('restore-freetier-02',), {}
DEBUG    kubernetes.client.rest:rest.py:235 response body: {"apiVersion":"core.matrixone-cloud/v1alpha1","kind":"Cluster","metadata":{"annotations":{"matrixone.cloud/enable-aksk-authorize":"true"},"creationTimestamp":"2024-03-15T05:26:57Z","generation":1,"labels":{"matrixone.cloud/cordoned":"Y","matrixone.cloud/role":"root"},"managedFields":[{"apiVersion":"core.matrixone-cloud/v1alpha1","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:matrixone.cloud/enable-aksk-authorize":{}},"f:labels":{".":{},"f:matrixone.cloud/cordoned":{},"f:matrixone.cloud/role":{}}},"f:spec":{".":{},"f:cnPools":{".":{},"k:{\"name\":\"limited\"}":{".":{},"f:managed":{".":{},"f:config":{},"f:nodeSelector":{".":{},"f:matrixone.cloud/cluster-pool":{},"f:matrixone.cloud/profile":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:sharedStorageCache":{".":{},"f:memoryCacheSize":{}},"f:storageClassName":{},"f:storageSize":{},"f:toleratedTaints":{}},"f:name":{},"f:poolStrategy":{".":{},"f:scaleStrategy":{".":{},"f:maxIdle":{}},"f:updateStrategy":{".":{},"f:reclaimTimeout":{}}},"f:profile":{}},"k:{\"name\":\"pool\"}":{".":{},"f:managed":{".":{},"f:config":{},"f:nodeSelector":{".":{},"f:matrixone.cloud/cluster-pool":{},"f:matrixone.cloud/profile":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:sharedStorageCache":{".":{},"f:memoryCacheSize":{}},"f:storageClassName":{},"f:storageSize":{},"f:toleratedTaints":{}},"f:name":{},"f:poolStrategy":{".":{},"f:scaleStrategy":{".":{},"f:maxIdle":{}},"f:updateStrategy":{".":{},"f:reclaimTimeout":{}}},"f:profile":{}}},"f:cnSets":{".":{},"k:{\"name\":\"default\"}":{".":{},"f:managed":{".":{},"f:componentBackend":{},"f:config":{},"f:nodeSelector":{".":{},"f:matrixone.cloud/cluster-pool":{},"f:matrixone.cloud/profile":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:sharedStorageCache":{".":{},"f:memoryCacheSize":{}},"f:storageClassName":{},"f:storageSize":{},"f:toleratedTaints":{}},"f:name":{},"f:profile":{},"f:replicas":{},"f:scalingConfig":{".":{},"f:maxReplicas":{},"f:minReplicas":{},"f:policy":{}}}},"f:dnSets":{".":{},"k:{\"name\":\"default\"}":{".":{},"f:managed":{".":{},"f:config":{},"f:nodeSelector":{".":{},"f:matrixone.cloud/cluster-pool":{},"f:matrixone.cloud/profile":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:sharedStorageCache":{".":{},"f:memoryCacheSize":{}},"f:storageClassName":{},"f:storageSize":{},"f:toleratedTaints":{}},"f:name":{},"f:profile":{},"f:replicas":{}}},"f:endpoint":{".":{},"f:mode":{},"f:proxySpec":{".":{},"f:image":{},"f:managed":{".":{},"f:config":{},"f:profile":{}},"f:pluginImage":{},"f:replicas":{}},"f:whitelistIPRanges":{}},"f:logSet":{".":{},"f:managed":{".":{},"f:config":{},"f:nodeSelector":{".":{},"f:matrixone.cloud/cluster-pool":{},"f:matrixone.cloud/profile":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:storageClassName":{},"f:storageSize":{},"f:toleratedTaints":{}},"f:name":{},"f:profile":{},"f:replicas":{}},"f:managed":{".":{},"f:imageRepository":{},"f:localServiceRef":{".":{},"f:name":{}},"f:objectStorage":{".":{},"f:path":{},"f:region":{},"f:restored":{}}},"f:state":{},"f:unitName":{},"f:unitSelector":{},"f:version":{}},"f:state":{}},"manager":"Go-http-client","operation":"Update","time":"2024-03-15T05:26:57Z"},{"apiVersion":"core.matrixone-cloud/v1alpha1","fieldsType":"FieldsV1","fieldsV1":{"f:status":{".":{},"f:conditions":{},"f:endpoint":{},"f:phase":{}}},"manager":"Go-http-client","operation":"Update","subresource":"status","time":"2024-03-15T05:34:54Z"}],"name":"restore-freetier-02","resourceVersion":"96292806","uid":"958654b6-6428-4caa-b525-f346074db6df"},"spec":{"cnPools":[{"managed":{"config":"[cn.frontend]\nsaveQueryResult = \"on\"\nqueryResultTimeout = 72\nlengthOfQueryPrinted = 10000\ndisable-select-into = true\n[cn.txn]\nenable-leak-check = 1\nmax-active-ages = \"20m\"\n[observability]\nmetricUpdateStorageUsageInterval = \"15m\"\nenableStmtMerge = true\nenableMetricToProm = true\n","nodeSelector":{"matrixone.cloud/cluster-pool":"restore-freetier-02","matrixone.cloud/profile":"cn.standard"},"resources":{"limits":{"cpu":"7","memory":"13Gi"},"requests":{"cpu":"7","memory":"13Gi"}},"sharedStorageCache":{"memoryCacheSize":"1Gi"},"storageClassName":"alicloud-disk-essd-pl1","storageSize":"300Gi","toleratedTaints":["profile.matrixone.cloud/cn.standard","cluster-pool.matrixone.cloud/restore-freetier-02"]},"name":"pool","poolStrategy":{"scaleStrategy":{"maxIdle":2},"updateStrategy":{"reclaimTimeout":"24h0m0s"}},"profile":"cn.standard"},{"managed":{"config":"[cn.frontend]\nsaveQueryResult = \"on\"\nqueryResultTimeout = 72\nlengthOfQueryPrinted = 10000\ndisable-select-into = true\n[cn.txn]\nenable-leak-check = 1\nmax-active-ages = \"20m\"\n[observability]\nmetricUpdateStorageUsageInterval = \"15m\"\nenableStmtMerge = true\nenableMetricToProm = true\n","nodeSelector":{"matrixone.cloud/cluster-pool":"restore-freetier-02","matrixone.cloud/profile":"cn.tiny"},"resources":{"limits":{"cpu":"1","memory":"2Gi"},"requests":{"cpu":"1","memory":"2Gi"}},"sharedStorageCache":{"memoryCacheSize":"128Mi"},"storageClassName":"alicloud-disk-essd-pl1","storageSize":"300Gi","toleratedTaints":["profile.matrixone.cloud/cn.tiny","cluster-pool.matrixone.cloud/restore-freetier-02"]},"name":"limited","poolStrategy":{"scaleStrategy":{"maxIdle":0},"updateStrategy":{"reclaimTimeout":"24h0m0s"}},"profile":"cn.tiny"}],"cnSets":[{"managed":{"componentBackend":"Pod","config":"[cn]\ninit-work-state = \"Draining\"\n[cn.frontend]\nsaveQueryResult = \"on\"\nqueryResultTimeout = 72\nlengthOfQueryPrinted = 10000\ndisable-select-into = true\n[cn.txn]\nenable-leak-check = 1\nmax-active-ages = \"20m\"\n[observability]\nmetricUpdateStorageUsageInterval = \"15m\"\nenableStmtMerge = true\nenableMetricToProm = true\n","nodeSelector":{"matrixone.cloud/cluster-pool":"restore-freetier-02","matrixone.cloud/profile":"cn.standard"},"resources":{"limits":{"cpu":"7","memory":"13Gi"},"requests":{"cpu":"7","memory":"13Gi"}},"sharedStorageCache":{"memoryCacheSize":"1Gi"},"storageClassName":"alicloud-disk-essd-pl1","storageSize":"300Gi","toleratedTaints":["profile.matrixone.cloud/cn.standard","cluster-pool.matrixone.cloud/restore-freetier-02"]},"name":"default","profile":"cn.standard","replicas":2,"scalingConfig":{"maxReplicas":10,"minReplicas":2,"policy":"AutoScaling"}}],"dnSets":[{"managed":{"config":"[log]\nlevel = \"info\"\n","nodeSelector":{"matrixone.cloud/cluster-pool":"restore-freetier-02","matrixone.cloud/profile":"dn.standard"},"resources":{"limits":{"cpu":"15","memory":"29184Mi"},"requests":{"cpu":"15","memory":"29184Mi"}},"sharedStorageCache":{"memoryCacheSize":"5Gi"},"storageClassName":"alicloud-disk-essd-pl1","storageSize":"100Gi","toleratedTaints":["profile.matrixone.cloud/dn.standard","cluster-pool.matrixone.cloud/restore-freetier-02"]},"name":"default","profile":"dn.standard","replicas":1}],"endpoint":{"mode":"Dedicated","proxySpec":{"image":"registry.cn-shanghai.aliyuncs.com/matrixorigin/matrixone:nightly-e94ba155","managed":{"config":"[proxy.plugin]\ntimeout = \"3s\"\n","profile":"proxy.standard"},"pluginImage":"registry.cn-hangzhou.aliyuncs.com/ack-cos/plugin:49e2ffd8-20240201","replicas":2},"whitelistIPRanges":["0.0.0.0/0"]},"logSet":{"managed":{"config":"[log]\nlevel = \"info\"\n","nodeSelector":{"matrixone.cloud/cluster-pool":"restore-freetier-02","matrixone.cloud/profile":"log.standard"},"resources":{"limits":{"cpu":"3","memory":"6Gi"},"requests":{"cpu":"3","memory":"6Gi"}},"storageClassName":"alicloud-disk-essd-pl1","storageSize":"100Gi","toleratedTaints":["profile.matrixone.cloud/log.standard","cluster-pool.matrixone.cloud/restore-freetier-02"]},"name":"default","profile":"log.standard","replicas":3},"managed":{"imageRepository":"registry.cn-shanghai.aliyuncs.com/matrixorigin/matrixone","localServiceRef":{"name":"local-service"},"objectStorage":{"path":"moc-backup-test/restore-freetier-02-20240315021618","region":"cn-hangzhou","restored":true}},"state":"Active","unitName":"qa-unit-cn-hangzhou","unitSelector":{"matchLabels":{"matrixone.cloud/cloud":"aliyun","matrixone.cloud/region":"cn-hangzhou"}},"version":"nightly-e94ba155"},"state":{},"status":{"conditions":[{"lastTransitionTime":"2024-03-15T05:26:57Z","message":"Last error: reconcile error: cluster has unready set, wait all desired set ready, requeue after 5s","reason":"empty","status":"False","type":"Synced"}],"endpoint":{},"phase":"Creating"}}

DEBUG    src.tests.upgrade.test_mo_upgrade:test_mo_upgrade.py:219 wait for the conditions by '<lambda>' with args: ('restore-freetier-02',), {}
DEBUG    kubernetes.client.rest:rest.py:235 response body: {"apiVersion":"core.matrixone-cloud/v1alpha1","kind":"Cluster","metadata":{"annotations":{"matrixone.cloud/enable-aksk-authorize":"true"},"creationTimestamp":"2024-03-15T05:26:57Z","generation":1,"labels":{"matrixone.cloud/cordoned":"Y","matrixone.cloud/role":"root"},"managedFields":[{"apiVersion":"core.matrixone-cloud/v1alpha1","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:matrixone.cloud/enable-aksk-authorize":{}},"f:labels":{".":{},"f:matrixone.cloud/cordoned":{},"f:matrixone.cloud/role":{}}},"f:spec":{".":{},"f:cnPools":{".":{},"k:{\"name\":\"limited\"}":{".":{},"f:managed":{".":{},"f:config":{},"f:nodeSelector":{".":{},"f:matrixone.cloud/cluster-pool":{},"f:matrixone.cloud/profile":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:sharedStorageCache":{".":{},"f:memoryCacheSize":{}},"f:storageClassName":{},"f:storageSize":{},"f:toleratedTaints":{}},"f:name":{},"f:poolStrategy":{".":{},"f:scaleStrategy":{".":{},"f:maxIdle":{}},"f:updateStrategy":{".":{},"f:reclaimTimeout":{}}},"f:profile":{}},"k:{\"name\":\"pool\"}":{".":{},"f:managed":{".":{},"f:config":{},"f:nodeSelector":{".":{},"f:matrixone.cloud/cluster-pool":{},"f:matrixone.cloud/profile":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:sharedStorageCache":{".":{},"f:memoryCacheSize":{}},"f:storageClassName":{},"f:storageSize":{},"f:toleratedTaints":{}},"f:name":{},"f:poolStrategy":{".":{},"f:scaleStrategy":{".":{},"f:maxIdle":{}},"f:updateStrategy":{".":{},"f:reclaimTimeout":{}}},"f:profile":{}}},"f:cnSets":{".":{},"k:{\"name\":\"default\"}":{".":{},"f:managed":{".":{},"f:componentBackend":{},"f:config":{},"f:nodeSelector":{".":{},"f:matrixone.cloud/cluster-pool":{},"f:matrixone.cloud/profile":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:sharedStorageCache":{".":{},"f:memoryCacheSize":{}},"f:storageClassName":{},"f:storageSize":{},"f:toleratedTaints":{}},"f:name":{},"f:profile":{},"f:replicas":{},"f:scalingConfig":{".":{},"f:maxReplicas":{},"f:minReplicas":{},"f:policy":{}}}},"f:dnSets":{".":{},"k:{\"name\":\"default\"}":{".":{},"f:managed":{".":{},"f:config":{},"f:nodeSelector":{".":{},"f:matrixone.cloud/cluster-pool":{},"f:matrixone.cloud/profile":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:sharedStorageCache":{".":{},"f:memoryCacheSize":{}},"f:storageClassName":{},"f:storageSize":{},"f:toleratedTaints":{}},"f:name":{},"f:profile":{},"f:replicas":{}}},"f:endpoint":{".":{},"f:mode":{},"f:proxySpec":{".":{},"f:image":{},"f:managed":{".":{},"f:config":{},"f:profile":{}},"f:pluginImage":{},"f:replicas":{}},"f:whitelistIPRanges":{}},"f:logSet":{".":{},"f:managed":{".":{},"f:config":{},"f:nodeSelector":{".":{},"f:matrixone.cloud/cluster-pool":{},"f:matrixone.cloud/profile":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:storageClassName":{},"f:storageSize":{},"f:toleratedTaints":{}},"f:name":{},"f:profile":{},"f:replicas":{}},"f:managed":{".":{},"f:imageRepository":{},"f:localServiceRef":{".":{},"f:name":{}},"f:objectStorage":{".":{},"f:path":{},"f:region":{},"f:restored":{}}},"f:state":{},"f:unitName":{},"f:unitSelector":{},"f:version":{}},"f:state":{}},"manager":"Go-http-client","operation":"Update","time":"2024-03-15T05:26:57Z"},{"apiVersion":"core.matrixone-cloud/v1alpha1","fieldsType":"FieldsV1","fieldsV1":{"f:status":{".":{},"f:conditions":{},"f:endpoint":{},"f:phase":{}}},"manager":"Go-http-client","operation":"Update","subresource":"status","time":"2024-03-15T05:35:25Z"}],"name":"restore-freetier-02","resourceVersion":"96293202","uid":"958654b6-6428-4caa-b525-f346074db6df"},"spec":{"cnPools":[{"managed":{"config":"[cn.frontend]\nsaveQueryResult = \"on\"\nqueryResultTimeout = 72\nlengthOfQueryPrinted = 10000\ndisable-select-into = true\n[cn.txn]\nenable-leak-check = 1\nmax-active-ages = \"20m\"\n[observability]\nmetricUpdateStorageUsageInterval = \"15m\"\nenableStmtMerge = true\nenableMetricToProm = true\n","nodeSelector":{"matrixone.cloud/cluster-pool":"restore-freetier-02","matrixone.cloud/profile":"cn.standard"},"resources":{"limits":{"cpu":"7","memory":"13Gi"},"requests":{"cpu":"7","memory":"13Gi"}},"sharedStorageCache":{"memoryCacheSize":"1Gi"},"storageClassName":"alicloud-disk-essd-pl1","storageSize":"300Gi","toleratedTaints":["profile.matrixone.cloud/cn.standard","cluster-pool.matrixone.cloud/restore-freetier-02"]},"name":"pool","poolStrategy":{"scaleStrategy":{"maxIdle":2},"updateStrategy":{"reclaimTimeout":"24h0m0s"}},"profile":"cn.standard"},{"managed":{"config":"[cn.frontend]\nsaveQueryResult = \"on\"\nqueryResultTimeout = 72\nlengthOfQueryPrinted = 10000\ndisable-select-into = true\n[cn.txn]\nenable-leak-check = 1\nmax-active-ages = \"20m\"\n[observability]\nmetricUpdateStorageUsageInterval = \"15m\"\nenableStmtMerge = true\nenableMetricToProm = true\n","nodeSelector":{"matrixone.cloud/cluster-pool":"restore-freetier-02","matrixone.cloud/profile":"cn.tiny"},"resources":{"limits":{"cpu":"1","memory":"2Gi"},"requests":{"cpu":"1","memory":"2Gi"}},"sharedStorageCache":{"memoryCacheSize":"128Mi"},"storageClassName":"alicloud-disk-essd-pl1","storageSize":"300Gi","toleratedTaints":["profile.matrixone.cloud/cn.tiny","cluster-pool.matrixone.cloud/restore-freetier-02"]},"name":"limited","poolStrategy":{"scaleStrategy":{"maxIdle":0},"updateStrategy":{"reclaimTimeout":"24h0m0s"}},"profile":"cn.tiny"}],"cnSets":[{"managed":{"componentBackend":"Pod","config":"[cn]\ninit-work-state = \"Draining\"\n[cn.frontend]\nsaveQueryResult = \"on\"\nqueryResultTimeout = 72\nlengthOfQueryPrinted = 10000\ndisable-select-into = true\n[cn.txn]\nenable-leak-check = 1\nmax-active-ages = \"20m\"\n[observability]\nmetricUpdateStorageUsageInterval = \"15m\"\nenableStmtMerge = true\nenableMetricToProm = true\n","nodeSelector":{"matrixone.cloud/cluster-pool":"restore-freetier-02","matrixone.cloud/profile":"cn.standard"},"resources":{"limits":{"cpu":"7","memory":"13Gi"},"requests":{"cpu":"7","memory":"13Gi"}},"sharedStorageCache":{"memoryCacheSize":"1Gi"},"storageClassName":"alicloud-disk-essd-pl1","storageSize":"300Gi","toleratedTaints":["profile.matrixone.cloud/cn.standard","cluster-pool.matrixone.cloud/restore-freetier-02"]},"name":"default","profile":"cn.standard","replicas":2,"scalingConfig":{"maxReplicas":10,"minReplicas":2,"policy":"AutoScaling"}}],"dnSets":[{"managed":{"config":"[log]\nlevel = \"info\"\n","nodeSelector":{"matrixone.cloud/cluster-pool":"restore-freetier-02","matrixone.cloud/profile":"dn.standard"},"resources":{"limits":{"cpu":"15","memory":"29184Mi"},"requests":{"cpu":"15","memory":"29184Mi"}},"sharedStorageCache":{"memoryCacheSize":"5Gi"},"storageClassName":"alicloud-disk-essd-pl1","storageSize":"100Gi","toleratedTaints":["profile.matrixone.cloud/dn.standard","cluster-pool.matrixone.cloud/restore-freetier-02"]},"name":"default","profile":"dn.standard","replicas":1}],"endpoint":{"mode":"Dedicated","proxySpec":{"image":"registry.cn-shanghai.aliyuncs.com/matrixorigin/matrixone:nightly-e94ba155","managed":{"config":"[proxy.plugin]\ntimeout = \"3s\"\n","profile":"proxy.standard"},"pluginImage":"registry.cn-hangzhou.aliyuncs.com/ack-cos/plugin:49e2ffd8-20240201","replicas":2},"whitelistIPRanges":["0.0.0.0/0"]},"logSet":{"managed":{"config":"[log]\nlevel = \"info\"\n","nodeSelector":{"matrixone.cloud/cluster-pool":"restore-freetier-02","matrixone.cloud/profile":"log.standard"},"resources":{"limits":{"cpu":"3","memory":"6Gi"},"requests":{"cpu":"3","memory":"6Gi"}},"storageClassName":"alicloud-disk-essd-pl1","storageSize":"100Gi","toleratedTaints":["profile.matrixone.cloud/log.standard","cluster-pool.matrixone.cloud/restore-freetier-02"]},"name":"default","profile":"log.standard","replicas":3},"managed":{"imageRepository":"registry.cn-shanghai.aliyuncs.com/matrixorigin/matrixone","localServiceRef":{"name":"local-service"},"objectStorage":{"path":"moc-backup-test/restore-freetier-02-20240315021618","region":"cn-hangzhou","restored":true}},"state":"Active","unitName":"qa-unit-cn-hangzhou","unitSelector":{"matchLabels":{"matrixone.cloud/cloud":"aliyun","matrixone.cloud/region":"cn-hangzhou"}},"version":"nightly-e94ba155"},"state":{},"status":{"conditions":[{"lastTransitionTime":"2024-03-15T05:26:57Z","message":"Last error: reconcile error: cluster has unready set, wait all desired set ready, requeue after 5s","reason":"empty","status":"False","type":"Synced"}],"endpoint":{},"phase":"Creating"}}

DEBUG    src.tests.upgrade.test_mo_upgrade:test_mo_upgrade.py:219 wait for the conditions by '<lambda>' with args: ('restore-freetier-02',), {}
DEBUG    kubernetes.client.rest:rest.py:235 response body: {"apiVersion":"core.matrixone-cloud/v1alpha1","kind":"Cluster","metadata":{"annotations":{"matrixone.cloud/enable-aksk-authorize":"true"},"creationTimestamp":"2024-03-15T05:26:57Z","generation":1,"labels":{"matrixone.cloud/cordoned":"Y","matrixone.cloud/role":"root"},"managedFields":[{"apiVersion":"core.matrixone-cloud/v1alpha1","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:matrixone.cloud/enable-aksk-authorize":{}},"f:labels":{".":{},"f:matrixone.cloud/cordoned":{},"f:matrixone.cloud/role":{}}},"f:spec":{".":{},"f:cnPools":{".":{},"k:{\"name\":\"limited\"}":{".":{},"f:managed":{".":{},"f:config":{},"f:nodeSelector":{".":{},"f:matrixone.cloud/cluster-pool":{},"f:matrixone.cloud/profile":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:sharedStorageCache":{".":{},"f:memoryCacheSize":{}},"f:storageClassName":{},"f:storageSize":{},"f:toleratedTaints":{}},"f:name":{},"f:poolStrategy":{".":{},"f:scaleStrategy":{".":{},"f:maxIdle":{}},"f:updateStrategy":{".":{},"f:reclaimTimeout":{}}},"f:profile":{}},"k:{\"name\":\"pool\"}":{".":{},"f:managed":{".":{},"f:config":{},"f:nodeSelector":{".":{},"f:matrixone.cloud/cluster-pool":{},"f:matrixone.cloud/profile":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:sharedStorageCache":{".":{},"f:memoryCacheSize":{}},"f:storageClassName":{},"f:storageSize":{},"f:toleratedTaints":{}},"f:name":{},"f:poolStrategy":{".":{},"f:scaleStrategy":{".":{},"f:maxIdle":{}},"f:updateStrategy":{".":{},"f:reclaimTimeout":{}}},"f:profile":{}}},"f:cnSets":{".":{},"k:{\"name\":\"default\"}":{".":{},"f:managed":{".":{},"f:componentBackend":{},"f:config":{},"f:nodeSelector":{".":{},"f:matrixone.cloud/cluster-pool":{},"f:matrixone.cloud/profile":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:sharedStorageCache":{".":{},"f:memoryCacheSize":{}},"f:storageClassName":{},"f:storageSize":{},"f:toleratedTaints":{}},"f:name":{},"f:profile":{},"f:replicas":{},"f:scalingConfig":{".":{},"f:maxReplicas":{},"f:minReplicas":{},"f:policy":{}}}},"f:dnSets":{".":{},"k:{\"name\":\"default\"}":{".":{},"f:managed":{".":{},"f:config":{},"f:nodeSelector":{".":{},"f:matrixone.cloud/cluster-pool":{},"f:matrixone.cloud/profile":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:sharedStorageCache":{".":{},"f:memoryCacheSize":{}},"f:storageClassName":{},"f:storageSize":{},"f:toleratedTaints":{}},"f:name":{},"f:profile":{},"f:replicas":{}}},"f:endpoint":{".":{},"f:mode":{},"f:proxySpec":{".":{},"f:image":{},"f:managed":{".":{},"f:config":{},"f:profile":{}},"f:pluginImage":{},"f:replicas":{}},"f:whitelistIPRanges":{}},"f:logSet":{".":{},"f:managed":{".":{},"f:config":{},"f:nodeSelector":{".":{},"f:matrixone.cloud/cluster-pool":{},"f:matrixone.cloud/profile":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:storageClassName":{},"f:storageSize":{},"f:toleratedTaints":{}},"f:name":{},"f:profile":{},"f:replicas":{}},"f:managed":{".":{},"f:imageRepository":{},"f:localServiceRef":{".":{},"f:name":{}},"f:objectStorage":{".":{},"f:path":{},"f:region":{},"f:restored":{}}},"f:state":{},"f:unitName":{},"f:unitSelector":{},"f:version":{}},"f:state":{}},"manager":"Go-http-client","operation":"Update","time":"2024-03-15T05:26:57Z"},{"apiVersion":"core.matrixone-cloud/v1alpha1","fieldsType":"FieldsV1","fieldsV1":{"f:status":{".":{},"f:conditions":{},"f:endpoint":{},"f:phase":{}}},"manager":"Go-http-client","operation":"Update","subresource":"status","time":"2024-03-15T05:35:56Z"}],"name":"restore-freetier-02","resourceVersion":"96293599","uid":"958654b6-6428-4caa-b525-f346074db6df"},"spec":{"cnPools":[{"managed":{"config":"[cn.frontend]\nsaveQueryResult = \"on\"\nqueryResultTimeout = 72\nlengthOfQueryPrinted = 10000\ndisable-select-into = true\n[cn.txn]\nenable-leak-check = 1\nmax-active-ages = \"20m\"\n[observability]\nmetricUpdateStorageUsageInterval = \"15m\"\nenableStmtMerge = true\nenableMetricToProm = true\n","nodeSelector":{"matrixone.cloud/cluster-pool":"restore-freetier-02","matrixone.cloud/profile":"cn.standard"},"resources":{"limits":{"cpu":"7","memory":"13Gi"},"requests":{"cpu":"7","memory":"13Gi"}},"sharedStorageCache":{"memoryCacheSize":"1Gi"},"storageClassName":"alicloud-disk-essd-pl1","storageSize":"300Gi","toleratedTaints":["profile.matrixone.cloud/cn.standard","cluster-pool.matrixone.cloud/restore-freetier-02"]},"name":"pool","poolStrategy":{"scaleStrategy":{"maxIdle":2},"updateStrategy":{"reclaimTimeout":"24h0m0s"}},"profile":"cn.standard"},{"managed":{"config":"[cn.frontend]\nsaveQueryResult = \"on\"\nqueryResultTimeout = 72\nlengthOfQueryPrinted = 10000\ndisable-select-into = true\n[cn.txn]\nenable-leak-check = 1\nmax-active-ages = \"20m\"\n[observability]\nmetricUpdateStorageUsageInterval = \"15m\"\nenableStmtMerge = true\nenableMetricToProm = true\n","nodeSelector":{"matrixone.cloud/cluster-pool":"restore-freetier-02","matrixone.cloud/profile":"cn.tiny"},"resources":{"limits":{"cpu":"1","memory":"2Gi"},"requests":{"cpu":"1","memory":"2Gi"}},"sharedStorageCache":{"memoryCacheSize":"128Mi"},"storageClassName":"alicloud-disk-essd-pl1","storageSize":"300Gi","toleratedTaints":["profile.matrixone.cloud/cn.tiny","cluster-pool.matrixone.cloud/restore-freetier-02"]},"name":"limited","poolStrategy":{"scaleStrategy":{"maxIdle":0},"updateStrategy":{"reclaimTimeout":"24h0m0s"}},"profile":"cn.tiny"}],"cnSets":[{"managed":{"componentBackend":"Pod","config":"[cn]\ninit-work-state = \"Draining\"\n[cn.frontend]\nsaveQueryResult = \"on\"\nqueryResultTimeout = 72\nlengthOfQueryPrinted = 10000\ndisable-select-into = true\n[cn.txn]\nenable-leak-check = 1\nmax-active-ages = \"20m\"\n[observability]\nmetricUpdateStorageUsageInterval = \"15m\"\nenableStmtMerge = true\nenableMetricToProm = true\n","nodeSelector":{"matrixone.cloud/cluster-pool":"restore-freetier-02","matrixone.cloud/profile":"cn.standard"},"resources":{"limits":{"cpu":"7","memory":"13Gi"},"requests":{"cpu":"7","memory":"13Gi"}},"sharedStorageCache":{"memoryCacheSize":"1Gi"},"storageClassName":"alicloud-disk-essd-pl1","storageSize":"300Gi","toleratedTaints":["profile.matrixone.cloud/cn.standard","cluster-pool.matrixone.cloud/restore-freetier-02"]},"name":"default","profile":"cn.standard","replicas":2,"scalingConfig":{"maxReplicas":10,"minReplicas":2,"policy":"AutoScaling"}}],"dnSets":[{"managed":{"config":"[log]\nlevel = \"info\"\n","nodeSelector":{"matrixone.cloud/cluster-pool":"restore-freetier-02","matrixone.cloud/profile":"dn.standard"},"resources":{"limits":{"cpu":"15","memory":"29184Mi"},"requests":{"cpu":"15","memory":"29184Mi"}},"sharedStorageCache":{"memoryCacheSize":"5Gi"},"storageClassName":"alicloud-disk-essd-pl1","storageSize":"100Gi","toleratedTaints":["profile.matrixone.cloud/dn.standard","cluster-pool.matrixone.cloud/restore-freetier-02"]},"name":"default","profile":"dn.standard","replicas":1}],"endpoint":{"mode":"Dedicated","proxySpec":{"image":"registry.cn-shanghai.aliyuncs.com/matrixorigin/matrixone:nightly-e94ba155","managed":{"config":"[proxy.plugin]\ntimeout = \"3s\"\n","profile":"proxy.standard"},"pluginImage":"registry.cn-hangzhou.aliyuncs.com/ack-cos/plugin:49e2ffd8-20240201","replicas":2},"whitelistIPRanges":["0.0.0.0/0"]},"logSet":{"managed":{"config":"[log]\nlevel = \"info\"\n","nodeSelector":{"matrixone.cloud/cluster-pool":"restore-freetier-02","matrixone.cloud/profile":"log.standard"},"resources":{"limits":{"cpu":"3","memory":"6Gi"},"requests":{"cpu":"3","memory":"6Gi"}},"storageClassName":"alicloud-disk-essd-pl1","storageSize":"100Gi","toleratedTaints":["profile.matrixone.cloud/log.standard","cluster-pool.matrixone.cloud/restore-freetier-02"]},"name":"default","profile":"log.standard","replicas":3},"managed":{"imageRepository":"registry.cn-shanghai.aliyuncs.com/matrixorigin/matrixone","localServiceRef":{"name":"local-service"},"objectStorage":{"path":"moc-backup-test/restore-freetier-02-20240315021618","region":"cn-hangzhou","restored":true}},"state":"Active","unitName":"qa-unit-cn-hangzhou","unitSelector":{"matchLabels":{"matrixone.cloud/cloud":"aliyun","matrixone.cloud/region":"cn-hangzhou"}},"version":"nightly-e94ba155"},"state":{},"status":{"conditions":[{"lastTransitionTime":"2024-03-15T05:26:57Z","message":"Last error: reconcile error: cluster has unready set, wait all desired set ready, requeue after 5s","reason":"empty","status":"False","type":"Synced"}],"endpoint":{},"phase":"Creating"}}

DEBUG    src.tests.upgrade.test_mo_upgrade:test_mo_upgrade.py:219 wait for the conditions by '<lambda>' with args: ('restore-freetier-02',), {}
DEBUG    kubernetes.client.rest:rest.py:235 response body: {"apiVersion":"core.matrixone-cloud/v1alpha1","kind":"Cluster","metadata":{"annotations":{"matrixone.cloud/enable-aksk-authorize":"true"},"creationTimestamp":"2024-03-15T05:26:57Z","generation":1,"labels":{"matrixone.cloud/cordoned":"Y","matrixone.cloud/role":"root"},"managedFields":[{"apiVersion":"core.matrixone-cloud/v1alpha1","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:matrixone.cloud/enable-aksk-authorize":{}},"f:labels":{".":{},"f:matrixone.cloud/cordoned":{},"f:matrixone.cloud/role":{}}},"f:spec":{".":{},"f:cnPools":{".":{},"k:{\"name\":\"limited\"}":{".":{},"f:managed":{".":{},"f:config":{},"f:nodeSelector":{".":{},"f:matrixone.cloud/cluster-pool":{},"f:matrixone.cloud/profile":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:sharedStorageCache":{".":{},"f:memoryCacheSize":{}},"f:storageClassName":{},"f:storageSize":{},"f:toleratedTaints":{}},"f:name":{},"f:poolStrategy":{".":{},"f:scaleStrategy":{".":{},"f:maxIdle":{}},"f:updateStrategy":{".":{},"f:reclaimTimeout":{}}},"f:profile":{}},"k:{\"name\":\"pool\"}":{".":{},"f:managed":{".":{},"f:config":{},"f:nodeSelector":{".":{},"f:matrixone.cloud/cluster-pool":{},"f:matrixone.cloud/profile":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:sharedStorageCache":{".":{},"f:memoryCacheSize":{}},"f:storageClassName":{},"f:storageSize":{},"f:toleratedTaints":{}},"f:name":{},"f:poolStrategy":{".":{},"f:scaleStrategy":{".":{},"f:maxIdle":{}},"f:updateStrategy":{".":{},"f:reclaimTimeout":{}}},"f:profile":{}}},"f:cnSets":{".":{},"k:{\"name\":\"default\"}":{".":{},"f:managed":{".":{},"f:componentBackend":{},"f:config":{},"f:nodeSelector":{".":{},"f:matrixone.cloud/cluster-pool":{},"f:matrixone.cloud/profile":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:sharedStorageCache":{".":{},"f:memoryCacheSize":{}},"f:storageClassName":{},"f:storageSize":{},"f:toleratedTaints":{}},"f:name":{},"f:profile":{},"f:replicas":{},"f:scalingConfig":{".":{},"f:maxReplicas":{},"f:minReplicas":{},"f:policy":{}}}},"f:dnSets":{".":{},"k:{\"name\":\"default\"}":{".":{},"f:managed":{".":{},"f:config":{},"f:nodeSelector":{".":{},"f:matrixone.cloud/cluster-pool":{},"f:matrixone.cloud/profile":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:sharedStorageCache":{".":{},"f:memoryCacheSize":{}},"f:storageClassName":{},"f:storageSize":{},"f:toleratedTaints":{}},"f:name":{},"f:profile":{},"f:replicas":{}}},"f:endpoint":{".":{},"f:mode":{},"f:proxySpec":{".":{},"f:image":{},"f:managed":{".":{},"f:config":{},"f:profile":{}},"f:pluginImage":{},"f:replicas":{}},"f:whitelistIPRanges":{}},"f:logSet":{".":{},"f:managed":{".":{},"f:config":{},"f:nodeSelector":{".":{},"f:matrixone.cloud/cluster-pool":{},"f:matrixone.cloud/profile":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:storageClassName":{},"f:storageSize":{},"f:toleratedTaints":{}},"f:name":{},"f:profile":{},"f:replicas":{}},"f:managed":{".":{},"f:imageRepository":{},"f:localServiceRef":{".":{},"f:name":{}},"f:objectStorage":{".":{},"f:path":{},"f:region":{},"f:restored":{}}},"f:state":{},"f:unitName":{},"f:unitSelector":{},"f:version":{}},"f:state":{}},"manager":"Go-http-client","operation":"Update","time":"2024-03-15T05:26:57Z"},{"apiVersion":"core.matrixone-cloud/v1alpha1","fieldsType":"FieldsV1","fieldsV1":{"f:status":{".":{},"f:conditions":{},"f:endpoint":{},"f:phase":{}}},"manager":"Go-http-client","operation":"Update","subresource":"status","time":"2024-03-15T05:36:27Z"}],"name":"restore-freetier-02","resourceVersion":"96294002","uid":"958654b6-6428-4caa-b525-f346074db6df"},"spec":{"cnPools":[{"managed":{"config":"[cn.frontend]\nsaveQueryResult = \"on\"\nqueryResultTimeout = 72\nlengthOfQueryPrinted = 10000\ndisable-select-into = true\n[cn.txn]\nenable-leak-check = 1\nmax-active-ages = \"20m\"\n[observability]\nmetricUpdateStorageUsageInterval = \"15m\"\nenableStmtMerge = true\nenableMetricToProm = true\n","nodeSelector":{"matrixone.cloud/cluster-pool":"restore-freetier-02","matrixone.cloud/profile":"cn.standard"},"resources":{"limits":{"cpu":"7","memory":"13Gi"},"requests":{"cpu":"7","memory":"13Gi"}},"sharedStorageCache":{"memoryCacheSize":"1Gi"},"storageClassName":"alicloud-disk-essd-pl1","storageSize":"300Gi","toleratedTaints":["profile.matrixone.cloud/cn.standard","cluster-pool.matrixone.cloud/restore-freetier-02"]},"name":"pool","poolStrategy":{"scaleStrategy":{"maxIdle":2},"updateStrategy":{"reclaimTimeout":"24h0m0s"}},"profile":"cn.standard"},{"managed":{"config":"[cn.frontend]\nsaveQueryResult = \"on\"\nqueryResultTimeout = 72\nlengthOfQueryPrinted = 10000\ndisable-select-into = true\n[cn.txn]\nenable-leak-check = 1\nmax-active-ages = \"20m\"\n[observability]\nmetricUpdateStorageUsageInterval = \"15m\"\nenableStmtMerge = true\nenableMetricToProm = true\n","nodeSelector":{"matrixone.cloud/cluster-pool":"restore-freetier-02","matrixone.cloud/profile":"cn.tiny"},"resources":{"limits":{"cpu":"1","memory":"2Gi"},"requests":{"cpu":"1","memory":"2Gi"}},"sharedStorageCache":{"memoryCacheSize":"128Mi"},"storageClassName":"alicloud-disk-essd-pl1","storageSize":"300Gi","toleratedTaints":["profile.matrixone.cloud/cn.tiny","cluster-pool.matrixone.cloud/restore-freetier-02"]},"name":"limited","poolStrategy":{"scaleStrategy":{"maxIdle":0},"updateStrategy":{"reclaimTimeout":"24h0m0s"}},"profile":"cn.tiny"}],"cnSets":[{"managed":{"componentBackend":"Pod","config":"[cn]\ninit-work-state = \"Draining\"\n[cn.frontend]\nsaveQueryResult = \"on\"\nqueryResultTimeout = 72\nlengthOfQueryPrinted = 10000\ndisable-select-into = true\n[cn.txn]\nenable-leak-check = 1\nmax-active-ages = \"20m\"\n[observability]\nmetricUpdateStorageUsageInterval = \"15m\"\nenableStmtMerge = true\nenableMetricToProm = true\n","nodeSelector":{"matrixone.cloud/cluster-pool":"restore-freetier-02","matrixone.cloud/profile":"cn.standard"},"resources":{"limits":{"cpu":"7","memory":"13Gi"},"requests":{"cpu":"7","memory":"13Gi"}},"sharedStorageCache":{"memoryCacheSize":"1Gi"},"storageClassName":"alicloud-disk-essd-pl1","storageSize":"300Gi","toleratedTaints":["profile.matrixone.cloud/cn.standard","cluster-pool.matrixone.cloud/restore-freetier-02"]},"name":"default","profile":"cn.standard","replicas":2,"scalingConfig":{"maxReplicas":10,"minReplicas":2,"policy":"AutoScaling"}}],"dnSets":[{"managed":{"config":"[log]\nlevel = \"info\"\n","nodeSelector":{"matrixone.cloud/cluster-pool":"restore-freetier-02","matrixone.cloud/profile":"dn.standard"},"resources":{"limits":{"cpu":"15","memory":"29184Mi"},"requests":{"cpu":"15","memory":"29184Mi"}},"sharedStorageCache":{"memoryCacheSize":"5Gi"},"storageClassName":"alicloud-disk-essd-pl1","storageSize":"100Gi","toleratedTaints":["profile.matrixone.cloud/dn.standard","cluster-pool.matrixone.cloud/restore-freetier-02"]},"name":"default","profile":"dn.standard","replicas":1}],"endpoint":{"mode":"Dedicated","proxySpec":{"image":"registry.cn-shanghai.aliyuncs.com/matrixorigin/matrixone:nightly-e94ba155","managed":{"config":"[proxy.plugin]\ntimeout = \"3s\"\n","profile":"proxy.standard"},"pluginImage":"registry.cn-hangzhou.aliyuncs.com/ack-cos/plugin:49e2ffd8-20240201","replicas":2},"whitelistIPRanges":["0.0.0.0/0"]},"logSet":{"managed":{"config":"[log]\nlevel = \"info\"\n","nodeSelector":{"matrixone.cloud/cluster-pool":"restore-freetier-02","matrixone.cloud/profile":"log.standard"},"resources":{"limits":{"cpu":"3","memory":"6Gi"},"requests":{"cpu":"3","memory":"6Gi"}},"storageClassName":"alicloud-disk-essd-pl1","storageSize":"100Gi","toleratedTaints":["profile.matrixone.cloud/log.standard","cluster-pool.matrixone.cloud/restore-freetier-02"]},"name":"default","profile":"log.standard","replicas":3},"managed":{"imageRepository":"registry.cn-shanghai.aliyuncs.com/matrixorigin/matrixone","localServiceRef":{"name":"local-service"},"objectStorage":{"path":"moc-backup-test/restore-freetier-02-20240315021618","region":"cn-hangzhou","restored":true}},"state":"Active","unitName":"qa-unit-cn-hangzhou","unitSelector":{"matchLabels":{"matrixone.cloud/cloud":"aliyun","matrixone.cloud/region":"cn-hangzhou"}},"version":"nightly-e94ba155"},"state":{},"status":{"conditions":[{"lastTransitionTime":"2024-03-15T05:26:57Z","message":"Last error: reconcile error: cluster has unready set, wait all desired set ready, requeue after 5s","reason":"empty","status":"False","type":"Synced"}],"endpoint":{},"phase":"Creating"}}

DEBUG    src.tests.upgrade.test_mo_upgrade:test_mo_upgrade.py:219 wait for the conditions by '<lambda>' with args: ('restore-freetier-02',), {}
DEBUG    kubernetes.client.rest:rest.py:235 response body: {"apiVersion":"core.matrixone-cloud/v1alpha1","kind":"Cluster","metadata":{"annotations":{"matrixone.cloud/enable-aksk-authorize":"true"},"creationTimestamp":"2024-03-15T05:26:57Z","generation":1,"labels":{"matrixone.cloud/cordoned":"Y","matrixone.cloud/role":"root"},"managedFields":[{"apiVersion":"core.matrixone-cloud/v1alpha1","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:matrixone.cloud/enable-aksk-authorize":{}},"f:labels":{".":{},"f:matrixone.cloud/cordoned":{},"f:matrixone.cloud/role":{}}},"f:spec":{".":{},"f:cnPools":{".":{},"k:{\"name\":\"limited\"}":{".":{},"f:managed":{".":{},"f:config":{},"f:nodeSelector":{".":{},"f:matrixone.cloud/cluster-pool":{},"f:matrixone.cloud/profile":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:sharedStorageCache":{".":{},"f:memoryCacheSize":{}},"f:storageClassName":{},"f:storageSize":{},"f:toleratedTaints":{}},"f:name":{},"f:poolStrategy":{".":{},"f:scaleStrategy":{".":{},"f:maxIdle":{}},"f:updateStrategy":{".":{},"f:reclaimTimeout":{}}},"f:profile":{}},"k:{\"name\":\"pool\"}":{".":{},"f:managed":{".":{},"f:config":{},"f:nodeSelector":{".":{},"f:matrixone.cloud/cluster-pool":{},"f:matrixone.cloud/profile":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:sharedStorageCache":{".":{},"f:memoryCacheSize":{}},"f:storageClassName":{},"f:storageSize":{},"f:toleratedTaints":{}},"f:name":{},"f:poolStrategy":{".":{},"f:scaleStrategy":{".":{},"f:maxIdle":{}},"f:updateStrategy":{".":{},"f:reclaimTimeout":{}}},"f:profile":{}}},"f:cnSets":{".":{},"k:{\"name\":\"default\"}":{".":{},"f:managed":{".":{},"f:componentBackend":{},"f:config":{},"f:nodeSelector":{".":{},"f:matrixone.cloud/cluster-pool":{},"f:matrixone.cloud/profile":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:sharedStorageCache":{".":{},"f:memoryCacheSize":{}},"f:storageClassName":{},"f:storageSize":{},"f:toleratedTaints":{}},"f:name":{},"f:profile":{},"f:replicas":{},"f:scalingConfig":{".":{},"f:maxReplicas":{},"f:minReplicas":{},"f:policy":{}}}},"f:dnSets":{".":{},"k:{\"name\":\"default\"}":{".":{},"f:managed":{".":{},"f:config":{},"f:nodeSelector":{".":{},"f:matrixone.cloud/cluster-pool":{},"f:matrixone.cloud/profile":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:sharedStorageCache":{".":{},"f:memoryCacheSize":{}},"f:storageClassName":{},"f:storageSize":{},"f:toleratedTaints":{}},"f:name":{},"f:profile":{},"f:replicas":{}}},"f:endpoint":{".":{},"f:mode":{},"f:proxySpec":{".":{},"f:image":{},"f:managed":{".":{},"f:config":{},"f:profile":{}},"f:pluginImage":{},"f:replicas":{}},"f:whitelistIPRanges":{}},"f:logSet":{".":{},"f:managed":{".":{},"f:config":{},"f:nodeSelector":{".":{},"f:matrixone.cloud/cluster-pool":{},"f:matrixone.cloud/profile":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:storageClassName":{},"f:storageSize":{},"f:toleratedTaints":{}},"f:name":{},"f:profile":{},"f:replicas":{}},"f:managed":{".":{},"f:imageRepository":{},"f:localServiceRef":{".":{},"f:name":{}},"f:objectStorage":{".":{},"f:path":{},"f:region":{},"f:restored":{}}},"f:state":{},"f:unitName":{},"f:unitSelector":{},"f:version":{}},"f:state":{}},"manager":"Go-http-client","operation":"Update","time":"2024-03-15T05:26:57Z"},{"apiVersion":"core.matrixone-cloud/v1alpha1","fieldsType":"FieldsV1","fieldsV1":{"f:status":{".":{},"f:conditions":{},"f:endpoint":{},"f:phase":{}}},"manager":"Go-http-client","operation":"Update","subresource":"status","time":"2024-03-15T05:36:58Z"}],"name":"restore-freetier-02","resourceVersion":"96294398","uid":"958654b6-6428-4caa-b525-f346074db6df"},"spec":{"cnPools":[{"managed":{"config":"[cn.frontend]\nsaveQueryResult = \"on\"\nqueryResultTimeout = 72\nlengthOfQueryPrinted = 10000\ndisable-select-into = true\n[cn.txn]\nenable-leak-check = 1\nmax-active-ages = \"20m\"\n[observability]\nmetricUpdateStorageUsageInterval = \"15m\"\nenableStmtMerge = true\nenableMetricToProm = true\n","nodeSelector":{"matrixone.cloud/cluster-pool":"restore-freetier-02","matrixone.cloud/profile":"cn.standard"},"resources":{"limits":{"cpu":"7","memory":"13Gi"},"requests":{"cpu":"7","memory":"13Gi"}},"sharedStorageCache":{"memoryCacheSize":"1Gi"},"storageClassName":"alicloud-disk-essd-pl1","storageSize":"300Gi","toleratedTaints":["profile.matrixone.cloud/cn.standard","cluster-pool.matrixone.cloud/restore-freetier-02"]},"name":"pool","poolStrategy":{"scaleStrategy":{"maxIdle":2},"updateStrategy":{"reclaimTimeout":"24h0m0s"}},"profile":"cn.standard"},{"managed":{"config":"[cn.frontend]\nsaveQueryResult = \"on\"\nqueryResultTimeout = 72\nlengthOfQueryPrinted = 10000\ndisable-select-into = true\n[cn.txn]\nenable-leak-check = 1\nmax-active-ages = \"20m\"\n[observability]\nmetricUpdateStorageUsageInterval = \"15m\"\nenableStmtMerge = true\nenableMetricToProm = true\n","nodeSelector":{"matrixone.cloud/cluster-pool":"restore-freetier-02","matrixone.cloud/profile":"cn.tiny"},"resources":{"limits":{"cpu":"1","memory":"2Gi"},"requests":{"cpu":"1","memory":"2Gi"}},"sharedStorageCache":{"memoryCacheSize":"128Mi"},"storageClassName":"alicloud-disk-essd-pl1","storageSize":"300Gi","toleratedTaints":["profile.matrixone.cloud/cn.tiny","cluster-pool.matrixone.cloud/restore-freetier-02"]},"name":"limited","poolStrategy":{"scaleStrategy":{"maxIdle":0},"updateStrategy":{"reclaimTimeout":"24h0m0s"}},"profile":"cn.tiny"}],"cnSets":[{"managed":{"componentBackend":"Pod","config":"[cn]\ninit-work-state = \"Draining\"\n[cn.frontend]\nsaveQueryResult = \"on\"\nqueryResultTimeout = 72\nlengthOfQueryPrinted = 10000\ndisable-select-into = true\n[cn.txn]\nenable-leak-check = 1\nmax-active-ages = \"20m\"\n[observability]\nmetricUpdateStorageUsageInterval = \"15m\"\nenableStmtMerge = true\nenableMetricToProm = true\n","nodeSelector":{"matrixone.cloud/cluster-pool":"restore-freetier-02","matrixone.cloud/profile":"cn.standard"},"resources":{"limits":{"cpu":"7","memory":"13Gi"},"requests":{"cpu":"7","memory":"13Gi"}},"sharedStorageCache":{"memoryCacheSize":"1Gi"},"storageClassName":"alicloud-disk-essd-pl1","storageSize":"300Gi","toleratedTaints":["profile.matrixone.cloud/cn.standard","cluster-pool.matrixone.cloud/restore-freetier-02"]},"name":"default","profile":"cn.standard","replicas":2,"scalingConfig":{"maxReplicas":10,"minReplicas":2,"policy":"AutoScaling"}}],"dnSets":[{"managed":{"config":"[log]\nlevel = \"info\"\n","nodeSelector":{"matrixone.cloud/cluster-pool":"restore-freetier-02","matrixone.cloud/profile":"dn.standard"},"resources":{"limits":{"cpu":"15","memory":"29184Mi"},"requests":{"cpu":"15","memory":"29184Mi"}},"sharedStorageCache":{"memoryCacheSize":"5Gi"},"storageClassName":"alicloud-disk-essd-pl1","storageSize":"100Gi","toleratedTaints":["profile.matrixone.cloud/dn.standard","cluster-pool.matrixone.cloud/restore-freetier-02"]},"name":"default","profile":"dn.standard","replicas":1}],"endpoint":{"mode":"Dedicated","proxySpec":{"image":"registry.cn-shanghai.aliyuncs.com/matrixorigin/matrixone:nightly-e94ba155","managed":{"config":"[proxy.plugin]\ntimeout = \"3s\"\n","profile":"proxy.standard"},"pluginImage":"registry.cn-hangzhou.aliyuncs.com/ack-cos/plugin:49e2ffd8-20240201","replicas":2},"whitelistIPRanges":["0.0.0.0/0"]},"logSet":{"managed":{"config":"[log]\nlevel = \"info\"\n","nodeSelector":{"matrixone.cloud/cluster-pool":"restore-freetier-02","matrixone.cloud/profile":"log.standard"},"resources":{"limits":{"cpu":"3","memory":"6Gi"},"requests":{"cpu":"3","memory":"6Gi"}},"storageClassName":"alicloud-disk-essd-pl1","storageSize":"100Gi","toleratedTaints":["profile.matrixone.cloud/log.standard","cluster-pool.matrixone.cloud/restore-freetier-02"]},"name":"default","profile":"log.standard","replicas":3},"managed":{"imageRepository":"registry.cn-shanghai.aliyuncs.com/matrixorigin/matrixone","localServiceRef":{"name":"local-service"},"objectStorage":{"path":"moc-backup-test/restore-freetier-02-20240315021618","region":"cn-hangzhou","restored":true}},"state":"Active","unitName":"qa-unit-cn-hangzhou","unitSelector":{"matchLabels":{"matrixone.cloud/cloud":"aliyun","matrixone.cloud/region":"cn-hangzhou"}},"version":"nightly-e94ba155"},"state":{},"status":{"conditions":[{"lastTransitionTime":"2024-03-15T05:26:57Z","message":"Last error: reconcile error: cluster has unready set, wait all desired set ready, requeue after 5s","reason":"empty","status":"False","type":"Synced"}],"endpoint":{},"phase":"Creating"}}

DEBUG    src.tests.upgrade.test_mo_upgrade:test_mo_upgrade.py:219 wait for the conditions by '<lambda>' with args: ('restore-freetier-02',), {}
DEBUG    kubernetes.client.rest:rest.py:235 response body: {"apiVersion":"core.matrixone-cloud/v1alpha1","kind":"Cluster","metadata":{"annotations":{"matrixone.cloud/enable-aksk-authorize":"true"},"creationTimestamp":"2024-03-15T05:26:57Z","generation":1,"labels":{"matrixone.cloud/cordoned":"Y","matrixone.cloud/role":"root"},"managedFields":[{"apiVersion":"core.matrixone-cloud/v1alpha1","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:matrixone.cloud/enable-aksk-authorize":{}},"f:labels":{".":{},"f:matrixone.cloud/cordoned":{},"f:matrixone.cloud/role":{}}},"f:spec":{".":{},"f:cnPools":{".":{},"k:{\"name\":\"limited\"}":{".":{},"f:managed":{".":{},"f:config":{},"f:nodeSelector":{".":{},"f:matrixone.cloud/cluster-pool":{},"f:matrixone.cloud/profile":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:sharedStorageCache":{".":{},"f:memoryCacheSize":{}},"f:storageClassName":{},"f:storageSize":{},"f:toleratedTaints":{}},"f:name":{},"f:poolStrategy":{".":{},"f:scaleStrategy":{".":{},"f:maxIdle":{}},"f:updateStrategy":{".":{},"f:reclaimTimeout":{}}},"f:profile":{}},"k:{\"name\":\"pool\"}":{".":{},"f:managed":{".":{},"f:config":{},"f:nodeSelector":{".":{},"f:matrixone.cloud/cluster-pool":{},"f:matrixone.cloud/profile":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:sharedStorageCache":{".":{},"f:memoryCacheSize":{}},"f:storageClassName":{},"f:storageSize":{},"f:toleratedTaints":{}},"f:name":{},"f:poolStrategy":{".":{},"f:scaleStrategy":{".":{},"f:maxIdle":{}},"f:updateStrategy":{".":{},"f:reclaimTimeout":{}}},"f:profile":{}}},"f:cnSets":{".":{},"k:{\"name\":\"default\"}":{".":{},"f:managed":{".":{},"f:componentBackend":{},"f:config":{},"f:nodeSelector":{".":{},"f:matrixone.cloud/cluster-pool":{},"f:matrixone.cloud/profile":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:sharedStorageCache":{".":{},"f:memoryCacheSize":{}},"f:storageClassName":{},"f:storageSize":{},"f:toleratedTaints":{}},"f:name":{},"f:profile":{},"f:replicas":{},"f:scalingConfig":{".":{},"f:maxReplicas":{},"f:minReplicas":{},"f:policy":{}}}},"f:dnSets":{".":{},"k:{\"name\":\"default\"}":{".":{},"f:managed":{".":{},"f:config":{},"f:nodeSelector":{".":{},"f:matrixone.cloud/cluster-pool":{},"f:matrixone.cloud/profile":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:sharedStorageCache":{".":{},"f:memoryCacheSize":{}},"f:storageClassName":{},"f:storageSize":{},"f:toleratedTaints":{}},"f:name":{},"f:profile":{},"f:replicas":{}}},"f:endpoint":{".":{},"f:mode":{},"f:proxySpec":{".":{},"f:image":{},"f:managed":{".":{},"f:config":{},"f:profile":{}},"f:pluginImage":{},"f:replicas":{}},"f:whitelistIPRanges":{}},"f:logSet":{".":{},"f:managed":{".":{},"f:config":{},"f:nodeSelector":{".":{},"f:matrixone.cloud/cluster-pool":{},"f:matrixone.cloud/profile":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:storageClassName":{},"f:storageSize":{},"f:toleratedTaints":{}},"f:name":{},"f:profile":{},"f:replicas":{}},"f:managed":{".":{},"f:imageRepository":{},"f:localServiceRef":{".":{},"f:name":{}},"f:objectStorage":{".":{},"f:path":{},"f:region":{},"f:restored":{}}},"f:state":{},"f:unitName":{},"f:unitSelector":{},"f:version":{}},"f:state":{}},"manager":"Go-http-client","operation":"Update","time":"2024-03-15T05:26:57Z"},{"apiVersion":"core.matrixone-cloud/v1alpha1","fieldsType":"FieldsV1","fieldsV1":{"f:status":{".":{},"f:conditions":{},"f:endpoint":{},"f:phase":{}}},"manager":"Go-http-client","operation":"Update","subresource":"status","time":"2024-03-15T05:37:29Z"}],"name":"restore-freetier-02","resourceVersion":"96294789","uid":"958654b6-6428-4caa-b525-f346074db6df"},"spec":{"cnPools":[{"managed":{"config":"[cn.frontend]\nsaveQueryResult = \"on\"\nqueryResultTimeout = 72\nlengthOfQueryPrinted = 10000\ndisable-select-into = true\n[cn.txn]\nenable-leak-check = 1\nmax-active-ages = \"20m\"\n[observability]\nmetricUpdateStorageUsageInterval = \"15m\"\nenableStmtMerge = true\nenableMetricToProm = true\n","nodeSelector":{"matrixone.cloud/cluster-pool":"restore-freetier-02","matrixone.cloud/profile":"cn.standard"},"resources":{"limits":{"cpu":"7","memory":"13Gi"},"requests":{"cpu":"7","memory":"13Gi"}},"sharedStorageCache":{"memoryCacheSize":"1Gi"},"storageClassName":"alicloud-disk-essd-pl1","storageSize":"300Gi","toleratedTaints":["profile.matrixone.cloud/cn.standard","cluster-pool.matrixone.cloud/restore-freetier-02"]},"name":"pool","poolStrategy":{"scaleStrategy":{"maxIdle":2},"updateStrategy":{"reclaimTimeout":"24h0m0s"}},"profile":"cn.standard"},{"managed":{"config":"[cn.frontend]\nsaveQueryResult = \"on\"\nqueryResultTimeout = 72\nlengthOfQueryPrinted = 10000\ndisable-select-into = true\n[cn.txn]\nenable-leak-check = 1\nmax-active-ages = \"20m\"\n[observability]\nmetricUpdateStorageUsageInterval = \"15m\"\nenableStmtMerge = true\nenableMetricToProm = true\n","nodeSelector":{"matrixone.cloud/cluster-pool":"restore-freetier-02","matrixone.cloud/profile":"cn.tiny"},"resources":{"limits":{"cpu":"1","memory":"2Gi"},"requests":{"cpu":"1","memory":"2Gi"}},"sharedStorageCache":{"memoryCacheSize":"128Mi"},"storageClassName":"alicloud-disk-essd-pl1","storageSize":"300Gi","toleratedTaints":["profile.matrixone.cloud/cn.tiny","cluster-pool.matrixone.cloud/restore-freetier-02"]},"name":"limited","poolStrategy":{"scaleStrategy":{"maxIdle":0},"updateStrategy":{"reclaimTimeout":"24h0m0s"}},"profile":"cn.tiny"}],"cnSets":[{"managed":{"componentBackend":"Pod","config":"[cn]\ninit-work-state = \"Draining\"\n[cn.frontend]\nsaveQueryResult = \"on\"\nqueryResultTimeout = 72\nlengthOfQueryPrinted = 10000\ndisable-select-into = true\n[cn.txn]\nenable-leak-check = 1\nmax-active-ages = \"20m\"\n[observability]\nmetricUpdateStorageUsageInterval = \"15m\"\nenableStmtMerge = true\nenableMetricToProm = true\n","nodeSelector":{"matrixone.cloud/cluster-pool":"restore-freetier-02","matrixone.cloud/profile":"cn.standard"},"resources":{"limits":{"cpu":"7","memory":"13Gi"},"requests":{"cpu":"7","memory":"13Gi"}},"sharedStorageCache":{"memoryCacheSize":"1Gi"},"storageClassName":"alicloud-disk-essd-pl1","storageSize":"300Gi","toleratedTaints":["profile.matrixone.cloud/cn.standard","cluster-pool.matrixone.cloud/restore-freetier-02"]},"name":"default","profile":"cn.standard","replicas":2,"scalingConfig":{"maxReplicas":10,"minReplicas":2,"policy":"AutoScaling"}}],"dnSets":[{"managed":{"config":"[log]\nlevel = \"info\"\n","nodeSelector":{"matrixone.cloud/cluster-pool":"restore-freetier-02","matrixone.cloud/profile":"dn.standard"},"resources":{"limits":{"cpu":"15","memory":"29184Mi"},"requests":{"cpu":"15","memory":"29184Mi"}},"sharedStorageCache":{"memoryCacheSize":"5Gi"},"storageClassName":"alicloud-disk-essd-pl1","storageSize":"100Gi","toleratedTaints":["profile.matrixone.cloud/dn.standard","cluster-pool.matrixone.cloud/restore-freetier-02"]},"name":"default","profile":"dn.standard","replicas":1}],"endpoint":{"mode":"Dedicated","proxySpec":{"image":"registry.cn-shanghai.aliyuncs.com/matrixorigin/matrixone:nightly-e94ba155","managed":{"config":"[proxy.plugin]\ntimeout = \"3s\"\n","profile":"proxy.standard"},"pluginImage":"registry.cn-hangzhou.aliyuncs.com/ack-cos/plugin:49e2ffd8-20240201","replicas":2},"whitelistIPRanges":["0.0.0.0/0"]},"logSet":{"managed":{"config":"[log]\nlevel = \"info\"\n","nodeSelector":{"matrixone.cloud/cluster-pool":"restore-freetier-02","matrixone.cloud/profile":"log.standard"},"resources":{"limits":{"cpu":"3","memory":"6Gi"},"requests":{"cpu":"3","memory":"6Gi"}},"storageClassName":"alicloud-disk-essd-pl1","storageSize":"100Gi","toleratedTaints":["profile.matrixone.cloud/log.standard","cluster-pool.matrixone.cloud/restore-freetier-02"]},"name":"default","profile":"log.standard","replicas":3},"managed":{"imageRepository":"registry.cn-shanghai.aliyuncs.com/matrixorigin/matrixone","localServiceRef":{"name":"local-service"},"objectStorage":{"path":"moc-backup-test/restore-freetier-02-20240315021618","region":"cn-hangzhou","restored":true}},"state":"Active","unitName":"qa-unit-cn-hangzhou","unitSelector":{"matchLabels":{"matrixone.cloud/cloud":"aliyun","matrixone.cloud/region":"cn-hangzhou"}},"version":"nightly-e94ba155"},"state":{},"status":{"conditions":[{"lastTransitionTime":"2024-03-15T05:26:57Z","message":"Last error: reconcile error: cluster has unready set, wait all desired set ready, requeue after 5s","reason":"empty","status":"False","type":"Synced"}],"endpoint":{},"phase":"Creating"}}

DEBUG    src.tests.upgrade.test_mo_upgrade:test_mo_upgrade.py:219 wait for the conditions by '<lambda>' with args: ('restore-freetier-02',), {}
DEBUG    kubernetes.client.rest:rest.py:235 response body: {"apiVersion":"core.matrixone-cloud/v1alpha1","kind":"Cluster","metadata":{"annotations":{"matrixone.cloud/enable-aksk-authorize":"true"},"creationTimestamp":"2024-03-15T05:26:57Z","generation":1,"labels":{"matrixone.cloud/cordoned":"Y","matrixone.cloud/role":"root"},"managedFields":[{"apiVersion":"core.matrixone-cloud/v1alpha1","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:matrixone.cloud/enable-aksk-authorize":{}},"f:labels":{".":{},"f:matrixone.cloud/cordoned":{},"f:matrixone.cloud/role":{}}},"f:spec":{".":{},"f:cnPools":{".":{},"k:{\"name\":\"limited\"}":{".":{},"f:managed":{".":{},"f:config":{},"f:nodeSelector":{".":{},"f:matrixone.cloud/cluster-pool":{},"f:matrixone.cloud/profile":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:sharedStorageCache":{".":{},"f:memoryCacheSize":{}},"f:storageClassName":{},"f:storageSize":{},"f:toleratedTaints":{}},"f:name":{},"f:poolStrategy":{".":{},"f:scaleStrategy":{".":{},"f:maxIdle":{}},"f:updateStrategy":{".":{},"f:reclaimTimeout":{}}},"f:profile":{}},"k:{\"name\":\"pool\"}":{".":{},"f:managed":{".":{},"f:config":{},"f:nodeSelector":{".":{},"f:matrixone.cloud/cluster-pool":{},"f:matrixone.cloud/profile":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:sharedStorageCache":{".":{},"f:memoryCacheSize":{}},"f:storageClassName":{},"f:storageSize":{},"f:toleratedTaints":{}},"f:name":{},"f:poolStrategy":{".":{},"f:scaleStrategy":{".":{},"f:maxIdle":{}},"f:updateStrategy":{".":{},"f:reclaimTimeout":{}}},"f:profile":{}}},"f:cnSets":{".":{},"k:{\"name\":\"default\"}":{".":{},"f:managed":{".":{},"f:componentBackend":{},"f:config":{},"f:nodeSelector":{".":{},"f:matrixone.cloud/cluster-pool":{},"f:matrixone.cloud/profile":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:sharedStorageCache":{".":{},"f:memoryCacheSize":{}},"f:storageClassName":{},"f:storageSize":{},"f:toleratedTaints":{}},"f:name":{},"f:profile":{},"f:replicas":{},"f:scalingConfig":{".":{},"f:maxReplicas":{},"f:minReplicas":{},"f:policy":{}}}},"f:dnSets":{".":{},"k:{\"name\":\"default\"}":{".":{},"f:managed":{".":{},"f:config":{},"f:nodeSelector":{".":{},"f:matrixone.cloud/cluster-pool":{},"f:matrixone.cloud/profile":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:sharedStorageCache":{".":{},"f:memoryCacheSize":{}},"f:storageClassName":{},"f:storageSize":{},"f:toleratedTaints":{}},"f:name":{},"f:profile":{},"f:replicas":{}}},"f:endpoint":{".":{},"f:mode":{},"f:proxySpec":{".":{},"f:image":{},"f:managed":{".":{},"f:config":{},"f:profile":{}},"f:pluginImage":{},"f:replicas":{}},"f:whitelistIPRanges":{}},"f:logSet":{".":{},"f:managed":{".":{},"f:config":{},"f:nodeSelector":{".":{},"f:matrixone.cloud/cluster-pool":{},"f:matrixone.cloud/profile":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:storageClassName":{},"f:storageSize":{},"f:toleratedTaints":{}},"f:name":{},"f:profile":{},"f:replicas":{}},"f:managed":{".":{},"f:imageRepository":{},"f:localServiceRef":{".":{},"f:name":{}},"f:objectStorage":{".":{},"f:path":{},"f:region":{},"f:restored":{}}},"f:state":{},"f:unitName":{},"f:unitSelector":{},"f:version":{}},"f:state":{}},"manager":"Go-http-client","operation":"Update","time":"2024-03-15T05:26:57Z"},{"apiVersion":"core.matrixone-cloud/v1alpha1","fieldsType":"FieldsV1","fieldsV1":{"f:status":{".":{},"f:conditions":{},"f:endpoint":{},"f:phase":{}}},"manager":"Go-http-client","operation":"Update","subresource":"status","time":"2024-03-15T05:38:00Z"}],"name":"restore-freetier-02","resourceVersion":"96295187","uid":"958654b6-6428-4caa-b525-f346074db6df"},"spec":{"cnPools":[{"managed":{"config":"[cn.frontend]\nsaveQueryResult = \"on\"\nqueryResultTimeout = 72\nlengthOfQueryPrinted = 10000\ndisable-select-into = true\n[cn.txn]\nenable-leak-check = 1\nmax-active-ages = \"20m\"\n[observability]\nmetricUpdateStorageUsageInterval = \"15m\"\nenableStmtMerge = true\nenableMetricToProm = true\n","nodeSelector":{"matrixone.cloud/cluster-pool":"restore-freetier-02","matrixone.cloud/profile":"cn.standard"},"resources":{"limits":{"cpu":"7","memory":"13Gi"},"requests":{"cpu":"7","memory":"13Gi"}},"sharedStorageCache":{"memoryCacheSize":"1Gi"},"storageClassName":"alicloud-disk-essd-pl1","storageSize":"300Gi","toleratedTaints":["profile.matrixone.cloud/cn.standard","cluster-pool.matrixone.cloud/restore-freetier-02"]},"name":"pool","poolStrategy":{"scaleStrategy":{"maxIdle":2},"updateStrategy":{"reclaimTimeout":"24h0m0s"}},"profile":"cn.standard"},{"managed":{"config":"[cn.frontend]\nsaveQueryResult = \"on\"\nqueryResultTimeout = 72\nlengthOfQueryPrinted = 10000\ndisable-select-into = true\n[cn.txn]\nenable-leak-check = 1\nmax-active-ages = \"20m\"\n[observability]\nmetricUpdateStorageUsageInterval = \"15m\"\nenableStmtMerge = true\nenableMetricToProm = true\n","nodeSelector":{"matrixone.cloud/cluster-pool":"restore-freetier-02","matrixone.cloud/profile":"cn.tiny"},"resources":{"limits":{"cpu":"1","memory":"2Gi"},"requests":{"cpu":"1","memory":"2Gi"}},"sharedStorageCache":{"memoryCacheSize":"128Mi"},"storageClassName":"alicloud-disk-essd-pl1","storageSize":"300Gi","toleratedTaints":["profile.matrixone.cloud/cn.tiny","cluster-pool.matrixone.cloud/restore-freetier-02"]},"name":"limited","poolStrategy":{"scaleStrategy":{"maxIdle":0},"updateStrategy":{"reclaimTimeout":"24h0m0s"}},"profile":"cn.tiny"}],"cnSets":[{"managed":{"componentBackend":"Pod","config":"[cn]\ninit-work-state = \"Draining\"\n[cn.frontend]\nsaveQueryResult = \"on\"\nqueryResultTimeout = 72\nlengthOfQueryPrinted = 10000\ndisable-select-into = true\n[cn.txn]\nenable-leak-check = 1\nmax-active-ages = \"20m\"\n[observability]\nmetricUpdateStorageUsageInterval = \"15m\"\nenableStmtMerge = true\nenableMetricToProm = true\n","nodeSelector":{"matrixone.cloud/cluster-pool":"restore-freetier-02","matrixone.cloud/profile":"cn.standard"},"resources":{"limits":{"cpu":"7","memory":"13Gi"},"requests":{"cpu":"7","memory":"13Gi"}},"sharedStorageCache":{"memoryCacheSize":"1Gi"},"storageClassName":"alicloud-disk-essd-pl1","storageSize":"300Gi","toleratedTaints":["profile.matrixone.cloud/cn.standard","cluster-pool.matrixone.cloud/restore-freetier-02"]},"name":"default","profile":"cn.standard","replicas":2,"scalingConfig":{"maxReplicas":10,"minReplicas":2,"policy":"AutoScaling"}}],"dnSets":[{"managed":{"config":"[log]\nlevel = \"info\"\n","nodeSelector":{"matrixone.cloud/cluster-pool":"restore-freetier-02","matrixone.cloud/profile":"dn.standard"},"resources":{"limits":{"cpu":"15","memory":"29184Mi"},"requests":{"cpu":"15","memory":"29184Mi"}},"sharedStorageCache":{"memoryCacheSize":"5Gi"},"storageClassName":"alicloud-disk-essd-pl1","storageSize":"100Gi","toleratedTaints":["profile.matrixone.cloud/dn.standard","cluster-pool.matrixone.cloud/restore-freetier-02"]},"name":"default","profile":"dn.standard","replicas":1}],"endpoint":{"mode":"Dedicated","proxySpec":{"image":"registry.cn-shanghai.aliyuncs.com/matrixorigin/matrixone:nightly-e94ba155","managed":{"config":"[proxy.plugin]\ntimeout = \"3s\"\n","profile":"proxy.standard"},"pluginImage":"registry.cn-hangzhou.aliyuncs.com/ack-cos/plugin:49e2ffd8-20240201","replicas":2},"whitelistIPRanges":["0.0.0.0/0"]},"logSet":{"managed":{"config":"[log]\nlevel = \"info\"\n","nodeSelector":{"matrixone.cloud/cluster-pool":"restore-freetier-02","matrixone.cloud/profile":"log.standard"},"resources":{"limits":{"cpu":"3","memory":"6Gi"},"requests":{"cpu":"3","memory":"6Gi"}},"storageClassName":"alicloud-disk-essd-pl1","storageSize":"100Gi","toleratedTaints":["profile.matrixone.cloud/log.standard","cluster-pool.matrixone.cloud/restore-freetier-02"]},"name":"default","profile":"log.standard","replicas":3},"managed":{"imageRepository":"registry.cn-shanghai.aliyuncs.com/matrixorigin/matrixone","localServiceRef":{"name":"local-service"},"objectStorage":{"path":"moc-backup-test/restore-freetier-02-20240315021618","region":"cn-hangzhou","restored":true}},"state":"Active","unitName":"qa-unit-cn-hangzhou","unitSelector":{"matchLabels":{"matrixone.cloud/cloud":"aliyun","matrixone.cloud/region":"cn-hangzhou"}},"version":"nightly-e94ba155"},"state":{},"status":{"conditions":[{"lastTransitionTime":"2024-03-15T05:26:57Z","message":"Last error: reconcile error: cluster has unready set, wait all desired set ready, requeue after 5s","reason":"empty","status":"False","type":"Synced"}],"endpoint":{},"phase":"Creating"}}

DEBUG    src.tests.upgrade.test_mo_upgrade:test_mo_upgrade.py:219 wait for the conditions by '<lambda>' with args: ('restore-freetier-02',), {}
DEBUG    kubernetes.client.rest:rest.py:235 response body: {"apiVersion":"core.matrixone-cloud/v1alpha1","kind":"Cluster","metadata":{"annotations":{"matrixone.cloud/enable-aksk-authorize":"true"},"creationTimestamp":"2024-03-15T05:26:57Z","generation":1,"labels":{"matrixone.cloud/cordoned":"Y","matrixone.cloud/role":"root"},"managedFields":[{"apiVersion":"core.matrixone-cloud/v1alpha1","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:matrixone.cloud/enable-aksk-authorize":{}},"f:labels":{".":{},"f:matrixone.cloud/cordoned":{},"f:matrixone.cloud/role":{}}},"f:spec":{".":{},"f:cnPools":{".":{},"k:{\"name\":\"limited\"}":{".":{},"f:managed":{".":{},"f:config":{},"f:nodeSelector":{".":{},"f:matrixone.cloud/cluster-pool":{},"f:matrixone.cloud/profile":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:sharedStorageCache":{".":{},"f:memoryCacheSize":{}},"f:storageClassName":{},"f:storageSize":{},"f:toleratedTaints":{}},"f:name":{},"f:poolStrategy":{".":{},"f:scaleStrategy":{".":{},"f:maxIdle":{}},"f:updateStrategy":{".":{},"f:reclaimTimeout":{}}},"f:profile":{}},"k:{\"name\":\"pool\"}":{".":{},"f:managed":{".":{},"f:config":{},"f:nodeSelector":{".":{},"f:matrixone.cloud/cluster-pool":{},"f:matrixone.cloud/profile":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:sharedStorageCache":{".":{},"f:memoryCacheSize":{}},"f:storageClassName":{},"f:storageSize":{},"f:toleratedTaints":{}},"f:name":{},"f:poolStrategy":{".":{},"f:scaleStrategy":{".":{},"f:maxIdle":{}},"f:updateStrategy":{".":{},"f:reclaimTimeout":{}}},"f:profile":{}}},"f:cnSets":{".":{},"k:{\"name\":\"default\"}":{".":{},"f:managed":{".":{},"f:componentBackend":{},"f:config":{},"f:nodeSelector":{".":{},"f:matrixone.cloud/cluster-pool":{},"f:matrixone.cloud/profile":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:sharedStorageCache":{".":{},"f:memoryCacheSize":{}},"f:storageClassName":{},"f:storageSize":{},"f:toleratedTaints":{}},"f:name":{},"f:profile":{},"f:replicas":{},"f:scalingConfig":{".":{},"f:maxReplicas":{},"f:minReplicas":{},"f:policy":{}}}},"f:dnSets":{".":{},"k:{\"name\":\"default\"}":{".":{},"f:managed":{".":{},"f:config":{},"f:nodeSelector":{".":{},"f:matrixone.cloud/cluster-pool":{},"f:matrixone.cloud/profile":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:sharedStorageCache":{".":{},"f:memoryCacheSize":{}},"f:storageClassName":{},"f:storageSize":{},"f:toleratedTaints":{}},"f:name":{},"f:profile":{},"f:replicas":{}}},"f:endpoint":{".":{},"f:mode":{},"f:proxySpec":{".":{},"f:image":{},"f:managed":{".":{},"f:config":{},"f:profile":{}},"f:pluginImage":{},"f:replicas":{}},"f:whitelistIPRanges":{}},"f:logSet":{".":{},"f:managed":{".":{},"f:config":{},"f:nodeSelector":{".":{},"f:matrixone.cloud/cluster-pool":{},"f:matrixone.cloud/profile":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:storageClassName":{},"f:storageSize":{},"f:toleratedTaints":{}},"f:name":{},"f:profile":{},"f:replicas":{}},"f:managed":{".":{},"f:imageRepository":{},"f:localServiceRef":{".":{},"f:name":{}},"f:objectStorage":{".":{},"f:path":{},"f:region":{},"f:restored":{}}},"f:state":{},"f:unitName":{},"f:unitSelector":{},"f:version":{}},"f:state":{}},"manager":"Go-http-client","operation":"Update","time":"2024-03-15T05:26:57Z"},{"apiVersion":"core.matrixone-cloud/v1alpha1","fieldsType":"FieldsV1","fieldsV1":{"f:status":{".":{},"f:conditions":{},"f:endpoint":{},"f:phase":{}}},"manager":"Go-http-client","operation":"Update","subresource":"status","time":"2024-03-15T05:38:31Z"}],"name":"restore-freetier-02","resourceVersion":"96295578","uid":"958654b6-6428-4caa-b525-f346074db6df"},"spec":{"cnPools":[{"managed":{"config":"[cn.frontend]\nsaveQueryResult = \"on\"\nqueryResultTimeout = 72\nlengthOfQueryPrinted = 10000\ndisable-select-into = true\n[cn.txn]\nenable-leak-check = 1\nmax-active-ages = \"20m\"\n[observability]\nmetricUpdateStorageUsageInterval = \"15m\"\nenableStmtMerge = true\nenableMetricToProm = true\n","nodeSelector":{"matrixone.cloud/cluster-pool":"restore-freetier-02","matrixone.cloud/profile":"cn.standard"},"resources":{"limits":{"cpu":"7","memory":"13Gi"},"requests":{"cpu":"7","memory":"13Gi"}},"sharedStorageCache":{"memoryCacheSize":"1Gi"},"storageClassName":"alicloud-disk-essd-pl1","storageSize":"300Gi","toleratedTaints":["profile.matrixone.cloud/cn.standard","cluster-pool.matrixone.cloud/restore-freetier-02"]},"name":"pool","poolStrategy":{"scaleStrategy":{"maxIdle":2},"updateStrategy":{"reclaimTimeout":"24h0m0s"}},"profile":"cn.standard"},{"managed":{"config":"[cn.frontend]\nsaveQueryResult = \"on\"\nqueryResultTimeout = 72\nlengthOfQueryPrinted = 10000\ndisable-select-into = true\n[cn.txn]\nenable-leak-check = 1\nmax-active-ages = \"20m\"\n[observability]\nmetricUpdateStorageUsageInterval = \"15m\"\nenableStmtMerge = true\nenableMetricToProm = true\n","nodeSelector":{"matrixone.cloud/cluster-pool":"restore-freetier-02","matrixone.cloud/profile":"cn.tiny"},"resources":{"limits":{"cpu":"1","memory":"2Gi"},"requests":{"cpu":"1","memory":"2Gi"}},"sharedStorageCache":{"memoryCacheSize":"128Mi"},"storageClassName":"alicloud-disk-essd-pl1","storageSize":"300Gi","toleratedTaints":["profile.matrixone.cloud/cn.tiny","cluster-pool.matrixone.cloud/restore-freetier-02"]},"name":"limited","poolStrategy":{"scaleStrategy":{"maxIdle":0},"updateStrategy":{"reclaimTimeout":"24h0m0s"}},"profile":"cn.tiny"}],"cnSets":[{"managed":{"componentBackend":"Pod","config":"[cn]\ninit-work-state = \"Draining\"\n[cn.frontend]\nsaveQueryResult = \"on\"\nqueryResultTimeout = 72\nlengthOfQueryPrinted = 10000\ndisable-select-into = true\n[cn.txn]\nenable-leak-check = 1\nmax-active-ages = \"20m\"\n[observability]\nmetricUpdateStorageUsageInterval = \"15m\"\nenableStmtMerge = true\nenableMetricToProm = true\n","nodeSelector":{"matrixone.cloud/cluster-pool":"restore-freetier-02","matrixone.cloud/profile":"cn.standard"},"resources":{"limits":{"cpu":"7","memory":"13Gi"},"requests":{"cpu":"7","memory":"13Gi"}},"sharedStorageCache":{"memoryCacheSize":"1Gi"},"storageClassName":"alicloud-disk-essd-pl1","storageSize":"300Gi","toleratedTaints":["profile.matrixone.cloud/cn.standard","cluster-pool.matrixone.cloud/restore-freetier-02"]},"name":"default","profile":"cn.standard","replicas":2,"scalingConfig":{"maxReplicas":10,"minReplicas":2,"policy":"AutoScaling"}}],"dnSets":[{"managed":{"config":"[log]\nlevel = \"info\"\n","nodeSelector":{"matrixone.cloud/cluster-pool":"restore-freetier-02","matrixone.cloud/profile":"dn.standard"},"resources":{"limits":{"cpu":"15","memory":"29184Mi"},"requests":{"cpu":"15","memory":"29184Mi"}},"sharedStorageCache":{"memoryCacheSize":"5Gi"},"storageClassName":"alicloud-disk-essd-pl1","storageSize":"100Gi","toleratedTaints":["profile.matrixone.cloud/dn.standard","cluster-pool.matrixone.cloud/restore-freetier-02"]},"name":"default","profile":"dn.standard","replicas":1}],"endpoint":{"mode":"Dedicated","proxySpec":{"image":"registry.cn-shanghai.aliyuncs.com/matrixorigin/matrixone:nightly-e94ba155","managed":{"config":"[proxy.plugin]\ntimeout = \"3s\"\n","profile":"proxy.standard"},"pluginImage":"registry.cn-hangzhou.aliyuncs.com/ack-cos/plugin:49e2ffd8-20240201","replicas":2},"whitelistIPRanges":["0.0.0.0/0"]},"logSet":{"managed":{"config":"[log]\nlevel = \"info\"\n","nodeSelector":{"matrixone.cloud/cluster-pool":"restore-freetier-02","matrixone.cloud/profile":"log.standard"},"resources":{"limits":{"cpu":"3","memory":"6Gi"},"requests":{"cpu":"3","memory":"6Gi"}},"storageClassName":"alicloud-disk-essd-pl1","storageSize":"100Gi","toleratedTaints":["profile.matrixone.cloud/log.standard","cluster-pool.matrixone.cloud/restore-freetier-02"]},"name":"default","profile":"log.standard","replicas":3},"managed":{"imageRepository":"registry.cn-shanghai.aliyuncs.com/matrixorigin/matrixone","localServiceRef":{"name":"local-service"},"objectStorage":{"path":"moc-backup-test/restore-freetier-02-20240315021618","region":"cn-hangzhou","restored":true}},"state":"Active","unitName":"qa-unit-cn-hangzhou","unitSelector":{"matchLabels":{"matrixone.cloud/cloud":"aliyun","matrixone.cloud/region":"cn-hangzhou"}},"version":"nightly-e94ba155"},"state":{},"status":{"conditions":[{"lastTransitionTime":"2024-03-15T05:26:57Z","message":"Last error: reconcile error: cluster has unready set, wait all desired set ready, requeue after 5s","reason":"empty","status":"False","type":"Synced"}],"endpoint":{},"phase":"Creating"}}

DEBUG    src.tests.upgrade.test_mo_upgrade:test_mo_upgrade.py:219 wait for the conditions by '<lambda>' with args: ('restore-freetier-02',), {}
DEBUG    kubernetes.client.rest:rest.py:235 response body: {"apiVersion":"core.matrixone-cloud/v1alpha1","kind":"Cluster","metadata":{"annotations":{"matrixone.cloud/enable-aksk-authorize":"true"},"creationTimestamp":"2024-03-15T05:26:57Z","generation":1,"labels":{"matrixone.cloud/cordoned":"Y","matrixone.cloud/role":"root"},"managedFields":[{"apiVersion":"core.matrixone-cloud/v1alpha1","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:matrixone.cloud/enable-aksk-authorize":{}},"f:labels":{".":{},"f:matrixone.cloud/cordoned":{},"f:matrixone.cloud/role":{}}},"f:spec":{".":{},"f:cnPools":{".":{},"k:{\"name\":\"limited\"}":{".":{},"f:managed":{".":{},"f:config":{},"f:nodeSelector":{".":{},"f:matrixone.cloud/cluster-pool":{},"f:matrixone.cloud/profile":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:sharedStorageCache":{".":{},"f:memoryCacheSize":{}},"f:storageClassName":{},"f:storageSize":{},"f:toleratedTaints":{}},"f:name":{},"f:poolStrategy":{".":{},"f:scaleStrategy":{".":{},"f:maxIdle":{}},"f:updateStrategy":{".":{},"f:reclaimTimeout":{}}},"f:profile":{}},"k:{\"name\":\"pool\"}":{".":{},"f:managed":{".":{},"f:config":{},"f:nodeSelector":{".":{},"f:matrixone.cloud/cluster-pool":{},"f:matrixone.cloud/profile":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:sharedStorageCache":{".":{},"f:memoryCacheSize":{}},"f:storageClassName":{},"f:storageSize":{},"f:toleratedTaints":{}},"f:name":{},"f:poolStrategy":{".":{},"f:scaleStrategy":{".":{},"f:maxIdle":{}},"f:updateStrategy":{".":{},"f:reclaimTimeout":{}}},"f:profile":{}}},"f:cnSets":{".":{},"k:{\"name\":\"default\"}":{".":{},"f:managed":{".":{},"f:componentBackend":{},"f:config":{},"f:nodeSelector":{".":{},"f:matrixone.cloud/cluster-pool":{},"f:matrixone.cloud/profile":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:sharedStorageCache":{".":{},"f:memoryCacheSize":{}},"f:storageClassName":{},"f:storageSize":{},"f:toleratedTaints":{}},"f:name":{},"f:profile":{},"f:replicas":{},"f:scalingConfig":{".":{},"f:maxReplicas":{},"f:minReplicas":{},"f:policy":{}}}},"f:dnSets":{".":{},"k:{\"name\":\"default\"}":{".":{},"f:managed":{".":{},"f:config":{},"f:nodeSelector":{".":{},"f:matrixone.cloud/cluster-pool":{},"f:matrixone.cloud/profile":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:sharedStorageCache":{".":{},"f:memoryCacheSize":{}},"f:storageClassName":{},"f:storageSize":{},"f:toleratedTaints":{}},"f:name":{},"f:profile":{},"f:replicas":{}}},"f:endpoint":{".":{},"f:mode":{},"f:proxySpec":{".":{},"f:image":{},"f:managed":{".":{},"f:config":{},"f:profile":{}},"f:pluginImage":{},"f:replicas":{}},"f:whitelistIPRanges":{}},"f:logSet":{".":{},"f:managed":{".":{},"f:config":{},"f:nodeSelector":{".":{},"f:matrixone.cloud/cluster-pool":{},"f:matrixone.cloud/profile":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:storageClassName":{},"f:storageSize":{},"f:toleratedTaints":{}},"f:name":{},"f:profile":{},"f:replicas":{}},"f:managed":{".":{},"f:imageRepository":{},"f:localServiceRef":{".":{},"f:name":{}},"f:objectStorage":{".":{},"f:path":{},"f:region":{},"f:restored":{}}},"f:state":{},"f:unitName":{},"f:unitSelector":{},"f:version":{}},"f:state":{}},"manager":"Go-http-client","operation":"Update","time":"2024-03-15T05:26:57Z"},{"apiVersion":"core.matrixone-cloud/v1alpha1","fieldsType":"FieldsV1","fieldsV1":{"f:status":{".":{},"f:adminURL":{},"f:cnGroups":{},"f:conditions":{},"f:endpoint":{},"f:externalIdentity":{".":{},"f:aliyun":{".":{},"f:accountId":{}}},"f:localEndpoint":{".":{},"f:hostname":{},"f:port":{},"f:secretRef":{".":{},"f:name":{},"f:namespace":{}}},"f:phase":{}}},"manager":"Go-http-client","operation":"Update","subresource":"status","time":"2024-03-15T05:39:02Z"}],"name":"restore-freetier-02","resourceVersion":"96295990","uid":"958654b6-6428-4caa-b525-f346074db6df"},"spec":{"cnPools":[{"managed":{"config":"[cn.frontend]\nsaveQueryResult = \"on\"\nqueryResultTimeout = 72\nlengthOfQueryPrinted = 10000\ndisable-select-into = true\n[cn.txn]\nenable-leak-check = 1\nmax-active-ages = \"20m\"\n[observability]\nmetricUpdateStorageUsageInterval = \"15m\"\nenableStmtMerge = true\nenableMetricToProm = true\n","nodeSelector":{"matrixone.cloud/cluster-pool":"restore-freetier-02","matrixone.cloud/profile":"cn.standard"},"resources":{"limits":{"cpu":"7","memory":"13Gi"},"requests":{"cpu":"7","memory":"13Gi"}},"sharedStorageCache":{"memoryCacheSize":"1Gi"},"storageClassName":"alicloud-disk-essd-pl1","storageSize":"300Gi","toleratedTaints":["profile.matrixone.cloud/cn.standard","cluster-pool.matrixone.cloud/restore-freetier-02"]},"name":"pool","poolStrategy":{"scaleStrategy":{"maxIdle":2},"updateStrategy":{"reclaimTimeout":"24h0m0s"}},"profile":"cn.standard"},{"managed":{"config":"[cn.frontend]\nsaveQueryResult = \"on\"\nqueryResultTimeout = 72\nlengthOfQueryPrinted = 10000\ndisable-select-into = true\n[cn.txn]\nenable-leak-check = 1\nmax-active-ages = \"20m\"\n[observability]\nmetricUpdateStorageUsageInterval = \"15m\"\nenableStmtMerge = true\nenableMetricToProm = true\n","nodeSelector":{"matrixone.cloud/cluster-pool":"restore-freetier-02","matrixone.cloud/profile":"cn.tiny"},"resources":{"limits":{"cpu":"1","memory":"2Gi"},"requests":{"cpu":"1","memory":"2Gi"}},"sharedStorageCache":{"memoryCacheSize":"128Mi"},"storageClassName":"alicloud-disk-essd-pl1","storageSize":"300Gi","toleratedTaints":["profile.matrixone.cloud/cn.tiny","cluster-pool.matrixone.cloud/restore-freetier-02"]},"name":"limited","poolStrategy":{"scaleStrategy":{"maxIdle":0},"updateStrategy":{"reclaimTimeout":"24h0m0s"}},"profile":"cn.tiny"}],"cnSets":[{"managed":{"componentBackend":"Pod","config":"[cn]\ninit-work-state = \"Draining\"\n[cn.frontend]\nsaveQueryResult = \"on\"\nqueryResultTimeout = 72\nlengthOfQueryPrinted = 10000\ndisable-select-into = true\n[cn.txn]\nenable-leak-check = 1\nmax-active-ages = \"20m\"\n[observability]\nmetricUpdateStorageUsageInterval = \"15m\"\nenableStmtMerge = true\nenableMetricToProm = true\n","nodeSelector":{"matrixone.cloud/cluster-pool":"restore-freetier-02","matrixone.cloud/profile":"cn.standard"},"resources":{"limits":{"cpu":"7","memory":"13Gi"},"requests":{"cpu":"7","memory":"13Gi"}},"sharedStorageCache":{"memoryCacheSize":"1Gi"},"storageClassName":"alicloud-disk-essd-pl1","storageSize":"300Gi","toleratedTaints":["profile.matrixone.cloud/cn.standard","cluster-pool.matrixone.cloud/restore-freetier-02"]},"name":"default","profile":"cn.standard","replicas":2,"scalingConfig":{"maxReplicas":10,"minReplicas":2,"policy":"AutoScaling"}}],"dnSets":[{"managed":{"config":"[log]\nlevel = \"info\"\n","nodeSelector":{"matrixone.cloud/cluster-pool":"restore-freetier-02","matrixone.cloud/profile":"dn.standard"},"resources":{"limits":{"cpu":"15","memory":"29184Mi"},"requests":{"cpu":"15","memory":"29184Mi"}},"sharedStorageCache":{"memoryCacheSize":"5Gi"},"storageClassName":"alicloud-disk-essd-pl1","storageSize":"100Gi","toleratedTaints":["profile.matrixone.cloud/dn.standard","cluster-pool.matrixone.cloud/restore-freetier-02"]},"name":"default","profile":"dn.standard","replicas":1}],"endpoint":{"mode":"Dedicated","proxySpec":{"image":"registry.cn-shanghai.aliyuncs.com/matrixorigin/matrixone:nightly-e94ba155","managed":{"config":"[proxy.plugin]\ntimeout = \"3s\"\n","profile":"proxy.standard"},"pluginImage":"registry.cn-hangzhou.aliyuncs.com/ack-cos/plugin:49e2ffd8-20240201","replicas":2},"whitelistIPRanges":["0.0.0.0/0"]},"logSet":{"managed":{"config":"[log]\nlevel = \"info\"\n","nodeSelector":{"matrixone.cloud/cluster-pool":"restore-freetier-02","matrixone.cloud/profile":"log.standard"},"resources":{"limits":{"cpu":"3","memory":"6Gi"},"requests":{"cpu":"3","memory":"6Gi"}},"storageClassName":"alicloud-disk-essd-pl1","storageSize":"100Gi","toleratedTaints":["profile.matrixone.cloud/log.standard","cluster-pool.matrixone.cloud/restore-freetier-02"]},"name":"default","profile":"log.standard","replicas":3},"managed":{"imageRepository":"registry.cn-shanghai.aliyuncs.com/matrixorigin/matrixone","localServiceRef":{"name":"local-service"},"objectStorage":{"path":"moc-backup-test/restore-freetier-02-20240315021618","region":"cn-hangzhou","restored":true}},"state":"Active","unitName":"qa-unit-cn-hangzhou","unitSelector":{"matchLabels":{"matrixone.cloud/cloud":"aliyun","matrixone.cloud/region":"cn-hangzhou"}},"version":"nightly-e94ba155"},"state":{},"status":{"adminURL":"http://qa-unit-cn-hangzhou-mo-cloud-local-system-tunnel.cos:1010","cnGroups":[{"desiredReplicas":2,"name":"default","readyReplicas":2}],"conditions":[{"lastTransitionTime":"2024-03-15T05:26:57Z","message":"the object is reconciling","reason":"empty","status":"False","type":"Synced"},{"lastTransitionTime":"2024-03-15T05:39:02Z","message":"all components are ready.","reason":"AllComponentsAreReady","status":"True","type":"ComponentReady"},{"lastTransitionTime":"2024-03-15T05:39:02Z","message":"","reason":"EndpointNotReady","status":"False","type":"EndpointReady"},{"lastTransitionTime":"2024-03-15T05:39:02Z","message":"","reason":"ClusterNotReady","status":"False","type":"Ready"}],"endpoint":{},"externalIdentity":{"aliyun":{"accountId":"1895698303362550"}},"localEndpoint":{"hostname":"local-endpoint.restore-freetier-02","port":6001,"secretRef":{"name":"root","namespace":"restore-freetier-02"}},"phase":"Creating"}}

DEBUG    src.tests.upgrade.test_mo_upgrade:test_mo_upgrade.py:219 wait for the conditions by '<lambda>' with args: ('restore-freetier-02',), {}
DEBUG    kubernetes.client.rest:rest.py:235 response body: {"apiVersion":"core.matrixone-cloud/v1alpha1","kind":"Cluster","metadata":{"annotations":{"matrixone.cloud/enable-aksk-authorize":"true"},"creationTimestamp":"2024-03-15T05:26:57Z","generation":1,"labels":{"matrixone.cloud/cordoned":"Y","matrixone.cloud/role":"root"},"managedFields":[{"apiVersion":"core.matrixone-cloud/v1alpha1","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:matrixone.cloud/enable-aksk-authorize":{}},"f:labels":{".":{},"f:matrixone.cloud/cordoned":{},"f:matrixone.cloud/role":{}}},"f:spec":{".":{},"f:cnPools":{".":{},"k:{\"name\":\"limited\"}":{".":{},"f:managed":{".":{},"f:config":{},"f:nodeSelector":{".":{},"f:matrixone.cloud/cluster-pool":{},"f:matrixone.cloud/profile":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:sharedStorageCache":{".":{},"f:memoryCacheSize":{}},"f:storageClassName":{},"f:storageSize":{},"f:toleratedTaints":{}},"f:name":{},"f:poolStrategy":{".":{},"f:scaleStrategy":{".":{},"f:maxIdle":{}},"f:updateStrategy":{".":{},"f:reclaimTimeout":{}}},"f:profile":{}},"k:{\"name\":\"pool\"}":{".":{},"f:managed":{".":{},"f:config":{},"f:nodeSelector":{".":{},"f:matrixone.cloud/cluster-pool":{},"f:matrixone.cloud/profile":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:sharedStorageCache":{".":{},"f:memoryCacheSize":{}},"f:storageClassName":{},"f:storageSize":{},"f:toleratedTaints":{}},"f:name":{},"f:poolStrategy":{".":{},"f:scaleStrategy":{".":{},"f:maxIdle":{}},"f:updateStrategy":{".":{},"f:reclaimTimeout":{}}},"f:profile":{}}},"f:cnSets":{".":{},"k:{\"name\":\"default\"}":{".":{},"f:managed":{".":{},"f:componentBackend":{},"f:config":{},"f:nodeSelector":{".":{},"f:matrixone.cloud/cluster-pool":{},"f:matrixone.cloud/profile":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:sharedStorageCache":{".":{},"f:memoryCacheSize":{}},"f:storageClassName":{},"f:storageSize":{},"f:toleratedTaints":{}},"f:name":{},"f:profile":{},"f:replicas":{},"f:scalingConfig":{".":{},"f:maxReplicas":{},"f:minReplicas":{},"f:policy":{}}}},"f:dnSets":{".":{},"k:{\"name\":\"default\"}":{".":{},"f:managed":{".":{},"f:config":{},"f:nodeSelector":{".":{},"f:matrixone.cloud/cluster-pool":{},"f:matrixone.cloud/profile":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:sharedStorageCache":{".":{},"f:memoryCacheSize":{}},"f:storageClassName":{},"f:storageSize":{},"f:toleratedTaints":{}},"f:name":{},"f:profile":{},"f:replicas":{}}},"f:endpoint":{".":{},"f:mode":{},"f:proxySpec":{".":{},"f:image":{},"f:managed":{".":{},"f:config":{},"f:profile":{}},"f:pluginImage":{},"f:replicas":{}},"f:whitelistIPRanges":{}},"f:logSet":{".":{},"f:managed":{".":{},"f:config":{},"f:nodeSelector":{".":{},"f:matrixone.cloud/cluster-pool":{},"f:matrixone.cloud/profile":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:storageClassName":{},"f:storageSize":{},"f:toleratedTaints":{}},"f:name":{},"f:profile":{},"f:replicas":{}},"f:managed":{".":{},"f:imageRepository":{},"f:localServiceRef":{".":{},"f:name":{}},"f:objectStorage":{".":{},"f:path":{},"f:region":{},"f:restored":{}}},"f:state":{},"f:unitName":{},"f:unitSelector":{},"f:version":{}},"f:state":{}},"manager":"Go-http-client","operation":"Update","time":"2024-03-15T05:26:57Z"},{"apiVersion":"core.matrixone-cloud/v1alpha1","fieldsType":"FieldsV1","fieldsV1":{"f:status":{".":{},"f:adminURL":{},"f:cnGroups":{},"f:conditions":{},"f:endpoint":{},"f:externalIdentity":{".":{},"f:aliyun":{".":{},"f:accountId":{}}},"f:localEndpoint":{".":{},"f:hostname":{},"f:port":{},"f:secretRef":{".":{},"f:name":{},"f:namespace":{}}},"f:phase":{}}},"manager":"Go-http-client","operation":"Update","subresource":"status","time":"2024-03-15T05:39:02Z"}],"name":"restore-freetier-02","resourceVersion":"96295990","uid":"958654b6-6428-4caa-b525-f346074db6df"},"spec":{"cnPools":[{"managed":{"config":"[cn.frontend]\nsaveQueryResult = \"on\"\nqueryResultTimeout = 72\nlengthOfQueryPrinted = 10000\ndisable-select-into = true\n[cn.txn]\nenable-leak-check = 1\nmax-active-ages = \"20m\"\n[observability]\nmetricUpdateStorageUsageInterval = \"15m\"\nenableStmtMerge = true\nenableMetricToProm = true\n","nodeSelector":{"matrixone.cloud/cluster-pool":"restore-freetier-02","matrixone.cloud/profile":"cn.standard"},"resources":{"limits":{"cpu":"7","memory":"13Gi"},"requests":{"cpu":"7","memory":"13Gi"}},"sharedStorageCache":{"memoryCacheSize":"1Gi"},"storageClassName":"alicloud-disk-essd-pl1","storageSize":"300Gi","toleratedTaints":["profile.matrixone.cloud/cn.standard","cluster-pool.matrixone.cloud/restore-freetier-02"]},"name":"pool","poolStrategy":{"scaleStrategy":{"maxIdle":2},"updateStrategy":{"reclaimTimeout":"24h0m0s"}},"profile":"cn.standard"},{"managed":{"config":"[cn.frontend]\nsaveQueryResult = \"on\"\nqueryResultTimeout = 72\nlengthOfQueryPrinted = 10000\ndisable-select-into = true\n[cn.txn]\nenable-leak-check = 1\nmax-active-ages = \"20m\"\n[observability]\nmetricUpdateStorageUsageInterval = \"15m\"\nenableStmtMerge = true\nenableMetricToProm = true\n","nodeSelector":{"matrixone.cloud/cluster-pool":"restore-freetier-02","matrixone.cloud/profile":"cn.tiny"},"resources":{"limits":{"cpu":"1","memory":"2Gi"},"requests":{"cpu":"1","memory":"2Gi"}},"sharedStorageCache":{"memoryCacheSize":"128Mi"},"storageClassName":"alicloud-disk-essd-pl1","storageSize":"300Gi","toleratedTaints":["profile.matrixone.cloud/cn.tiny","cluster-pool.matrixone.cloud/restore-freetier-02"]},"name":"limited","poolStrategy":{"scaleStrategy":{"maxIdle":0},"updateStrategy":{"reclaimTimeout":"24h0m0s"}},"profile":"cn.tiny"}],"cnSets":[{"managed":{"componentBackend":"Pod","config":"[cn]\ninit-work-state = \"Draining\"\n[cn.frontend]\nsaveQueryResult = \"on\"\nqueryResultTimeout = 72\nlengthOfQueryPrinted = 10000\ndisable-select-into = true\n[cn.txn]\nenable-leak-check = 1\nmax-active-ages = \"20m\"\n[observability]\nmetricUpdateStorageUsageInterval = \"15m\"\nenableStmtMerge = true\nenableMetricToProm = true\n","nodeSelector":{"matrixone.cloud/cluster-pool":"restore-freetier-02","matrixone.cloud/profile":"cn.standard"},"resources":{"limits":{"cpu":"7","memory":"13Gi"},"requests":{"cpu":"7","memory":"13Gi"}},"sharedStorageCache":{"memoryCacheSize":"1Gi"},"storageClassName":"alicloud-disk-essd-pl1","storageSize":"300Gi","toleratedTaints":["profile.matrixone.cloud/cn.standard","cluster-pool.matrixone.cloud/restore-freetier-02"]},"name":"default","profile":"cn.standard","replicas":2,"scalingConfig":{"maxReplicas":10,"minReplicas":2,"policy":"AutoScaling"}}],"dnSets":[{"managed":{"config":"[log]\nlevel = \"info\"\n","nodeSelector":{"matrixone.cloud/cluster-pool":"restore-freetier-02","matrixone.cloud/profile":"dn.standard"},"resources":{"limits":{"cpu":"15","memory":"29184Mi"},"requests":{"cpu":"15","memory":"29184Mi"}},"sharedStorageCache":{"memoryCacheSize":"5Gi"},"storageClassName":"alicloud-disk-essd-pl1","storageSize":"100Gi","toleratedTaints":["profile.matrixone.cloud/dn.standard","cluster-pool.matrixone.cloud/restore-freetier-02"]},"name":"default","profile":"dn.standard","replicas":1}],"endpoint":{"mode":"Dedicated","proxySpec":{"image":"registry.cn-shanghai.aliyuncs.com/matrixorigin/matrixone:nightly-e94ba155","managed":{"config":"[proxy.plugin]\ntimeout = \"3s\"\n","profile":"proxy.standard"},"pluginImage":"registry.cn-hangzhou.aliyuncs.com/ack-cos/plugin:49e2ffd8-20240201","replicas":2},"whitelistIPRanges":["0.0.0.0/0"]},"logSet":{"managed":{"config":"[log]\nlevel = \"info\"\n","nodeSelector":{"matrixone.cloud/cluster-pool":"restore-freetier-02","matrixone.cloud/profile":"log.standard"},"resources":{"limits":{"cpu":"3","memory":"6Gi"},"requests":{"cpu":"3","memory":"6Gi"}},"storageClassName":"alicloud-disk-essd-pl1","storageSize":"100Gi","toleratedTaints":["profile.matrixone.cloud/log.standard","cluster-pool.matrixone.cloud/restore-freetier-02"]},"name":"default","profile":"log.standard","replicas":3},"managed":{"imageRepository":"registry.cn-shanghai.aliyuncs.com/matrixorigin/matrixone","localServiceRef":{"name":"local-service"},"objectStorage":{"path":"moc-backup-test/restore-freetier-02-20240315021618","region":"cn-hangzhou","restored":true}},"state":"Active","unitName":"qa-unit-cn-hangzhou","unitSelector":{"matchLabels":{"matrixone.cloud/cloud":"aliyun","matrixone.cloud/region":"cn-hangzhou"}},"version":"nightly-e94ba155"},"state":{},"status":{"adminURL":"http://qa-unit-cn-hangzhou-mo-cloud-local-system-tunnel.cos:1010","cnGroups":[{"desiredReplicas":2,"name":"default","readyReplicas":2}],"conditions":[{"lastTransitionTime":"2024-03-15T05:26:57Z","message":"the object is reconciling","reason":"empty","status":"False","type":"Synced"},{"lastTransitionTime":"2024-03-15T05:39:02Z","message":"all components are ready.","reason":"AllComponentsAreReady","status":"True","type":"ComponentReady"},{"lastTransitionTime":"2024-03-15T05:39:02Z","message":"","reason":"EndpointNotReady","status":"False","type":"EndpointReady"},{"lastTransitionTime":"2024-03-15T05:39:02Z","message":"","reason":"ClusterNotReady","status":"False","type":"Ready"}],"endpoint":{},"externalIdentity":{"aliyun":{"accountId":"1895698303362550"}},"localEndpoint":{"hostname":"local-endpoint.restore-freetier-02","port":6001,"secretRef":{"name":"root","namespace":"restore-freetier-02"}},"phase":"Creating"}}

DEBUG    src.tests.upgrade.test_mo_upgrade:test_mo_upgrade.py:219 wait for the conditions by '<lambda>' with args: ('restore-freetier-02',), {}
DEBUG    kubernetes.client.rest:rest.py:235 response body: {"apiVersion":"core.matrixone-cloud/v1alpha1","kind":"Cluster","metadata":{"annotations":{"matrixone.cloud/enable-aksk-authorize":"true"},"creationTimestamp":"2024-03-15T05:26:57Z","generation":1,"labels":{"matrixone.cloud/cordoned":"Y","matrixone.cloud/role":"root"},"managedFields":[{"apiVersion":"core.matrixone-cloud/v1alpha1","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:matrixone.cloud/enable-aksk-authorize":{}},"f:labels":{".":{},"f:matrixone.cloud/cordoned":{},"f:matrixone.cloud/role":{}}},"f:spec":{".":{},"f:cnPools":{".":{},"k:{\"name\":\"limited\"}":{".":{},"f:managed":{".":{},"f:config":{},"f:nodeSelector":{".":{},"f:matrixone.cloud/cluster-pool":{},"f:matrixone.cloud/profile":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:sharedStorageCache":{".":{},"f:memoryCacheSize":{}},"f:storageClassName":{},"f:storageSize":{},"f:toleratedTaints":{}},"f:name":{},"f:poolStrategy":{".":{},"f:scaleStrategy":{".":{},"f:maxIdle":{}},"f:updateStrategy":{".":{},"f:reclaimTimeout":{}}},"f:profile":{}},"k:{\"name\":\"pool\"}":{".":{},"f:managed":{".":{},"f:config":{},"f:nodeSelector":{".":{},"f:matrixone.cloud/cluster-pool":{},"f:matrixone.cloud/profile":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:sharedStorageCache":{".":{},"f:memoryCacheSize":{}},"f:storageClassName":{},"f:storageSize":{},"f:toleratedTaints":{}},"f:name":{},"f:poolStrategy":{".":{},"f:scaleStrategy":{".":{},"f:maxIdle":{}},"f:updateStrategy":{".":{},"f:reclaimTimeout":{}}},"f:profile":{}}},"f:cnSets":{".":{},"k:{\"name\":\"default\"}":{".":{},"f:managed":{".":{},"f:componentBackend":{},"f:config":{},"f:nodeSelector":{".":{},"f:matrixone.cloud/cluster-pool":{},"f:matrixone.cloud/profile":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:sharedStorageCache":{".":{},"f:memoryCacheSize":{}},"f:storageClassName":{},"f:storageSize":{},"f:toleratedTaints":{}},"f:name":{},"f:profile":{},"f:replicas":{},"f:scalingConfig":{".":{},"f:maxReplicas":{},"f:minReplicas":{},"f:policy":{}}}},"f:dnSets":{".":{},"k:{\"name\":\"default\"}":{".":{},"f:managed":{".":{},"f:config":{},"f:nodeSelector":{".":{},"f:matrixone.cloud/cluster-pool":{},"f:matrixone.cloud/profile":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:sharedStorageCache":{".":{},"f:memoryCacheSize":{}},"f:storageClassName":{},"f:storageSize":{},"f:toleratedTaints":{}},"f:name":{},"f:profile":{},"f:replicas":{}}},"f:endpoint":{".":{},"f:mode":{},"f:proxySpec":{".":{},"f:image":{},"f:managed":{".":{},"f:config":{},"f:profile":{}},"f:pluginImage":{},"f:replicas":{}},"f:whitelistIPRanges":{}},"f:logSet":{".":{},"f:managed":{".":{},"f:config":{},"f:nodeSelector":{".":{},"f:matrixone.cloud/cluster-pool":{},"f:matrixone.cloud/profile":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:storageClassName":{},"f:storageSize":{},"f:toleratedTaints":{}},"f:name":{},"f:profile":{},"f:replicas":{}},"f:managed":{".":{},"f:imageRepository":{},"f:localServiceRef":{".":{},"f:name":{}},"f:objectStorage":{".":{},"f:path":{},"f:region":{},"f:restored":{}}},"f:state":{},"f:unitName":{},"f:unitSelector":{},"f:version":{}},"f:state":{}},"manager":"Go-http-client","operation":"Update","time":"2024-03-15T05:26:57Z"},{"apiVersion":"core.matrixone-cloud/v1alpha1","fieldsType":"FieldsV1","fieldsV1":{"f:status":{".":{},"f:adminURL":{},"f:cnGroups":{},"f:conditions":{},"f:endpoint":{},"f:externalIdentity":{".":{},"f:aliyun":{".":{},"f:accountId":{}}},"f:localEndpoint":{".":{},"f:hostname":{},"f:port":{},"f:secretRef":{".":{},"f:name":{},"f:namespace":{}}},"f:phase":{}}},"manager":"Go-http-client","operation":"Update","subresource":"status","time":"2024-03-15T05:39:02Z"}],"name":"restore-freetier-02","resourceVersion":"96295990","uid":"958654b6-6428-4caa-b525-f346074db6df"},"spec":{"cnPools":[{"managed":{"config":"[cn.frontend]\nsaveQueryResult = \"on\"\nqueryResultTimeout = 72\nlengthOfQueryPrinted = 10000\ndisable-select-into = true\n[cn.txn]\nenable-leak-check = 1\nmax-active-ages = \"20m\"\n[observability]\nmetricUpdateStorageUsageInterval = \"15m\"\nenableStmtMerge = true\nenableMetricToProm = true\n","nodeSelector":{"matrixone.cloud/cluster-pool":"restore-freetier-02","matrixone.cloud/profile":"cn.standard"},"resources":{"limits":{"cpu":"7","memory":"13Gi"},"requests":{"cpu":"7","memory":"13Gi"}},"sharedStorageCache":{"memoryCacheSize":"1Gi"},"storageClassName":"alicloud-disk-essd-pl1","storageSize":"300Gi","toleratedTaints":["profile.matrixone.cloud/cn.standard","cluster-pool.matrixone.cloud/restore-freetier-02"]},"name":"pool","poolStrategy":{"scaleStrategy":{"maxIdle":2},"updateStrategy":{"reclaimTimeout":"24h0m0s"}},"profile":"cn.standard"},{"managed":{"config":"[cn.frontend]\nsaveQueryResult = \"on\"\nqueryResultTimeout = 72\nlengthOfQueryPrinted = 10000\ndisable-select-into = true\n[cn.txn]\nenable-leak-check = 1\nmax-active-ages = \"20m\"\n[observability]\nmetricUpdateStorageUsageInterval = \"15m\"\nenableStmtMerge = true\nenableMetricToProm = true\n","nodeSelector":{"matrixone.cloud/cluster-pool":"restore-freetier-02","matrixone.cloud/profile":"cn.tiny"},"resources":{"limits":{"cpu":"1","memory":"2Gi"},"requests":{"cpu":"1","memory":"2Gi"}},"sharedStorageCache":{"memoryCacheSize":"128Mi"},"storageClassName":"alicloud-disk-essd-pl1","storageSize":"300Gi","toleratedTaints":["profile.matrixone.cloud/cn.tiny","cluster-pool.matrixone.cloud/restore-freetier-02"]},"name":"limited","poolStrategy":{"scaleStrategy":{"maxIdle":0},"updateStrategy":{"reclaimTimeout":"24h0m0s"}},"profile":"cn.tiny"}],"cnSets":[{"managed":{"componentBackend":"Pod","config":"[cn]\ninit-work-state = \"Draining\"\n[cn.frontend]\nsaveQueryResult = \"on\"\nqueryResultTimeout = 72\nlengthOfQueryPrinted = 10000\ndisable-select-into = true\n[cn.txn]\nenable-leak-check = 1\nmax-active-ages = \"20m\"\n[observability]\nmetricUpdateStorageUsageInterval = \"15m\"\nenableStmtMerge = true\nenableMetricToProm = true\n","nodeSelector":{"matrixone.cloud/cluster-pool":"restore-freetier-02","matrixone.cloud/profile":"cn.standard"},"resources":{"limits":{"cpu":"7","memory":"13Gi"},"requests":{"cpu":"7","memory":"13Gi"}},"sharedStorageCache":{"memoryCacheSize":"1Gi"},"storageClassName":"alicloud-disk-essd-pl1","storageSize":"300Gi","toleratedTaints":["profile.matrixone.cloud/cn.standard","cluster-pool.matrixone.cloud/restore-freetier-02"]},"name":"default","profile":"cn.standard","replicas":2,"scalingConfig":{"maxReplicas":10,"minReplicas":2,"policy":"AutoScaling"}}],"dnSets":[{"managed":{"config":"[log]\nlevel = \"info\"\n","nodeSelector":{"matrixone.cloud/cluster-pool":"restore-freetier-02","matrixone.cloud/profile":"dn.standard"},"resources":{"limits":{"cpu":"15","memory":"29184Mi"},"requests":{"cpu":"15","memory":"29184Mi"}},"sharedStorageCache":{"memoryCacheSize":"5Gi"},"storageClassName":"alicloud-disk-essd-pl1","storageSize":"100Gi","toleratedTaints":["profile.matrixone.cloud/dn.standard","cluster-pool.matrixone.cloud/restore-freetier-02"]},"name":"default","profile":"dn.standard","replicas":1}],"endpoint":{"mode":"Dedicated","proxySpec":{"image":"registry.cn-shanghai.aliyuncs.com/matrixorigin/matrixone:nightly-e94ba155","managed":{"config":"[proxy.plugin]\ntimeout = \"3s\"\n","profile":"proxy.standard"},"pluginImage":"registry.cn-hangzhou.aliyuncs.com/ack-cos/plugin:49e2ffd8-20240201","replicas":2},"whitelistIPRanges":["0.0.0.0/0"]},"logSet":{"managed":{"config":"[log]\nlevel = \"info\"\n","nodeSelector":{"matrixone.cloud/cluster-pool":"restore-freetier-02","matrixone.cloud/profile":"log.standard"},"resources":{"limits":{"cpu":"3","memory":"6Gi"},"requests":{"cpu":"3","memory":"6Gi"}},"storageClassName":"alicloud-disk-essd-pl1","storageSize":"100Gi","toleratedTaints":["profile.matrixone.cloud/log.standard","cluster-pool.matrixone.cloud/restore-freetier-02"]},"name":"default","profile":"log.standard","replicas":3},"managed":{"imageRepository":"registry.cn-shanghai.aliyuncs.com/matrixorigin/matrixone","localServiceRef":{"name":"local-service"},"objectStorage":{"path":"moc-backup-test/restore-freetier-02-20240315021618","region":"cn-hangzhou","restored":true}},"state":"Active","unitName":"qa-unit-cn-hangzhou","unitSelector":{"matchLabels":{"matrixone.cloud/cloud":"aliyun","matrixone.cloud/region":"cn-hangzhou"}},"version":"nightly-e94ba155"},"state":{},"status":{"adminURL":"http://qa-unit-cn-hangzhou-mo-cloud-local-system-tunnel.cos:1010","cnGroups":[{"desiredReplicas":2,"name":"default","readyReplicas":2}],"conditions":[{"lastTransitionTime":"2024-03-15T05:26:57Z","message":"the object is reconciling","reason":"empty","status":"False","type":"Synced"},{"lastTransitionTime":"2024-03-15T05:39:02Z","message":"all components are ready.","reason":"AllComponentsAreReady","status":"True","type":"ComponentReady"},{"lastTransitionTime":"2024-03-15T05:39:02Z","message":"","reason":"EndpointNotReady","status":"False","type":"EndpointReady"},{"lastTransitionTime":"2024-03-15T05:39:02Z","message":"","reason":"ClusterNotReady","status":"False","type":"Ready"}],"endpoint":{},"externalIdentity":{"aliyun":{"accountId":"1895698303362550"}},"localEndpoint":{"hostname":"local-endpoint.restore-freetier-02","port":6001,"secretRef":{"name":"root","namespace":"restore-freetier-02"}},"phase":"Creating"}}

DEBUG    src.tests.upgrade.test_mo_upgrade:test_mo_upgrade.py:219 wait for the conditions by '<lambda>' with args: ('restore-freetier-02',), {}
DEBUG    kubernetes.client.rest:rest.py:235 response body: {"apiVersion":"core.matrixone-cloud/v1alpha1","kind":"Cluster","metadata":{"annotations":{"matrixone.cloud/enable-aksk-authorize":"true","matrixone.cloud/proxy-dns-added":"y"},"creationTimestamp":"2024-03-15T05:26:57Z","generation":1,"labels":{"matrixone.cloud/cordoned":"Y","matrixone.cloud/role":"root"},"managedFields":[{"apiVersion":"core.matrixone-cloud/v1alpha1","fieldsType":"FieldsV1","fieldsV1":{"f:metadata":{"f:annotations":{".":{},"f:matrixone.cloud/enable-aksk-authorize":{},"f:matrixone.cloud/proxy-dns-added":{}},"f:labels":{".":{},"f:matrixone.cloud/cordoned":{},"f:matrixone.cloud/role":{}}},"f:spec":{".":{},"f:cnPools":{".":{},"k:{\"name\":\"limited\"}":{".":{},"f:managed":{".":{},"f:config":{},"f:nodeSelector":{".":{},"f:matrixone.cloud/cluster-pool":{},"f:matrixone.cloud/profile":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:sharedStorageCache":{".":{},"f:memoryCacheSize":{}},"f:storageClassName":{},"f:storageSize":{},"f:toleratedTaints":{}},"f:name":{},"f:poolStrategy":{".":{},"f:scaleStrategy":{".":{},"f:maxIdle":{}},"f:updateStrategy":{".":{},"f:reclaimTimeout":{}}},"f:profile":{}},"k:{\"name\":\"pool\"}":{".":{},"f:managed":{".":{},"f:config":{},"f:nodeSelector":{".":{},"f:matrixone.cloud/cluster-pool":{},"f:matrixone.cloud/profile":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:sharedStorageCache":{".":{},"f:memoryCacheSize":{}},"f:storageClassName":{},"f:storageSize":{},"f:toleratedTaints":{}},"f:name":{},"f:poolStrategy":{".":{},"f:scaleStrategy":{".":{},"f:maxIdle":{}},"f:updateStrategy":{".":{},"f:reclaimTimeout":{}}},"f:profile":{}}},"f:cnSets":{".":{},"k:{\"name\":\"default\"}":{".":{},"f:managed":{".":{},"f:componentBackend":{},"f:config":{},"f:nodeSelector":{".":{},"f:matrixone.cloud/cluster-pool":{},"f:matrixone.cloud/profile":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:sharedStorageCache":{".":{},"f:memoryCacheSize":{}},"f:storageClassName":{},"f:storageSize":{},"f:toleratedTaints":{}},"f:name":{},"f:profile":{},"f:replicas":{},"f:scalingConfig":{".":{},"f:maxReplicas":{},"f:minReplicas":{},"f:policy":{}}}},"f:dnSets":{".":{},"k:{\"name\":\"default\"}":{".":{},"f:managed":{".":{},"f:config":{},"f:nodeSelector":{".":{},"f:matrixone.cloud/cluster-pool":{},"f:matrixone.cloud/profile":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:sharedStorageCache":{".":{},"f:memoryCacheSize":{}},"f:storageClassName":{},"f:storageSize":{},"f:toleratedTaints":{}},"f:name":{},"f:profile":{},"f:replicas":{}}},"f:endpoint":{".":{},"f:mode":{},"f:proxySpec":{".":{},"f:image":{},"f:managed":{".":{},"f:config":{},"f:profile":{}},"f:pluginImage":{},"f:replicas":{}},"f:whitelistIPRanges":{}},"f:logSet":{".":{},"f:managed":{".":{},"f:config":{},"f:nodeSelector":{".":{},"f:matrixone.cloud/cluster-pool":{},"f:matrixone.cloud/profile":{}},"f:resources":{".":{},"f:limits":{".":{},"f:cpu":{},"f:memory":{}},"f:requests":{".":{},"f:cpu":{},"f:memory":{}}},"f:storageClassName":{},"f:storageSize":{},"f:toleratedTaints":{}},"f:name":{},"f:profile":{},"f:replicas":{}},"f:managed":{".":{},"f:imageRepository":{},"f:localServiceRef":{".":{},"f:name":{}},"f:objectStorage":{".":{},"f:path":{},"f:region":{},"f:restored":{}}},"f:state":{},"f:unitName":{},"f:unitSelector":{},"f:version":{}},"f:state":{}},"manager":"Go-http-client","operation":"Update","time":"2024-03-15T05:40:32Z"},{"apiVersion":"core.matrixone-cloud/v1alpha1","fieldsType":"FieldsV1","fieldsV1":{"f:status":{".":{},"f:adminURL":{},"f:aliyunStatus":{".":{},"f:privateLink":{".":{},"f:serviceID":{},"f:serviceName":{},"f:zones":{}}},"f:cnGroups":{},"f:conditions":{},"f:endpoint":{".":{},"f:address":{},"f:httpsPort":{},"f:phase":{},"f:port":{}},"f:externalIdentity":{".":{},"f:aliyun":{".":{},"f:accountId":{}}},"f:localEndpoint":{".":{},"f:hostname":{},"f:port":{},"f:secretRef":{".":{},"f:name":{},"f:namespace":{}}},"f:phase":{}}},"manager":"Go-http-client","operation":"Update","subresource":"status","time":"2024-03-15T05:40:35Z"}],"name":"restore-freetier-02","resourceVersion":"96297405","uid":"958654b6-6428-4caa-b525-f346074db6df"},"spec":{"cnPools":[{"managed":{"config":"[cn.frontend]\nsaveQueryResult = \"on\"\nqueryResultTimeout = 72\nlengthOfQueryPrinted = 10000\ndisable-select-into = true\n[cn.txn]\nenable-leak-check = 1\nmax-active-ages = \"20m\"\n[observability]\nmetricUpdateStorageUsageInterval = \"15m\"\nenableStmtMerge = true\nenableMetricToProm = true\n","nodeSelector":{"matrixone.cloud/cluster-pool":"restore-freetier-02","matrixone.cloud/profile":"cn.standard"},"resources":{"limits":{"cpu":"7","memory":"13Gi"},"requests":{"cpu":"7","memory":"13Gi"}},"sharedStorageCache":{"memoryCacheSize":"1Gi"},"storageClassName":"alicloud-disk-essd-pl1","storageSize":"300Gi","toleratedTaints":["profile.matrixone.cloud/cn.standard","cluster-pool.matrixone.cloud/restore-freetier-02"]},"name":"pool","poolStrategy":{"scaleStrategy":{"maxIdle":2},"updateStrategy":{"reclaimTimeout":"24h0m0s"}},"profile":"cn.standard"},{"managed":{"config":"[cn.frontend]\nsaveQueryResult = \"on\"\nqueryResultTimeout = 72\nlengthOfQueryPrinted = 10000\ndisable-select-into = true\n[cn.txn]\nenable-leak-check = 1\nmax-active-ages = \"20m\"\n[observability]\nmetricUpdateStorageUsageInterval = \"15m\"\nenableStmtMerge = true\nenableMetricToProm = true\n","nodeSelector":{"matrixone.cloud/cluster-pool":"restore-freetier-02","matrixone.cloud/profile":"cn.tiny"},"resources":{"limits":{"cpu":"1","memory":"2Gi"},"requests":{"cpu":"1","memory":"2Gi"}},"sharedStorageCache":{"memoryCacheSize":"128Mi"},"storageClassName":"alicloud-disk-essd-pl1","storageSize":"300Gi","toleratedTaints":["profile.matrixone.cloud/cn.tiny","cluster-pool.matrixone.cloud/restore-freetier-02"]},"name":"limited","poolStrategy":{"scaleStrategy":{"maxIdle":0},"updateStrategy":{"reclaimTimeout":"24h0m0s"}},"profile":"cn.tiny"}],"cnSets":[{"managed":{"componentBackend":"Pod","config":"[cn]\ninit-work-state = \"Draining\"\n[cn.frontend]\nsaveQueryResult = \"on\"\nqueryResultTimeout = 72\nlengthOfQueryPrinted = 10000\ndisable-select-into = true\n[cn.txn]\nenable-leak-check = 1\nmax-active-ages = \"20m\"\n[observability]\nmetricUpdateStorageUsageInterval = \"15m\"\nenableStmtMerge = true\nenableMetricToProm = true\n","nodeSelector":{"matrixone.cloud/cluster-pool":"restore-freetier-02","matrixone.cloud/profile":"cn.standard"},"resources":{"limits":{"cpu":"7","memory":"13Gi"},"requests":{"cpu":"7","memory":"13Gi"}},"sharedStorageCache":{"memoryCacheSize":"1Gi"},"storageClassName":"alicloud-disk-essd-pl1","storageSize":"300Gi","toleratedTaints":["profile.matrixone.cloud/cn.standard","cluster-pool.matrixone.cloud/restore-freetier-02"]},"name":"default","profile":"cn.standard","replicas":2,"scalingConfig":{"maxReplicas":10,"minReplicas":2,"policy":"AutoScaling"}}],"dnSets":[{"managed":{"config":"[log]\nlevel = \"info\"\n","nodeSelector":{"matrixone.cloud/cluster-pool":"restore-freetier-02","matrixone.cloud/profile":"dn.standard"},"resources":{"limits":{"cpu":"15","memory":"29184Mi"},"requests":{"cpu":"15","memory":"29184Mi"}},"sharedStorageCache":{"memoryCacheSize":"5Gi"},"storageClassName":"alicloud-disk-essd-pl1","storageSize":"100Gi","toleratedTaints":["profile.matrixone.cloud/dn.standard","cluster-pool.matrixone.cloud/restore-freetier-02"]},"name":"default","profile":"dn.standard","replicas":1}],"endpoint":{"mode":"Dedicated","proxySpec":{"image":"registry.cn-shanghai.aliyuncs.com/matrixorigin/matrixone:nightly-e94ba155","managed":{"config":"[proxy.plugin]\ntimeout = \"3s\"\n","profile":"proxy.standard"},"pluginImage":"registry.cn-hangzhou.aliyuncs.com/ack-cos/plugin:49e2ffd8-20240201","replicas":2},"whitelistIPRanges":["0.0.0.0/0"]},"logSet":{"managed":{"config":"[log]\nlevel = \"info\"\n","nodeSelector":{"matrixone.cloud/cluster-pool":"restore-freetier-02","matrixone.cloud/profile":"log.standard"},"resources":{"limits":{"cpu":"3","memory":"6Gi"},"requests":{"cpu":"3","memory":"6Gi"}},"storageClassName":"alicloud-disk-essd-pl1","storageSize":"100Gi","toleratedTaints":["profile.matrixone.cloud/log.standard","cluster-pool.matrixone.cloud/restore-freetier-02"]},"name":"default","profile":"log.standard","replicas":3},"managed":{"imageRepository":"registry.cn-shanghai.aliyuncs.com/matrixorigin/matrixone","localServiceRef":{"name":"local-service"},"objectStorage":{"path":"moc-backup-test/restore-freetier-02-20240315021618","region":"cn-hangzhou","restored":true}},"state":"Active","unitName":"qa-unit-cn-hangzhou","unitSelector":{"matchLabels":{"matrixone.cloud/cloud":"aliyun","matrixone.cloud/region":"cn-hangzhou"}},"version":"nightly-e94ba155"},"state":{},"status":{"adminURL":"http://qa-unit-cn-hangzhou-mo-cloud-local-system-tunnel.cos:1010","aliyunStatus":{"privateLink":{"serviceID":"epsrv-bp13nlo6m1duuu0twpe0","serviceName":"com.aliyuncs.privatelink.cn-hangzhou.epsrv-bp13nlo6m1duuu0twpe0","zones":["cn-hangzhou-i","cn-hangzhou-j","cn-hangzhou-k"]}},"cnGroups":[{"desiredReplicas":2,"name":"default","readyReplicas":2}],"conditions":[{"lastTransitionTime":"2024-03-15T05:40:32Z","message":"the object is synced","reason":"empty","status":"True","type":"Synced"},{"lastTransitionTime":"2024-03-15T05:39:02Z","message":"all components are ready.","reason":"AllComponentsAreReady","status":"True","type":"ComponentReady"},{"lastTransitionTime":"2024-03-15T05:40:32Z","message":"","reason":"EndpointReady","status":"True","type":"EndpointReady"},{"lastTransitionTime":"2024-03-15T05:40:32Z","message":"","reason":"ClusterReady","status":"True","type":"Ready"}],"endpoint":{"address":"restore-freetier-02.cn-hangzhou.cluster.cn-qa.matrixone.tech","httpsPort":443,"phase":"Creating","port":6001},"externalIdentity":{"aliyun":{"accountId":"1895698303362550"}},"localEndpoint":{"hostname":"local-endpoint.restore-freetier-02","port":6001,"secretRef":{"name":"root","namespace":"restore-freetier-02"}},"phase":"Active"}}